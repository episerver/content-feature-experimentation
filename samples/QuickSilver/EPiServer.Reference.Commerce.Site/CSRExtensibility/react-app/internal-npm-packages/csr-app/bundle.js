"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=e(t);require("@episerver/ui-framework/dist/main.css");var n=require("react-redux"),s=require("@material-ui/core"),a=require("material-ui-pickers"),i=require("redux"),o=require("@material-ui/core/styles"),c=e(require("@date-io/moment")),l=e(require("@material-ui/core/Fab")),u=e(require("@material-ui/icons/FeedbackOutlined")),d=e(require("@material-ui/core/Grid")),p=e(require("@material-ui/icons/Warning")),h=e(require("@material-ui/core/Dialog")),m=e(require("@material-ui/core/DialogActions")),g=e(require("@material-ui/core/DialogContent")),f=require("@episerver/ui-framework"),y=e(require("@material-ui/core/Typography/Typography")),E=e(require("@material-ui/core/Snackbar")),v=e(require("@material-ui/core/CircularProgress")),C=e(require("axios")),S=require("us-state-codes"),I=require("zipcodes"),b=require("yup"),A=require("@material/react-select"),O=e(A);require("@material/react-menu/index.scss"),require("@material/react-select/index.scss");var T=require("react-material-ui-form-validator"),w=require("bignumber.js"),G=require("countries-list"),D=require("react-router-dom"),P=e(require("@material-ui/core/Card")),N=e(require("@material-ui/core/CardHeader")),R=e(require("@material-ui/core/CardContent")),x=e(require("@material-ui/core/Typography")),L=e(require("@material-ui/icons/Mail")),M=e(require("@material-ui/icons/Phone")),F=e(require("@material-ui/icons/AddCircle")),k=e(require("@material-ui/core/CardActionArea")),_=e(require("@material-ui/core/Slide")),V=e(require("@material-ui/core/Hidden")),U=e(require("@material-ui/core/AppBar")),B=e(require("@material-ui/core/Toolbar")),H=e(require("@material-ui/icons/Menu")),q=e(require("@material-ui/core/Table")),W=e(require("@material-ui/core/TableBody")),j=e(require("@material-ui/core/TableCell")),Y=e(require("@material-ui/core/TableHead")),z=e(require("@material-ui/core/TablePagination")),Q=e(require("@material-ui/core/TableRow")),K=e(require("@material-ui/core/Paper")),X=e(require("moment")),J=e(require("@material-ui/core/Tooltip")),Z=e(require("@material-ui/core/IconButton")),$=e(require("@material-ui/icons/Edit")),ee=e(require("@material-ui/icons/Delete")),te=e(require("@material-ui/icons/Save")),re=e(require("@material-ui/icons/Close")),ne=require("@material/data-table"),se=e(require("@material-ui/core/RadioGroup")),ae=e(require("@material-ui/core/FormControlLabel")),ie=e(require("@material-ui/core/FormLabel")),oe=e(require("@material-ui/core/Radio")),ce=e(require("@material-ui/core/DialogTitle")),le=e(require("@material-ui/core/DialogContentText")),ue=e(require("@material-ui/core/Divider")),de=e(require("@material-ui/core/Chip")),pe=e(require("@material-ui/core/TextField")),he=e(require("@material-ui/core/InputAdornment")),me=e(require("@material-ui/core/Avatar")),ge=e(require("@material-ui/icons/Done")),fe=e(require("@material-ui/icons/LocalOffer")),ye=e(require("@material-ui/icons/CardGiftcard")),Ee=e(require("@material-ui/core/Badge")),ve=require("lodash-es"),Ce=e(require("react-autosuggest")),Se=e(require("@material-ui/icons/ShoppingCart")),Ie=require("@material/react-text-field"),be=e(Ie),Ae=require("@material-ui/icons"),Oe=function(e,t){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function Te(e,t){function r(){this.constructor=e}Oe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var we,Ge=function(){return(Ge=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function De(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Pe(e,t,r,n){return new(r||(r=Promise))((function(s,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?s(e.value):new r((function(t){t(e.value)})).then(i,o)}c((n=n.apply(e,t||[])).next())}))}function Ne(e,t){var r,n,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function Re(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)n[s]=a[i];return n}!function(e){e.None="None",e.DeleteAddress="Delete_Address",e.DiscardChanges="Discard_Changes",e.UpdateShipmentStatus="Update_Shipment_Status",e.UpdateOrderStatus="Update_Order_Status",e.UpdateOrderMarket="Update_Order_Market",e.UpdateOrderCurrency="Update_Order_Currency"}(we||(we={}));var xe,Le=we;!function(e){e.ShippingAddress="Shipping Address",e.BillingAddress="Billing Address"}(xe||(xe={}));var Me,Fe=xe;!function(e){e.Hide="Hide",e.Add="Add",e.Edit="Edit"}(Me||(Me={}));var ke,_e=Me;!function(e){e.None="None",e.PersonalInformation="PersonalInformation",e.AddressBook="AddressBook"}(ke||(ke={}));var Ve=ke,Ue={application:{pageIndex:0,rowsPerPage:20,totalOrderGroups:0,notificationMessage:"",customerSelectionViewIsVisible:!1,orderGroupViewIsVisible:!1,lineItemDeleteConfirmationIsVisible:!1,orderGroupFilterIsVisible:!1,notificationMessageIsVisible:!1,baseApiUrl:"./",customerSearchFieldValue:"",customerSearchFieldSuggestions:[],entrySearchFieldValue:"",entrySearchFieldSuggestions:[],entrySelectedSuggestion:null,entrySuggestionQuantity:0,entrySuggestionPlacedPrice:{Currency:"USD",Amount:0,Fractions:2},isLoadingResource:!1,isCurrentFormValid:!1,isCurrentFormDirty:!1,currentDialog:Le.None,selectedContactId:"",isAuthenticated:!0,isLoadingOverlayActive:!1},orderGroup:{currentLineItemId:-1,selectedFormIndex:0,selectedShipmentIndex:0,selectedEntry:null,currentOrderGroup:null,listedOrderGroups:[],couponTextFieldValue:"",orderStatuses:[],currencies:[],paymentPlanSetting:null,currentOrderGroupId:null},orderAddressDropdown:{selectedAddressIndex:-1,searchFieldValue:"",currentOrderAddress:null,currentOrderAddresses:[]},shipment:{shippingMethods:[],currentLineItemExpandedRow:-1,statuses:[]},createOrderAddressForm:{isVisible:!1,isValid:!1,address:{AddressId:"",Name:"",FirstName:"",LastName:"",Email:"",Line1:"",Line2:"",City:"",CountryName:"",RegionCode:"",PostalCode:"",CountryCode:"",DaytimePhoneNumber:"",IsPreferredShippingAddress:!1,IsPreferredBillingAddress:!1,DisplayName:""},phoneNumber:"",callingCode:"",addressType:Fe.ShippingAddress},contact:{currentContact:null,currentAddress:null,contactProfileIsVisible:!1,personalInformationEditViewIsVisible:!1,addressBookIsVisible:!1,addressDetailsViewMode:_e.Hide,drawerSelectedMenu:Ve.None,drawerNextMenu:Ve.None,customerGroups:[],drawerIsExpanded:!0},createContactForm:{isVisible:!1,isValid:!1,contact:{Id:"",Addresses:[],IsAnonymous:!1}},geographics:{countries:[]},market:{markets:[],selectedMarket:""},addressForm:{phoneNumber:null,callingCode:"",countryCode:""},payment:{isAcceptPaymentFormVisible:!1,addressIsExpanded:!1,paymentMethods:[],paymentMethodId:"",payment:null,billingAddress:null},setting:{pageConfig:{}}};var Be=Object.freeze({__proto__:null,showNotification:function(e){return{type:"SHOW_NOTIFICATION",message:e}},openDeleteLineItemConfirmationView:function(){return{type:"OPEN_DELETE_LINE_ITEM_CONFIRMATION_VIEW"}},closeDeleteLineItemConfirmationView:function(){return{type:"CLOSE_DELETE_LINE_ITEM_CONFIRMATION_VIEW"}},hideNotification:function(){return{type:"HIDE_NOTIFICATION"}},toggleOrderGroupFilter:function(){return{type:"TOGGLE_ORDER_GROUP_FILTER"}},setOrderGroupListPageIndex:function(e){return{type:"SET_ORDER_GROUP_LIST_PAGE_INDEX",value:e}},openOrderGroupView:function(){return{type:"OPEN_ORDER_GROUP_VIEW"}},closeOrderGroupView:function(){return{type:"CLOSE_ORDER_GROUP_VIEW"}},openCustomerSelectionView:function(){return{type:"OPEN_CUSTOMER_SELECTION_VIEW"}},closeCustomerSelectionView:function(){return{type:"CLOSE_CUSTOMER_SELECTION_VIEW"}},setBaseApiUrl:function(e){return{type:"SET_BASE_API_URL",url:e}},setCustomerSearchFieldValue:function(e){return{type:"SET_CUSTOMER_SEARCH_FIELD_VALUE",value:e}},setOrderGroupListRowsPerPage:function(e){return{type:"SET_ORDER_GROUP_LIST_ROWS_PER_PAGE",value:e}},setTotalOrderGroups:function(e){return{type:"SET_TOTAL_ORDER_GROUPS",value:e}},setCustomerSearchFieldSuggestions:function(e){return{type:"SET_CUSTOMER_SEARCH_FIELD_SUGGESTIONS",suggestions:e}},setEntrySearchFieldValue:function(e){return{type:"SET_ENTRY_SEARCH_FIELD_VALUE",value:e}},setEntrySearchFieldSuggestions:function(e){return{type:"SET_ENTRY_SEARCH_FIELD_SUGGESTIONS",suggestions:e}},selectEntrySuggestion:function(e){return{type:"SELECT_ENTRY_SUGGESTION",suggestion:e}},setEntrySuggestionQuantity:function(e){return{type:"SET_ENTRY_SUGGESTION_QUANTITY",value:e}},setEntrySuggestionPlacedPrice:function(e){return{type:"SET_ENTRY_SUGGESTION_PLACED_PRICE",value:e}},setIsLoadingResource:function(e){return{type:"SET_IS_LOADING_RESOURCE",value:e}},setIsCurrentFormValid:function(e){return{type:"SET_IS_CURRENT_FORM_VALID",value:e}},setIsCurrentFormDirty:function(e){return{type:"SET_IS_CURRENT_FORM_DIRTY",value:e}},setCurrentDialog:function(e){return{type:"SET_CURRENT_DIALOG",value:e}},setSelectedContactId:function(e){return{type:"SET_SELECTED_CONTACT_ID",contactId:e}},setAuthorized:function(e){return{type:"SET_AUTHORIZED",isAuthenticated:e}},setLoadingOverlayState:function(e){return{type:"SET_LOADING_OVERLAY_STATE",isActive:e}}});var He=Object.freeze({__proto__:null,setCouponTextFieldValue:function(e){return{type:"SET_COUPON_TEXTFIELD_VALUE",value:e}},setSelectedFormIndex:function(e){return{type:"SET_SELECTED_FORM_INDEX",index:e}},setSelectedShipmentIndex:function(e){return{type:"SET_SELECTED_SHIPMENT_INDEX",index:e}},setSelectedEntry:function(e){return{type:"SET_SELECTED_ENTRY",entry:e}},setCurrentLineItemId:function(e){return{type:"SET_CURRENT_LINE_ITEM_ID",lineItemId:e}},setCurrentOrderGroup:function(e){return{type:"SET_CURRENT_ORDER_GROUP",orderGroup:e}},listOrderGroups:function(e){return{type:"LIST_ORDER_GROUPS",orderGroups:e}},updateCurrentOrderGroup:function(e){return{type:"UPDATE_CURRENT_ORDER_GROUP",orderGroup:e}},setOrderStatuses:function(e){return{type:"SET_ORDER_STATUSES",value:e}},setCurrencies:function(e){return{type:"SET_CURRENCIES",currencies:e}},setSelectedCurrency:function(e){return{type:"SET_SELECTED_CURRENCY",currency:e}},setPaymentPlanSetting:function(e){return{type:"SET_PAYMENTPLAN_SETTING",paymentPlanSetting:e}},setCurrentOrderGroupId:function(e){return{type:"SET_CURRENT_ORDERGROUPID",payload:e}}});var qe=Object.freeze({__proto__:null,setOrderAddresses:function(e){return{type:"SET_ORDER_ADDRESSES",addresses:e}},setSearchFieldValue:function(e){return{type:"SET_SEARCH_FIELD_VALUE",searchFieldValue:e}}});var We=Object.freeze({__proto__:null,setShippingMethods:function(e){return{type:"SET_SHIPPING_METHODS",shippingMethods:e}},setShipmentStatuses:function(e){return{type:"SET_SHIPMENT_STATUSES",statuses:e}}});var je=Object.freeze({__proto__:null,setPaymentMethods:function(e){return{type:"SET_PAYMENT_METHODS",paymentMethods:e}},showAcceptPaymentForm:function(){return{type:"SHOW_ACCEPT_PAYMENT_FORM"}},hideAcceptPaymentForm:function(){return{type:"HIDE_ACCEPT_PAYMENT_FORM"}},setPaymentMethodId:function(e){return{type:"SET_PAYMENT_METHOD_ID",id:e}},setPayment:function(e){return{type:"SET_PAYMENT",payment:e}},setBillingAddress:function(e){return{type:"SET_BILLING_ADDRESS",billingAddress:e}},setBillingAddressDropdownIsExpanded:function(e){return{type:"SET_BILLING_ADDRESS_DROPDOWN_IS_EXPANDED",value:e}}});var Ye=Object.freeze({__proto__:null,setDrawerIsExpanded:function(e){return{type:"SET_DRAWER_IS_EXPANDED",value:e}},setCurrentContactId:function(e){return{type:"SET_CURRENT_CONTACT_ID",contactId:e}},setCurrentContact:function(e){return{type:"SET_CURRENT_CONTACT",contact:e}},showContactProfile:function(e){return void 0===e&&(e=!1),{type:"SHOW_CONTACT_PROFILE",isReadonly:e}},showAddressBook:function(){return{type:"SHOW_ADDRESS_BOOK"}},showPersonalInformationEditView:function(){return{type:"SHOW_PERSONAL_INFORMATION_EDIT_VIEW"}},setAddressDetailsViewMode:function(e){return{type:"SET_ADDRESS_DETAILS_VIEW_MODE",mode:e}},setDrawerSelectedMenu:function(e){return{type:"SET_DRAWER_SELECTED_MENU",value:e}},setDrawerNextMenu:function(e){return{type:"SET_DRAWER_NEXT_MENU",value:e}},setCurrentAddress:function(e){return{type:"SET_CURRENT_ADDRESS",address:e}},setCustomerGroups:function(e){return{type:"SET_CUSTOMER_GROUPS",customerGroups:e}}});var ze=Object.freeze({__proto__:null,showCreateContactForm:function(){return{type:"SHOW_CREATE_CONTACT_FORM"}},hideCreateContactForm:function(){return{type:"HIDE_CREATE_CONTACT_FORM"}},setCreateContactFormContact:function(e){return{type:"SET_CREATE_CONTACT_FORM_CONTACT",contact:e}},setCreateContactFormIsValid:function(e){return{type:"SET_CREATE_CONTACT_FORM_ISVALID",isValid:e}}});var Qe=Object.freeze({__proto__:null,showCreateOrderAddressForm:function(e){return{type:"SHOW_CREATE_ORDER_ADDRESS_FORM",addressType:e}},hideCreateOrderAddressForm:function(){return{type:"HIDE_CREATE_ORDER_ADDRESS_FORM"}},setCreateOrderAddressFormAddress:function(e){return{type:"SET_CREATE_ORDER_ADDRESS_FORM_ADDRESS",address:e}},setCreateOrderAddressFormIsValid:function(e){return{type:"SET_CREATE_ORDER_ADDRESS_FORM_ISVALID",isValid:e}}});var Ke=Object.freeze({__proto__:null,setCountries:function(e){return{type:"SET_COUNTRIES",countries:e}}});var Xe=Object.freeze({__proto__:null,setMarkets:function(e){return{type:"SET_MARKETS",markets:e}},setSelectedMarket:function(e){return{type:"SET_SELECTED_MARKET",market:e}}});var Je=Object.freeze({__proto__:null,clearAddressForm:function(){return{type:"CLEAR_ADDRESS_FORM"}},initializeAddressForm:function(e){return{type:"INITIALIZE_ADDRESS_FORM",payload:e}}});var Ze,$e,et=Object.freeze({__proto__:null,updateSetting:function(e){return{type:"UPDATE_SETTING",payload:e}}}),tt=i.combineReducers({application:function(e,t){switch(void 0===e&&(e=Ue.application),t.type){case"SHOW_NOTIFICATION":return Ge(Ge({},e),{notificationMessage:t.message,notificationMessageIsVisible:!0});case"HIDE_NOTIFICATION":return Ge(Ge({},e),{notificationMessage:"",notificationMessageIsVisible:!1});case"OPEN_CUSTOMER_SELECTION_VIEW":return Ge(Ge({},e),{customerSelectionViewIsVisible:!0});case"CLOSE_CUSTOMER_SELECTION_VIEW":return Ge(Ge({},e),{customerSelectionViewIsVisible:!1});case"OPEN_DELETE_LINE_ITEM_CONFIRMATION_VIEW":return Ge(Ge({},e),{lineItemDeleteConfirmationIsVisible:!0});case"CLOSE_DELETE_LINE_ITEM_CONFIRMATION_VIEW":return Ge(Ge({},e),{lineItemDeleteConfirmationIsVisible:!1});case"OPEN_ORDER_GROUP_VIEW":return Ge(Ge({},e),{orderGroupViewIsVisible:!0});case"CLOSE_ORDER_GROUP_VIEW":return Ge(Ge({},e),{orderGroupViewIsVisible:!1,entrySearchFieldSuggestions:[],entrySelectedSuggestion:null,entrySearchFieldValue:"",entrySuggestionQuantity:Ue.application.entrySuggestionQuantity,isLoadingResource:!1});case"TOGGLE_ORDER_GROUP_FILTER":return Ge(Ge({},e),{orderGroupFilterIsVisible:!e.orderGroupFilterIsVisible});case"SET_CUSTOMER_SEARCH_FIELD_VALUE":return Ge(Ge({},e),{customerSearchFieldValue:t.value});case"SET_CUSTOMER_SEARCH_FIELD_SUGGESTIONS":return Ge(Ge({},e),{customerSearchFieldSuggestions:t.suggestions});case"SET_BASE_API_URL":return Ge(Ge({},e),{baseApiUrl:t.url});case"SET_ENTRY_SEARCH_FIELD_VALUE":return Ge(Ge({},e),{entrySearchFieldValue:t.value,entrySelectedSuggestion:null,entrySuggestionQuantity:Ue.application.entrySuggestionQuantity,entrySuggestionPlacedPrice:Ue.application.entrySuggestionPlacedPrice});case"SET_ENTRY_SEARCH_FIELD_SUGGESTIONS":return Ge(Ge({},e),{entrySearchFieldSuggestions:t.suggestions});case"SELECT_ENTRY_SUGGESTION":return Ge(Ge({},e),{entrySelectedSuggestion:t.suggestion,entrySuggestionQuantity:1,entrySuggestionPlacedPrice:t.suggestion.Price});case"SET_ENTRY_SUGGESTION_QUANTITY":return Ge(Ge({},e),{entrySuggestionQuantity:t.value});case"SET_ENTRY_SUGGESTION_PLACED_PRICE":return Ge(Ge({},e),{entrySuggestionPlacedPrice:t.value});case"SET_IS_LOADING_RESOURCE":return Ge(Ge({},e),{isLoadingResource:t.value});case"SET_ORDER_GROUP_LIST_PAGE_INDEX":return Ge(Ge({},e),{pageIndex:t.value});case"SET_ORDER_GROUP_LIST_ROWS_PER_PAGE":return Ge(Ge({},e),{rowsPerPage:t.value});case"SET_TOTAL_ORDER_GROUPS":return Ge(Ge({},e),{totalOrderGroups:t.value});case"SET_IS_CURRENT_FORM_VALID":return Ge(Ge({},e),{isCurrentFormValid:t.value});case"SET_IS_CURRENT_FORM_DIRTY":return Ge(Ge({},e),{isCurrentFormDirty:t.value});case"SET_CURRENT_DIALOG":return Ge(Ge({},e),{currentDialog:t.value});case"SET_SELECTED_CONTACT_ID":return Ge(Ge({},e),{selectedContactId:t.contactId});case"SET_AUTHORIZED":return Ge(Ge({},e),{isAuthenticated:t.isAuthenticated});case"SET_LOADING_OVERLAY_STATE":return Ge(Ge({},e),{isLoadingOverlayActive:t.isActive});default:return e}},orderGroup:function(e,t){switch(void 0===e&&(e=Ue.orderGroup),t.type){case"SET_SELECTED_FORM_INDEX":return Ge(Ge({},e),{selectedFormIndex:t.index});case"SET_SELECTED_SHIPMENT_INDEX":return Ge(Ge({},e),{selectedShipmentIndex:t.index});case"SET_SELECTED_ENTRY":return Ge(Ge({},e),{selectedEntry:t.entry});case"LIST_ORDER_GROUPS":return Ge(Ge({},e),{listedOrderGroups:t.orderGroups});case"SET_CURRENT_ORDER_GROUP":return Ge(Ge({},e),{currentOrderGroup:Object.assign({},t.orderGroup)});case"UPDATE_CURRENT_ORDER_GROUP":var r=e.listedOrderGroups.map((function(e){return e.OrderGroupId===t.orderGroup.OrderGroupId?Object.assign(e,t.orderGroup):e}));return Ge(Ge({},e),{currentOrderGroup:Object.assign({},t.orderGroup),listedOrderGroups:r});case"SET_CURRENT_LINE_ITEM_ID":return Ge(Ge({},e),{currentLineItemId:t.lineItemId});case"SET_COUPON_TEXTFIELD_VALUE":return Ge(Ge({},e),{couponTextFieldValue:t.value});case"SET_ORDER_STATUSES":return Ge(Ge({},e),{orderStatuses:t.value});case"SET_CURRENCIES":return Ge(Ge({},e),{currencies:t.currencies});case"SET_PAYMENTPLAN_SETTING":return Ge(Ge({},e),{paymentPlanSetting:t.paymentPlanSetting});case"SET_CURRENT_ORDERGROUPID":return Ge(Ge({},e),{currentOrderGroupId:t.payload});default:return e}},contact:function(e,t){switch(void 0===e&&(e=Ue.contact),t.type){case"SHOW_CONTACT_PROFILE":return Ge(Ge({},e),{contactProfileIsVisible:!0,personalInformationEditViewIsVisible:!1,addressBookIsVisible:!1,addressDetailsViewMode:_e.Hide,drawerSelectedMenu:Ve.PersonalInformation});case"SHOW_ADDRESS_BOOK":return Ge(Ge({},e),{contactProfileIsVisible:!1,personalInformationEditViewIsVisible:!1,addressBookIsVisible:!0,addressDetailsViewMode:_e.Hide,drawerSelectedMenu:Ve.AddressBook});case"SET_DRAWER_IS_EXPANDED":return Ge(Ge({},e),{drawerIsExpanded:t.value});case"SHOW_PERSONAL_INFORMATION_EDIT_VIEW":return Ge(Ge({},e),{contactProfileIsVisible:!0,personalInformationEditViewIsVisible:!0,drawerSelectedMenu:Ve.PersonalInformation});case"SET_ADDRESS_DETAILS_VIEW_MODE":return Ge(Ge({},e),{addressDetailsViewMode:t.mode});case"SET_DRAWER_SELECTED_MENU":return Ge(Ge({},e),{drawerSelectedMenu:t.value});case"SET_DRAWER_NEXT_MENU":return Ge(Ge({},e),{drawerNextMenu:t.value});case"SET_CURRENT_CONTACT":return Ge(Ge({},e),{currentContact:Object.assign({},t.contact)});case"SET_CURRENT_ADDRESS":return Ge(Ge({},e),{currentAddress:Object.assign({},t.address)});case"SET_CUSTOMER_GROUPS":return Ge(Ge({},e),{customerGroups:Re(t.customerGroups)});default:return e}},geographics:function(e,t){switch(void 0===e&&(e=Ue.geographics),t.type){case"SET_COUNTRIES":return Ge(Ge({},e),{countries:t.countries});default:return e}},market:function(e,t){switch(void 0===e&&(e=Ue.market),t.type){case"SET_MARKETS":return Ge(Ge({},e),{markets:t.markets});case"SET_SELECTED_MARKET":return Ge(Ge({},e),{selectedMarket:t.market});default:return e}},addressForm:function(e,t){switch(void 0===e&&(e=Ue.addressForm),t.type){case"INITIALIZE_ADDRESS_FORM":return Ge(Ge({},e),{phoneNumber:t.payload.DaytimePhoneNumber});case"CLEAR_ADDRESS_FORM":return Object.assign({},Ue.addressForm);default:return e}},createContactForm:function(e,t){switch(void 0===e&&(e=Ue.createContactForm),t.type){case"SHOW_CREATE_CONTACT_FORM":return Ge(Ge({},e),{isVisible:!0,isValid:!1,contact:Ue.createContactForm.contact});case"HIDE_CREATE_CONTACT_FORM":return Ge(Ge({},e),{isVisible:!1});case"SET_CREATE_CONTACT_FORM_CONTACT":return Ge(Ge({},e),{contact:t.contact});case"SET_CREATE_CONTACT_FORM_ISVALID":return Ge(Ge({},e),{isValid:t.isValid});default:return e}},createOrderAddressForm:function(e,t){switch(void 0===e&&(e=Ue.createOrderAddressForm),t.type){case"SHOW_CREATE_ORDER_ADDRESS_FORM":return Ge(Ge({},e),{isVisible:!0,addressType:t.addressType});case"HIDE_CREATE_ORDER_ADDRESS_FORM":return Ge(Ge({},e),{isVisible:!1});case"SET_CREATE_ORDER_ADDRESS_FORM_ADDRESS":return Ge(Ge({},e),{address:Object.assign({},t.address)});case"SET_CREATE_ORDER_ADDRESS_FORM_ISVALID":return Ge(Ge({},e),{isValid:t.isValid});default:return e}},orderAddressDropdown:function(e,t){switch(void 0===e&&(e=Ue.orderAddressDropdown),t.type){case"SET_ORDER_ADDRESSES":return Ge(Ge({},e),{currentOrderAddresses:Re(t.addresses)});case"SET_SEARCH_FIELD_VALUE":return Ge(Ge({},e),{searchFieldValue:t.searchFieldValue});default:return e}},shipment:function(e,t){switch(void 0===e&&(e=Ue.shipment),t.type){case"SET_SHIPPING_METHODS":return Ge(Ge({},e),{shippingMethods:Re(t.shippingMethods)});case"SET_SHIPMENT_STATUSES":return Ge(Ge({},e),{statuses:Re(t.statuses)});default:return e}},payment:function(e,t){switch(void 0===e&&(e=Ue.payment),t.type){case"SET_PAYMENT_METHODS":return Ge(Ge({},e),{paymentMethods:Re(t.paymentMethods)});case"SHOW_ACCEPT_PAYMENT_FORM":return Ge(Ge({},e),{isAcceptPaymentFormVisible:!0});case"HIDE_ACCEPT_PAYMENT_FORM":return Ge(Ge({},Ue.payment),{paymentMethods:e.paymentMethods,isAcceptPaymentFormVisible:!1});case"SET_PAYMENT_METHOD_ID":return Ge(Ge({},e),{paymentMethodId:t.id});case"SET_PAYMENT":return Ge(Ge({},e),{payment:t.payment?Object.assign({},t.payment):null});case"SET_BILLING_ADDRESS":return Ge(Ge({},e),{billingAddress:t.billingAddress?Object.assign({},t.billingAddress):null});case"SET_BILLING_ADDRESS_DROPDOWN_IS_EXPANDED":return Ge(Ge({},e),{addressIsExpanded:t.value});default:return e}},setting:function(e,t){switch(void 0===e&&(e=Ue.setting),t.type){case"UPDATE_SETTING":return Ge(Ge({},e),t.payload);default:return e}}}),rt={ApplicationActions:Be,OrderGroupActions:He,ContactActions:Ye,AddressFormActions:Je,MarketActions:Xe,GeographicsActions:Ke,PaymentActions:je,ShipmentActions:We,OrderAddressDropdownActions:qe,CreateContactFormActions:ze,CreateOrderAddressFormAction:Qe,AppSettingActions:et},nt=i.createStore(tt,Ue,(process.env.NODE_ENV,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),st=s.withStyles((function(e){e.palette;return s.createStyles({root:{position:"fixed",bottom:"10px",right:"10px",width:"40px",height:"40px"},feedbackIcon:{color:"white",verticalAlign:"middle",width:"20px"}})}))((function(e){return r.createElement("a",{title:"Feedback to Epi",href:"mailto:feedback@episerver.com?subject=Feedback for Order Management"},r.createElement(l,{color:"primary",className:e.classes.root},r.createElement(u,{className:e.classes.feedbackIcon,color:"inherit"})))})),at=n.connect((function(e){return{isAuthenticated:e.application.isAuthenticated}}))((function(e){return e.isAuthenticated?t.createElement(t.Fragment,null):t.createElement(h,{open:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0},t.createElement(g,{id:"alert-dialog-description"},t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,xs:12,sm:3},t.createElement(p,{style:{fontSize:100}})),t.createElement(d,{item:!0,xs:12,sm:9},t.createElement(y,{variant:"h6",gutterBottom:!0},"Your session has expired. Please relogin.")))),t.createElement(m,null,t.createElement(f.TextButton,{onClick:function(){window.location.reload()}},"Log me in")))})),it=o.withStyles((function(e){var t=e.palette,r=e.spacing;return s.createStyles({close:{width:4*r.unit,height:4*r.unit},action:{color:t.primary.light+" !important"}})}))(n.connect((function(e,t){return{notificationMessage:e.application.notificationMessage,notificationMessageIsVisible:e.application.notificationMessageIsVisible,classes:t.classes}}))((function(e){var r="string"==typeof e.notificationMessage?t.createElement("span",null,e.notificationMessage):t.createElement("ul",null,Object.keys(e.notificationMessage).map((function(r,n){return t.createElement("li",{key:n},e.notificationMessage[r])}))),n=function(){e.dispatch(rt.ApplicationActions.hideNotification())};return t.createElement(E,{anchorOrigin:{vertical:"top",horizontal:"left"},open:e.notificationMessageIsVisible,autoHideDuration:6e3,onClose:n,message:t.createElement("div",{id:"message-id"},r),action:[t.createElement(f.TextButton,{key:"close",onClick:n,className:e.classes.action},"Close")]})}))),ot=function(){return s.createStyles({overlay:{position:"fixed",height:"100%",width:"100%",top:"0px",left:"0px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.2em",color:"#FFF",background:"rgba(0, 0, 0, 0.7)",zIndex:2147483647,transition:"opacity 500ms ease-in",opacity:1}})},ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.render=function(){return this.props.isActive&&r.createElement("div",{className:this.props.classes.overlay},r.createElement(v,{size:60}))},t}(r.Component),lt=o.withStyles(ot)(ct),ut=o.withStyles(ot)(n.connect((function(e,t){return{isActive:e.application.isLoadingOverlayActive,classes:t.classes}}))(lt)),dt=function(){this.initialize=function(e){C.interceptors.response.use((function(e){return e}),(function(t){return t.message=t.response.data.MessageDetail||t.response.data||t.message,401===t.response.status&&(t.message="Unauthorized",e.dispatch(rt.ApplicationActions.setAuthorized(!1))),Promise.reject(t)}))}},pt="/",ht="/customers",mt="/customers/:id",gt="/customers/:id/info",ft="/customers/:id/edit",yt="/customers/:id/addresses",Et="/customers/:id/orders",vt="/orders",Ct="/carts",St="/paymentplans",It="/orders/:id",bt="/carts/:id",At="/paymentplans/:id",Ot="/orders/:id/returns/:formId",Tt="/createorder",wt="/createPaymentPlan",Gt=(null===(Ze=document.querySelector("#root"))||void 0===Ze?void 0:Ze.getAttribute("data-epi-apiurl"))||"/api",Dt=function(){this.getOrderGroupRouting=function(e){switch(e){case"Order":return vt;case"PaymentPlan":return St;case"Cart":return Ct;default:return""}},this.baseApiUrl=Gt},Pt=function(e){return Ge(Ge({},e),{Created:new Date(e.Created),Modified:new Date(e.Modified)})},Nt=function(e){function t(){var t=e.call(this)||this;return t.getOrders=function(e){return Pe(t,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e.orderGroupType),r={startingIndex:e.startingIndex,numberOfRecords:e.numberOfRecords},e.searchText.length>0&&(r.searchValue=encodeURIComponent(e.searchText),r.searchField=e.searchType),[4,C.get(t,{params:r})];case 1:return[2,{TotalOrderGroups:(n=s.sent()).data.TotalOrderGroups,Results:n.data.Results.map((function(e,t){return Pt(e)}))}]}}))}))},t.getReturns=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns",[4,C.get(t)];case 1:return[2,{Totals:(r=n.sent()).data.Totals,Results:r.data.Results.map((function(e,t){return Pt(e)}))}]}}))}))},t.getReturn=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r,[4,C.get(t)];case 1:return[2,n.sent().data]}}))}))},t.initPurchaseOrder=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n,s;return Ne(this,(function(a){switch(a.label){case 0:return t=""+this.baseApiUrl+vt+"/initorder/"+e+"/"+r,[4,C.post(t)];case 1:return n=a.sent(),(s=Pt(n.data)).IsDraft=!0,[2,s]}}))}))},t.initExchangeOrder=function(e){return Pe(t,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+vt+"/initexchange/"+e,[4,C.post(t)];case 1:return r=s.sent(),(n=Pt(r.data)).IsDraft=!0,[2,n]}}))}))},t.createPurchaseOrder=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt,[4,C.post(t,e)];case 1:return r=n.sent(),[2,Pt(r.data)]}}))}))},t.calculateOrder=function(e){return Pe(t,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+vt+"/calculate",[4,C.post(t,e)];case 1:return r=s.sent(),(n=Pt(r.data)).IsDraft=!0,[2,n]}}))}))},t.createReturn=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns",[4,C.post(t,r)];case 1:return[2,n.sent().data]}}))}))},t.cancelReturn=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r+"/cancel",[4,C.post(t)];case 1:return[2,n.sent().data]}}))}))},t.acknowledgeReceiptItems=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r+"/acknowledgeReceiptItems",[4,C.post(t)];case 1:return[2,n.sent()]}}))}))},t.getSingleOrderGroup=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r,[4,C.get(t)];case 1:return n=s.sent(),[2,Pt(n.data)]}}))}))},t.addCoupon=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/coupons",[4,C.post(t,s)];case 1:return[2,a.sent()]}}))}))},t.removeCoupon=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/coupons",[4,C.delete(t,{params:{couponCode:s.Code}})];case 1:return[2,a.sent()]}}))}))},t.deleteLineItem=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+this.getOrderGroupRouting(e)+"/"+r+"/lineitems/"+n,[4,C.delete(t)];case 1:return[2,s.sent()]}}))}))},t.deleteReturnLineItem=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r+"/lineitems/"+n,[4,C.delete(t)];case 1:return[2,s.sent()]}}))}))},t.updateLineItem=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e.OrderGroupType)+"/"+e.OrderGroupId+"/lineitems/"+e.LineItemId,[4,C.patch(t,e)];case 1:return[2,r.sent()]}}))}))},t.updateReturnLineItem=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(i){switch(i.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r+"/lineitems/"+n,[4,C.patch(t,{returnQuantity:s,returnReason:a})];case 1:return[2,i.sent()]}}))}))},t.updateReturnForm=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r,[4,C.patch(t,n)];case 1:return[2,s.sent()]}}))}))},t.updateExchangeOrderId=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/returns/"+r+"/"+n,[4,C.patch(t)];case 1:return[2,s.sent()]}}))}))},t.addLineItemToOrderGroup=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(i){switch(i.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/shipments/"+s+"/lineitems",[4,C.post(t,a)];case 1:return[2,i.sent()]}}))}))},t.initLineItem=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=""+this.baseApiUrl+vt+"/inititem?currencyCode="+e+"&marketId="+r+"&customerId="+n,[4,C.post(t,s)];case 1:return[4,a.sent().data];case 2:return[2,a.sent()]}}))}))},t.getOrderStatuses=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/orderstatuses",[4,C.get(e)];case 1:return[2,t.sent().data]}}))}))},t.updateOrderStatus=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+vt+"/"+e+"/status/"+r,[4,C.put(t)];case 1:return[2,n.sent()]}}))}))},t.getReturnReasons=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/returnorders/returnreasons/",[4,C.get(e)];case 1:return[2,t.sent().data]}}))}))},t.addShippingAddress=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(i){switch(i.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/shipments/"+s+"/shippingAddress",[4,C.post(t,a)];case 1:return[2,i.sent()]}}))}))},t.updateShippingAddress=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(i){switch(i.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/shipments/"+s+"/shippingaddress",[4,C.put(t,a)];case 1:return[2,i.sent()]}}))}))},t.updateShippingMethod=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t,i;return Ne(this,(function(o){switch(o.label){case 0:return t={shippingMethodId:a},i=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/shipments/"+s+"/shippingmethod",[4,C.patch(i,t)];case 1:return[2,o.sent()]}}))}))},t.getPaymentModel=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+r+"/forms/"+n+"/payments/getmodel/"+s,[4,C.get(t)];case 1:return[2,a.sent().data]}}))}))},t.addPayment=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(e)+"/"+n+"/forms/"+s+"/payments",[4,C.post(t,r)];case 1:return[2,a.sent()]}}))}))},t.createRefund=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/orders/"+e+"/forms/"+r+"/payments/refund",[4,C.post(t,n)];case 1:return[2,s.sent()]}}))}))},t.updateCurrencyForOrder=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t,s;return Ne(this,(function(a){switch(a.label){case 0:return t=this.getOrderGroupRouting(e),s=this.baseApiUrl+"/"+t+"/"+r+"/currency/"+n,[4,C.patch(s)];case 1:return[2,a.sent()]}}))}))},t.getPlacedPrice=function(e,r,n,s,a){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(i){switch(i.label){case 0:return t=this.baseApiUrl+"/entries/placedprice",[4,C.post(t,{entryCode:e,quantity:r,marketId:n,currency:s,customerId:a})];case 1:return[2,i.sent()]}}))}))},t.getRefundInfo=function(e,r){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return[4,C.get(this.baseApiUrl+"/orders/"+e+"/returns/"+r+"/getRefundInfo")];case 1:return[2,t.sent()]}}))}))},t.completeReturn=function(e,r){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return[4,C.post(this.baseApiUrl+"/orders/"+e+"/returns/"+r+"/completeReturn")];case 1:return[2,t.sent()]}}))}))},t.initPaymentPlan=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n,s;return Ne(this,(function(a){switch(a.label){case 0:return t=""+this.baseApiUrl+St+"/initPaymentPlan/"+e+"/"+r,[4,C.post(t)];case 1:return n=a.sent(),(s=Pt(n.data)).IsDraft=!0,[2,s]}}))}))},t}return Te(t,e),t}(Dt),Rt=function(e){function t(){var t=e.call(this)||this;return t.getCustomerCart=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n,s;return Ne(this,(function(a){switch(a.label){case 0:return t=""+this.baseApiUrl+ht+"/"+e+Ct+"/Default/"+r,[4,C.get(t)];case 1:return n=a.sent(),s=Pt(n.data),[2,204===n.status?null:s]}}))}))},t.createOrRefreshCart=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t,s,a;return Ne(this,(function(i){switch(i.label){case 0:return t=this.baseApiUrl+"/carts",[4,C.put(t,null,{params:{marketId:r,contactId:e,cartName:n}})];case 1:return s=i.sent(),a=Pt(s.data),[2,201===s.status?a:null]}}))}))},t.deleteCart=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/carts/"+e,[4,C.delete(t)];case 1:return[2,r.sent()]}}))}))},t.convertToPurchaseOrder=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+Ct+"/"+e+"/ConvertToPurchaseOrder",[4,C.post(t)];case 1:return r=n.sent(),[2,Pt(r.data)]}}))}))},t.convertToPaymentPlan=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+Ct+"/"+e+"/ConvertToPaymentPlan",[4,C.post(t)];case 1:return r=n.sent(),[2,Pt(r.data)]}}))}))},t.updateMarketForCart=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=""+this.baseApiUrl+Ct+"/"+e+"/market/"+r,[4,C.patch(t)];case 1:return[2,n.sent()]}}))}))},t}return Te(t,e),t}(Dt),xt=function(e){function t(){var t=e.call(this)||this;return t.getPurchaseOrders=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t,s;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/paymentplans/"+e+"/purchaseOrders",[4,C.get(t,{params:{orderGroupId:e,startingIndex:r,numberOfRecords:n}})];case 1:return[2,{TotalOrderGroups:(s=a.sent()).data.TotalOrderGroups,Results:s.data.Results.map((function(e,t){return Pt(e)}))}]}}))}))},t.convertToPurchaseOrder=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=this.baseApiUrl+"/paymentplans/"+e+"/convertToPurchaseOrder",[4,C.post(t)];case 1:return r=n.sent(),[2,Pt(r.data)]}}))}))},t.cancelPaymentPlan=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/paymentplans/"+e+"/cancel",[4,C.post(t)];case 1:return[2,r.sent()]}}))}))},t.createPaymentPlan=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/paymentplans/"+e,[4,C.post(t,r)];case 1:return n=s.sent(),[2,Pt(n.data)]}}))}))},t.updatePaymentPlanSetting=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/paymentplans/"+e,[4,C.put(t,r)];case 1:return n=s.sent(),[2,Pt(n.data)]}}))}))},t}return Te(t,e),t}(Dt),Lt=function(e){this.firstName=e.FirstName||"",this.middleName=e.MiddleName||"",this.lastName=e.LastName||"",this.fullName=e.FullName||"",this.email=e.Email||"",this.customerGroup=e.CustomerGroup||""},Mt=function(e){function t(t){return e.call(this,t)||this}return Te(t,e),t}(Lt),Ft=function(e){function t(t){var r=e.call(this,t)||this;return r.id=t.Id,r}return Te(t,e),t}(Lt);!function(e){e[e.Name=128]="Name",e[e.FirstName=64]="FirstName",e[e.LastName=64]="LastName",e[e.Organization=64]="Organization",e[e.Line1=80]="Line1",e[e.Line2=80]="Line2",e[e.City=64]="City",e[e.State=64]="State",e[e.CountryCode=50]="CountryCode",e[e.CountryName=50]="CountryName",e[e.PostalCode=20]="PostalCode",e[e.RegionCode=50]="RegionCode",e[e.RegionName=64]="RegionName",e[e.DaytimePhoneNumber=32]="DaytimePhoneNumber",e[e.EveningPhoneNumber=32]="EveningPhoneNumber",e[e.Email=256]="Email"}($e||($e={}));var kt=$e,_t=function(e){var t=e.value.toString();return r.createElement(O,{key:e.refreshCounter||0,label:e.label,value:t,disabled:e.disabled,required:e.required,enhanced:!0,outlined:!0,onEnhancedChange:function(t,r){if(e.onChange){var n=r.getAttribute("data-value");"number"==typeof e.value?e.onChange(Number(n)):e.onChange(n)}},className:"epi-exposed-dropdown"+(e.fullWidth?" fullwidth":"")+(e.dense?" dense":"")},e.options.map((function(e){return r.createElement(A.Option,{key:e.value,value:e.value},e.label)})))},Vt=function(){function e(){}return e.Required="required",e.IsEmpty="isEmpty",e.IsNumber="isNumber",e.IsFloat="isFloat",e.IsPositive="isPositive",e.IsString="isString",e.IsEmail="isEmail",e.MaxStringLength="maxStringLength",e.MinStringLength="minStringLength",e.NotAllowPotentialXSSCharacters="notAllowPotentialXSSCharacters",e.IsURL="isURL",e.IsDate="isDate",e.IsDateTime="isDateTime",e.IsFloatRegex="matchRegexp:^[+-]?([0-9]+[.])?[0-9]+$",e.IsMoney="isMoney",e.IsInteger="isInteger",e.IsDecimal="isDecimal",e.isValidInteger=function(e){return!(isNaN(e)||e>2147483647||e<-2147483648)},e.isValidMoney=function(e){var t=new w.BigNumber(e);return""===e||!(t.isNaN()||t.decimalPlaces()>4||t.isGreaterThan(new w.BigNumber("922337203685477.5807"))||t.isLessThan(0))},e.isValidDecimal=function(e){var t=new w.BigNumber(e);return""===e||!(t.isNaN()||t.decimalPlaces()>0||t.gt(new w.BigNumber("9".repeat(18)))||t.lt(new w.BigNumber("-"+"9".repeat(18))))},e.isValidUrl=function(e){return!e||/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)},e.setMaxStringLength=function(e){return"maxStringLength:"+e.toString()},e.setMinStringLength=function(e){return"minStringLength:"+e.toString()},e.getValidationMessage=function(t,r){switch(void 0===r&&(r=null),t){case e.Required:return"This field is required";case e.IsEmail:return"E-mail is not valid";case e.NotAllowPotentialXSSCharacters:return"Field must not contain any of the \n                    following characters: '<\">*%&:?";case e.MaxStringLength:return"Field exceeds maximum of "+r.toString()+" characters allowed";case e.MinStringLength:return"Field must be at least "+r.toString()+" character(s)";case e.IsNumber:return"Number is not valid";case e.IsURL:return"URL is not valid";case e.IsDate:return"Date is not valid";case e.IsDateTime:return"DateTime is not valid";case e.IsFloatRegex:return"Number is not valid";case e.IsMoney:return"Money is not valid";case e.IsInteger:return"Integer is not valid";case e.IsDecimal:return"Decimal is not valid";default:return"Not yet defined validation message"}},e.initCustomValidator=function(){T.ValidatorForm.addValidationRule(e.NotAllowPotentialXSSCharacters,(function(e){return!new RegExp(/[\<\>\*\%\&\:\\\?\'\"]/).test(e)})),T.ValidatorForm.addValidationRule(e.Required,(function(e){return null!=e&&void 0!==e&&(e instanceof Array?e.length>0:"string"!=typeof e||""!==e.trim())}))},e}();Vt.initCustomValidator();var Ut=b.object({Name:b.string().trim().required(Vt.getValidationMessage(Vt.Required)).max(kt.Name,Vt.getValidationMessage(Vt.MaxStringLength,kt.Name)).test("NotAllowPotentialXSSCharacters","Field must not contain any of the following characters: ''<\">*%&:?'",(function(e){return!new RegExp(/[\<\>\*\%\&\:\\\?\'\"]/).test(e)})),FirstName:b.string().trim().max(kt.FirstName,Vt.getValidationMessage(Vt.MaxStringLength,kt.FirstName)).nullable(),LastName:b.string().trim().required(Vt.getValidationMessage(Vt.Required)).max(kt.LastName,Vt.getValidationMessage(Vt.MaxStringLength,kt.LastName)),Line1:b.string().trim().required(Vt.getValidationMessage(Vt.Required)).max(kt.Line1,Vt.getValidationMessage(Vt.MaxStringLength,kt.Line1)),Line2:b.string().trim().max(kt.Line2,Vt.getValidationMessage(Vt.MaxStringLength,kt.Line2)).nullable(),City:b.string().trim().required(Vt.getValidationMessage(Vt.Required)).max(kt.City,Vt.getValidationMessage(Vt.MaxStringLength,kt.City)),PostalCode:b.string().trim().max(kt.PostalCode,Vt.getValidationMessage(Vt.MaxStringLength,kt.PostalCode)).nullable(),CountryCode:b.string().trim().required(Vt.getValidationMessage(Vt.Required)),RegionCode:b.string().trim().max(kt.RegionCode,Vt.getValidationMessage(Vt.MaxStringLength,kt.RegionCode)).nullable(),DaytimePhoneNumber:b.string().trim().max(kt.DaytimePhoneNumber,Vt.getValidationMessage(Vt.MaxStringLength,kt.DaytimePhoneNumber)).nullable(),Email:b.string().trim().max(kt.Email,Vt.getValidationMessage(Vt.MaxStringLength,kt.Email)).email(Vt.getValidationMessage(Vt.IsEmail)).nullable()}),Bt=function(e){function r(t){var r=e.call(this,t)||this;return r.state={errors:{},countryOptions:[]},r.setCurrentAddress=function(e){r.props.dispatch(rt.ContactActions.setCurrentAddress(e)),r.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!0))},r.handleCountryChanged=function(e){var t=Ge({},r.props.address),n=r.props.availableCountries.find((function(t){return t.Code===e}));if(t.DaytimePhoneNumber=n.CallingCode+" ",t.CountryCode=e,t.CountryName=n.Name,r.setCurrentAddress(t),"USA"===e&&t.PostalCode){var s=I.lookup(t.PostalCode);s&&(t.RegionCode=S.getStateNameByStateCode(s.state))}r.setCurrentAddress(t)},r.handleFormChanges=function(e){return Pe(r,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){return t=e.target.name,r=Object.assign({},this.props.address),n="checkbox"===e.target.type?e.target.checked:e.target.value,r[t]=n,this.setCurrentAddress(r),[2]}))}))},r.validateForm=function(){try{return Ut.validateSync(r.props.address,{abortEarly:!1})}catch(t){var e={};return t.inner.map((function(t){e[t.path]=t.message})),r.setState({errors:e}),null}},r.state.countryOptions=r.props.availableCountries.map((function(e){return{label:e.Name,value:e.Code}})),r.props.mode===_e.Add&&(r.props.address.FirstName=r.props.currentAddress.FirstName,r.props.address.LastName=r.props.currentAddress.LastName),r.props.validator.validate=r.validateForm,r}return Te(r,e),r.prototype.render=function(){var e=this;return t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,sm:12},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"Name",label:"Address Name",value:this.props.address.Name||"",onChange:this.handleFormChanges,required:!0,error:!!this.state.errors.Name,helperText:this.state.errors.Name})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"FirstName",label:"First Name",value:this.props.address.FirstName||"",onChange:this.handleFormChanges,error:!!this.state.errors.FirstName,helperText:this.state.errors.FirstName})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"LastName",label:"Last Name",value:this.props.address.LastName||"",onChange:this.handleFormChanges,required:!0,error:!!this.state.errors.LastName,helperText:this.state.errors.LastName})),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"Line1",label:"Address Line 1",value:this.props.address.Line1||"",onChange:this.handleFormChanges,required:!0,error:!!this.state.errors.Line1,helperText:this.state.errors.Line1})),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"Line2",label:"Address Line 2",value:this.props.address.Line2||"",onChange:this.handleFormChanges,error:!!this.state.errors.Line2,helperText:this.state.errors.Line2})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"City",label:"City",value:this.props.address.City||"",onChange:this.handleFormChanges,required:!0,error:!!this.state.errors.City,helperText:this.state.errors.City})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"PostalCode",label:"ZIP / PostalCode",value:this.props.address.PostalCode||"",onChange:this.handleFormChanges,error:!!this.state.errors.PostalCode,helperText:this.state.errors.PostalCode})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(_t,{fullWidth:!0,required:!0,label:"Country",value:this.props.address.CountryCode||"",options:this.state.countryOptions,onChange:function(t){return e.handleCountryChanged(t)}}),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.CountryCode)),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"RegionCode",label:"State / Province / Region",value:this.props.address.RegionCode||"",onChange:this.handleFormChanges,error:!!this.state.errors.RegionCode,helperText:this.state.errors.RegionCode})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"DaytimePhoneNumber",label:"Phone Number",value:this.props.address.DaytimePhoneNumber||"",onChange:this.handleFormChanges,error:!!this.state.errors.DaytimePhoneNumber,helperText:this.state.errors.DaytimePhoneNumber})),t.createElement(s.Grid,{item:!0,sm:12,md:6},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",name:"Email",label:"E-mail",value:this.props.address.Email||"",onChange:this.handleFormChanges,error:!!this.state.errors.Email,helperText:this.state.errors.Email})))},r}(t.Component),Ht=function(e){function t(){var t=e.call(this)||this;return t.get=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/customers/"+e,[4,C.get(t)];case 1:return[2,r.sent().data]}}))}))},t.list=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=this.baseApiUrl+"/customers",r={filter:e},[4,C.get(t,{params:r})];case 1:return[2,n.sent().data]}}))}))},t.getCustomerGroups=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/customergroups",[4,C.get(e)];case 1:return[2,t.sent().data]}}))}))},t.updatePersonalInformation=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=this.baseApiUrl+"/customers/"+e.Id,r=new Ft(e),[4,C.put(t,r)];case 1:return[2,n.sent().data]}}))}))},t.createContact=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return t=this.baseApiUrl+"/customers",r=new Mt(e),[4,C.post(t,r)];case 1:return[2,n.sent().data]}}))}))},t.addContactAddress=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=[Ge({},r)],[4,Ut.validate(r)];case 1:return r=Ge.apply(void 0,t.concat([s.sent()])),[3,3];case 2:throw s.sent(),new Error("The address is invalid!");case 3:return n=this.baseApiUrl+"/customers/"+e+"/addresses",[4,C.post(n,r)];case 4:return[2,s.sent()]}}))}))},t.updateContactAddress=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t,s;return Ne(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t=[Ge({},n)],[4,Ut.validate(n)];case 1:return n=Ge.apply(void 0,t.concat([a.sent()])),[3,3];case 2:throw a.sent(),new Error("The address is invalid!");case 3:return s=this.baseApiUrl+"/customers/"+e+"/addresses/"+encodeURIComponent(r),[4,C.put(s,n)];case 4:return[2,a.sent()]}}))}))},t.deleteContactAddress=function(e,r){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(n){switch(n.label){case 0:return t=this.baseApiUrl+"/customers/"+e+"/addresses/"+encodeURIComponent(r),[4,C.delete(t)];case 1:return[2,n.sent()]}}))}))},t}return Te(t,e),t}(Dt),qt=function(e){function t(){var t=e.call(this)||this;return t.getMarkets=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/markets",[4,C.get(e)];case 1:return[2,t.sent().data]}}))}))},t}return Te(t,e),t}(Dt),Wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateOrderGroupMetaFields=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){switch(s.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(r)+"/"+e+"/metaFields",[4,C.patch(t,n)];case 1:return[2,s.sent().data]}}))}))},t.updateOrderShipmentMetaFields=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(r)+"/"+e+"/shipments/"+n+"/metaFields",[4,C.patch(t,s)];case 1:return[2,a.sent().data]}}))}))},t.updateOrderLineItemMetaFields=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/"+this.getOrderGroupRouting(r)+"/"+e+"/lineitems/"+n+"/metaFields",[4,C.patch(t,s)];case 1:return[2,a.sent().data]}}))}))},t}return Te(t,e),t}(Dt),jt=function(e){function t(){var t=e.call(this)||this;return t.getPaymentMethods=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/paymentmethods/"+(e||""),[4,C.get(t)];case 1:return[2,r.sent().data]}}))}))},t}return Te(t,e),t}(Dt),Yt=function(e){function t(){var t=e.call(this)||this;return t.getShippingMethods=function(e,r){return Pe(t,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return t={marketId:e,countryCode:r},n=this.baseApiUrl+"/shippingMethods",[4,C.get(n,{params:t})];case 1:return[2,s.sent().data]}}))}))},t.getShipmentStatuses=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/shipmentstatuses/",[4,C.get(e)];case 1:return[2,t.sent().data]}}))}))},t.updateShipmentStatus=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){return t=""+this.baseApiUrl+vt+"/"+e+"/forms/"+r+"/shipments/"+n+"/shipmentstatus/"+s,[2,C.patch(t)]}))}))},t.addToPickList=function(e,r,n){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(s){return t=""+this.baseApiUrl+vt+"/"+e+"/forms/"+r+"/shipments/"+n+"/addToPickList",[2,C.post(t)]}))}))},t.updateShipmentTrackingNumber=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){return t=""+this.baseApiUrl+vt+"/"+e+"/forms/"+r+"/shipments/"+n+"/trackingNumber",[2,C.patch(t,null,{params:{trackingNumber:s}})]}))}))},t}return Te(t,e),t}(Dt),zt=function(e){function t(){var t=e.call(this)||this;return t.search=function(e){return Pe(t,void 0,void 0,(function(){var t,r,n,s,a,i;return Ne(this,(function(o){switch(o.label){case 0:return t=nt.getState().orderGroup.currentOrderGroup,r=t.MarketId,n=t.Customer.Id,s=t.Total.Currency,a=this.baseApiUrl+"/entries",i={keyword:e,marketId:r,customerId:n,currencyCode:s},[4,C.get(a,{params:i})];case 1:return[2,o.sent().data]}}))}))},t.getEntryDetail=function(e){return Pe(t,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return t=nt.getState().orderGroup.currentOrderGroup,r=this.baseApiUrl+"/entries/"+e,n={marketId:t.MarketId,currencyCode:t.Total.Currency,customerId:t.Customer.Id},[4,C.get(r,{params:n})];case 1:return[2,s.sent().data]}}))}))},t}return Te(t,e),t}(Dt),Qt=function(e){function t(){var t=e.call(this)||this;return t.getCurrencies=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return t=this.baseApiUrl+"/currencies/"+e,[4,C.get(t)];case 1:return[2,r.sent().data]}}))}))},t}return Te(t,e),t}(Dt),Kt=[];Object.keys(G.countries).forEach((function(e){var t=G.countries[e.toString()];Kt.push({countryCode:e,name:t.name,phoneCode:t.phone})}));var Xt=function(e){function t(){var t=e.call(this)||this;return t.getCountries=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=this.baseApiUrl+"/countries",[4,C.get(e)];case 1:return[2,t.sent().data.map((function(e){return function(e){var t=Kt.find((function(t){return t.name===e.Name}));return t?Ge(Ge({},e),{CallingCode:t.phoneCode?"+"+t.phoneCode:"",FlagSvgImage:require("flag-icon-css/flags/4x3/"+t.countryCode.toLowerCase()+".svg")}):e}(e)}))]}}))}))},t}return Te(t,e),t}(Dt),Jt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getOrdersByCustomerId=function(e,r,n,s){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(a){switch(a.label){case 0:return t=this.baseApiUrl+"/orderhistory?customerId="+e+"&startingIndex="+r+"&numberOfRecords="+n+"&returnTotalCount="+s,[4,C.get(t)];case 1:return[2,a.sent().data]}}))}))},t}return Te(t,e),t}(Dt),Zt={Cart:new Rt,OrderGroup:new Nt,PaymentPlan:new xt,Contact:new Ht,MetaField:new Wt,PaymentMethod:new jt,Shipment:new Yt,Catalog:new zt,Market:new qt,Currency:new Qt,Geographics:new Xt,OrderHistory:new Jt},$t=function(e){var r=e.classes;return e.text?t.createElement("div",{className:r.optionalTypography},e.icon,t.createElement(x,{gutterBottom:!0},e.text)):null},er={marginDefault:20,paddingDefault:20,addressBoxMinWidth:325,addressBoxMinHeight:256},tr={light:"#f8f8f8",hoveredList:"#ededed"},rr={paddingTop:4,paddingBottom:4},nr=o.withStyles((function(e){e.palette;var t=e.spacing;e.breakpoints;return s.createStyles({root:{minWidth:er.addressBoxMinWidth,height:"100%"},header:{borderBottom:"solid 1px",borderBottomColor:tr.hoveredList},content:{padding:er.paddingDefault},address:{marginTop:t.unit,marginBottom:2*t.unit},optionalTypography:{display:"flex"},optionalTypographyIcon:{marginRight:t.unit}})}))(n.connect((function(e,t){return{address:t.address,classes:t.classes,isReadonly:t.isReadonly}}))((function(e){var r,n=e.classes,s=(r=e.address).IsPreferredBillingAddress&&r.IsPreferredShippingAddress?"Preferred Shipping & Billing Address":r.IsPreferredShippingAddress?"Preferred Shipping Address":r.IsPreferredBillingAddress?"Preferred Billing Address":void 0,a="";e.address.City&&(a+=e.address.City),e.address.RegionCode&&(a+=", "+e.address.RegionCode),e.address.PostalCode&&(a+=", "+e.address.PostalCode);return t.createElement(P,{className:n.root},t.createElement(N,{className:n.header,title:s,titleTypographyProps:{variant:"body2"},action:!e.isReadonly&&t.createElement("div",null,t.createElement(f.IconButton,{"area-label":"Edit",onClick:function(){return function(t){e.dispatch(rt.ContactActions.setCurrentAddress(t)),e.dispatch(rt.AddressFormActions.initializeAddressForm(t)),e.dispatch(rt.ContactActions.setAddressDetailsViewMode(_e.Edit))}(e.address)}},t.createElement(f.EditIcon,null)),t.createElement(f.IconButton,{"aria-label":"Delete",onClick:function(){return function(t){e.dispatch(rt.ContactActions.setCurrentAddress(t)),e.dispatch(rt.ApplicationActions.setCurrentDialog(Le.DeleteAddress))}(e.address)}},t.createElement(f.DeleteIcon,null)))}),t.createElement(R,{className:n.content},t.createElement(x,{variant:"body2",gutterBottom:!0},e.address.Name),t.createElement(d,{container:!0,spacing:8},t.createElement(d,{item:!0},t.createElement($t,{text:e.address.FirstName,classes:n})),t.createElement(d,{item:!0},t.createElement($t,{text:e.address.LastName,classes:n}))),t.createElement("div",{className:n.address},t.createElement(x,{gutterBottom:!0},e.address.Line1),t.createElement(x,{gutterBottom:!0},e.address.Line2),t.createElement($t,{text:a,classes:n}),t.createElement(x,{gutterBottom:!0},e.address.CountryName)),t.createElement($t,{text:e.address.DaytimePhoneNumber,classes:n,icon:t.createElement(M,{fontSize:"small",className:n.optionalTypographyIcon})}),t.createElement($t,{text:e.address.Email,classes:n,icon:t.createElement(L,{fontSize:"small",className:n.optionalTypographyIcon})})))}))),sr=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{height:"100%",minWidth:er.addressBoxMinWidth},actionArea:{height:"100%"}})}))(n.connect((function(e,t){return{classes:t.classes,customer:e.orderGroup.currentOrderGroup?e.orderGroup.currentOrderGroup.Customer:void 0}}))((function(e){var r=e.classes;return t.createElement(P,{className:r.root},t.createElement(k,{className:r.actionArea,onClick:function(){var t,r={};e.customer&&(r.FirstName=e.customer.FirstName,r.LastName=e.customer.LastName),t=r,e.dispatch(rt.ContactActions.setCurrentAddress(t)),e.dispatch(rt.ContactActions.setAddressDetailsViewMode(_e.Add))}},t.createElement(d,{container:!0,direction:"column",alignItems:"center"},t.createElement(d,{item:!0},t.createElement(F,{fontSize:"large"})),t.createElement(d,{item:!0},t.createElement(x,{variant:"button"},"New Address")))))}))),ar=function(e){return t.createElement(s.Dialog,{open:e.open,onClose:e.onClose,style:{zIndex:1e4,margin:"0 auto"},maxWidth:e.large?"md":"sm",fullWidth:!0},t.createElement(s.DialogTitle,null,e.title),t.createElement(s.DialogContent,{style:{paddingTop:"5px"}},e.children),t.createElement(s.DialogActions,null,t.createElement(f.TextButton,{onClick:e.onClose},e.closeLabel),e.onOK&&t.createElement(f.TextButton,{onClick:e.onOK},e.okLabel)))};ar.defaultProps={okLabel:"OK",closeLabel:"Close"};var ir=function(e){return t.createElement(ar,{open:!0,title:e.title,onClose:e.onClose,closeLabel:e.closeButtonLabel,okLabel:e.confirmButtonLabel,onOK:e.onConfirm},e.children)},or=function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{},item:{minHeight:256}})},cr=o.withStyles(or)((function(e){if(!e.address)return t.createElement(t.Fragment,null);var r=e.address.DisplayName;return r||(r=e.address?[e.address.Line1,e.address.Line2,e.address.City,e.address.RegionCode,e.address.PostalCode,e.address.CountryName,e.address.CountryCode].filter((function(e){return e})).join(", "):""),t.createElement("div",null,t.createElement(x,{variant:"body2"},r))})),lr=n.connect((function(e,t){return{address:e.contact.currentAddress,contact:e.contact.currentContact}}))((function(e){var r=function(){e.dispatch(rt.ContactActions.setCurrentAddress(null)),e.dispatch(rt.ApplicationActions.setCurrentDialog(Le.None))};return null==e.address?null:t.createElement(ir,{title:"Delete address?",closeButtonLabel:"Cancel",confirmButtonLabel:"Delete",onConfirm:function(){return Pe(void 0,void 0,void 0,(function(){var t,n;return Ne(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Zt.Contact.deleteContactAddress(e.contact.Id,e.address.AddressId)];case 1:return s.sent(),[4,Zt.Contact.get(e.contact.Id)];case 2:return t=s.sent(),e.dispatch(rt.ContactActions.setCurrentContact(t)),[3,4];case 3:return n=s.sent(),e.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,4];case 4:return r(),[2]}}))}))},onClose:r},t.createElement(cr,{address:e.address}))})),ur=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{},container:{display:"flex",flexWrap:"wrap"}})}))(n.connect((function(e,t){return{mode:e.contact.addressDetailsViewMode,address:t.address,classes:t.classes,country:e.geographics.countries.find((function(t){return t.Code===e.contact.currentAddress.CountryCode})),availableCountries:e.geographics.countries,currentAddress:e.contact.currentAddress,validator:t.validator}}))(Bt)),dr=function(e){function r(t){var r=e.call(this,t)||this;return r.state={loaded:!1},r.validator={validate:function(){return null}},r.closeView=function(){r.props.dispatch(rt.ContactActions.setAddressDetailsViewMode(_e.Hide)),r.props.dispatch(rt.AddressFormActions.clearAddressForm()),r.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!1))},r.setCurrentAddress=function(e){r.props.dispatch(rt.ContactActions.setCurrentAddress(e)),r.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!0))},r.handleFormChanges=function(e){var t=Object.assign({},r.props.address),n="checkbox"===e.target.type?e.target.checked:e.target.value;t[e.target.name]=n,r.setCurrentAddress(t)},r.saveChanges=function(){return Pe(r,void 0,void 0,(function(){var e,t,r,n,s;return Ne(this,(function(a){switch(a.label){case 0:if(null==(e=this.validator.validate()))return[2];t=Ge(Ge({},this.props.address),e),a.label=1;case 1:return a.trys.push([1,9,,10]),this.props.mode!==_e.Add?[3,3]:[4,Zt.Contact.addContactAddress(this.props.currentContactId,t)];case 2:return a.sent(),[3,5];case 3:return[4,Zt.Contact.updateContactAddress(this.props.currentContactId,t.AddressId.trim(),t)];case 4:a.sent(),a.label=5;case 5:return(r=this.props.orderGroup.currentOrderGroup)?[4,this.updateOrderGroup(r)]:[3,7];case 6:a.sent(),a.label=7;case 7:return[4,Zt.Contact.get(this.props.currentContactId)];case 8:return n=a.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(n)),this.closeView(),[3,10];case 9:return s=a.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,10];case 10:return[2]}}))}))},r}return Te(r,e),r.prototype.componentDidMount=function(){this.setState({loaded:!0})},r.prototype.updateOrderGroup=function(e){return Pe(this,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return e.IsDraft?[3,2]:[4,Zt.OrderGroup.getSingleOrderGroup(e.Type,e.OrderGroupId)];case 1:return t=n.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),[3,4];case 2:return[4,Zt.OrderGroup.calculateOrder(e)];case 3:r=n.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(r)),n.label=4;case 4:return[2]}}))}))},r.prototype.render=function(){return t.createElement(ar,{open:!0,title:this.props.mode===_e.Edit?"Edit Address":"Add New Address",okLabel:"Save",onOK:this.saveChanges,closeLabel:"Cancel",onClose:this.closeView},this.state.loaded&&t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,sm:12},t.createElement(ur,{address:this.props.address,validator:this.validator})),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"IsPreferredShippingAddress",checked:this.props.address.IsPreferredShippingAddress,onChange:this.handleFormChanges}),label:"Preferred Shipping Address"})),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"IsPreferredBillingAddress",checked:this.props.address.IsPreferredBillingAddress,onChange:this.handleFormChanges}),label:"Preferred Billing Address"}))))},r}(t.Component),pr=o.withStyles((function(e){e.spacing;return s.createStyles({actions:{marginTop:15}})}))(n.connect((function(e,t){return{mode:e.contact.addressDetailsViewMode,address:e.contact.currentAddress,classes:t.classes,currentContactId:e.contact.currentContact.Id,orderGroup:e.orderGroup}}))(dr)),hr=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.initData()];case 1:return e.sent(),[2]}}))}))},r.prototype.shouldComponentUpdate=function(e,t){var r=this;return e.contactId!==this.props.contactId&&setTimeout((function(){r.initData()}),200),!0},r.prototype.initData=function(){return Pe(this,void 0,void 0,(function(){var e,t,r,n,s,a,i;return Ne(this,(function(o){switch(o.label){case 0:this.props.dispatch(rt.ContactActions.setAddressDetailsViewMode(_e.Hide)),this.props.dispatch(rt.AddressFormActions.clearAddressForm()),this.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!1)),o.label=1;case 1:return o.trys.push([1,7,,8]),e=new URLSearchParams(this.props.location.search),t=parseInt(e.get("orderId"),10),r=e.get("orderType"),this.props.orderGroup||NaN===t||!r?[3,3]:[4,Zt.OrderGroup.getSingleOrderGroup(r,t)];case 2:n=o.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(n)),o.label=3;case 3:return[4,Zt.Contact.get(this.props.contactId)];case 4:return s=o.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(s)),0!==this.props.availableCountries.length?[3,6]:[4,(new Xt).getCountries()];case 5:a=o.sent(),this.props.dispatch(rt.GeographicsActions.setCountries(a)),o.label=6;case 6:return[3,8];case 7:return i=o.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(i.message)),[3,8];case 8:return[2]}}))}))},r.prototype.render=function(){var e=this,r=this.props.classes;return this.props.contact&&t.createElement("div",null,t.createElement(d,{container:!0,spacing:24,className:r.root},this.props.contact.Addresses.map((function(n,s){return t.createElement(d,{item:!0,key:s,className:r.item},t.createElement(nr,{address:n,isReadonly:e.props.isReadonly}))})),!this.props.isReadonly&&t.createElement(d,{item:!0,className:r.item},t.createElement(sr,null))),this.props.addressDetailsViewMode!==_e.Hide&&t.createElement(pr,null),this.props.addressDeleteDialogIsVisible&&t.createElement(lr,null))},r}(t.Component),mr=o.withStyles(or)(n.connect((function(e,t){return Ge({contact:e.contact.currentContact,addressDeleteDialogIsVisible:e.application.currentDialog===Le.DeleteAddress,addressDetailsViewMode:e.contact.addressDetailsViewMode,orderGroup:e.orderGroup.currentOrderGroup,availableCountries:e.geographics.countries},t)}))(hr)),gr=function(e){return t.createElement(_,Ge({direction:"left"},e))},fr=o.withStyles((function(e){var t=e.palette,r=(e.spacing,e.breakpoints,e.zIndex);return s.createStyles({root:{},content:{marginTop:20},title:{flexGrow:1},appBar:{position:"relative",zIndex:r.drawer+1},appBarIcon:{color:t.common.white}})}))(n.connect((function(e,t){return{title:t.title,children:t.children,showDialogActions:t.showDialogActions,classes:t.classes,closeView:t.closeView,menuAction:t.menuAction}}))((function(e){var r=e.classes,n=e.children;return t.createElement(h,{className:r.root,open:!0,fullScreen:!0,onClose:e.closeView,TransitionComponent:gr},t.createElement(U,{className:r.appBar},t.createElement(B,null,t.createElement(f.IconButton,{onClick:e.closeView,"aria-label":"Close"},t.createElement(f.CloseIcon,{className:r.appBarIcon})),t.createElement(x,{variant:"h6",color:"inherit",className:r.title},e.title),e.menuAction&&t.createElement(V,{smUp:!0,implementation:"js"},t.createElement(f.IconButton,{onClick:e.menuAction},t.createElement(H,{className:r.appBarIcon}))))),t.createElement(g,{className:r.content},n),e.showDialogActions&&t.createElement(m,null,t.createElement(f.TextButton,{unelevated:!0,onClick:e.closeView},"Close")))}))),yr=n.connect((function(e,t){return{discardChanges:t.discardChanges}}))((function(e){return t.createElement(ir,{title:"Leave page?",closeButtonLabel:"Cancel",confirmButtonLabel:"Leave",onConfirm:function(){e.discardChanges(),e.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!1))},onClose:function(){e.dispatch(rt.ApplicationActions.setCurrentDialog(Le.None)),e.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!0))}},t.createElement(x,{variant:"body1"},"You have unsaved changes. Do you want to leave the page without saving?"))}));function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vr(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}function Cr(e){return"/"===e.charAt(0)}function Sr(e,t){for(var r=t,n=r+1,s=e.length;n<s;r+=1,n+=1)e[r]=e[n];e.pop()}var Ir=function(e,t){void 0===t&&(t="");var r,n=e&&e.split("/")||[],s=t&&t.split("/")||[],a=e&&Cr(e),i=t&&Cr(t),o=a||i;if(e&&Cr(e)?s=n:n.length&&(s.pop(),s=s.concat(n)),!s.length)return"/";if(s.length){var c=s[s.length-1];r="."===c||".."===c||""===c}else r=!1;for(var l=0,u=s.length;0<=u;u--){var d=s[u];"."===d?Sr(s,u):".."===d?(Sr(s,u),l++):l&&(Sr(s,u),l--)}if(!o)for(;l--;l)s.unshift("..");!o||""===s[0]||s[0]&&Cr(s[0])||s.unshift("");var p=s.join("/");return r&&"/"!==p.substr(-1)&&(p+="/"),p};function br(e){return"/"===e.charAt(0)}function Ar(e,t){for(var r=t,n=r+1,s=e.length;n<s;r+=1,n+=1)e[r]=e[n];e.pop()}var Or=function(e,t){void 0===t&&(t="");var r,n=e&&e.split("/")||[],s=t&&t.split("/")||[],a=e&&br(e),i=t&&br(t),o=a||i;if(e&&br(e)?s=n:n.length&&(s.pop(),s=s.concat(n)),!s.length)return"/";if(s.length){var c=s[s.length-1];r="."===c||".."===c||""===c}else r=!1;for(var l=0,u=s.length;u>=0;u--){var d=s[u];"."===d?Ar(s,u):".."===d?(Ar(s,u),l++):l&&(Ar(s,u),l--)}if(!o)for(;l--;l)s.unshift("..");!o||""===s[0]||s[0]&&br(s[0])||s.unshift("");var p=s.join("/");return r&&"/"!==p.substr(-1)&&(p+="/"),p},Tr=vr((function(e){"production"===process.env.NODE_ENV?e.exports=Ir:e.exports=Or}));function wr(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var Gr=function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every((function(t,n){return e(t,r[n])}));if("object"!=typeof t&&"object"!=typeof r)return!1;var n=wr(t),s=wr(r);return n!==t||s!==r?e(n,s):Object.keys(Object.assign({},t,r)).every((function(n){return e(t[n],r[n])}))};function Dr(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var Pr=function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every((function(t,n){return e(t,r[n])}));if("object"==typeof t||"object"==typeof r){var n=Dr(t),s=Dr(r);return n!==t||s!==r?e(n,s):Object.keys(Object.assign({},t,r)).every((function(n){return e(t[n],r[n])}))}return!1},Nr=(vr((function(e){"production"===process.env.NODE_ENV?e.exports=Gr:e.exports=Pr})),"production"===process.env.NODE_ENV);function Rr(e,t){if(!Nr){if(e)return;var r="Warning: "+t;"undefined"!=typeof console&&console.warn(r);try{throw Error(r)}catch(e){}}}var xr="production"===process.env.NODE_ENV;function Lr(e,t){if(!e){if(xr)throw new Error("Invariant failed");throw new Error("Invariant failed: "+(t||""))}}function Mr(e){return"/"===e.charAt(0)?e:"/"+e}function Fr(e){return"/"===e.charAt(0)?e.substr(1):e}function kr(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function _r(e){var t=e.pathname,r=e.search,n=e.hash,s=t||"/";return r&&"?"!==r&&(s+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(s+="#"===n.charAt(0)?n:"#"+n),s}function Vr(e,t,r,n){var s;"string"==typeof e?(s=function(e){var t=e||"/",r="",n="",s=t.indexOf("#");-1!==s&&(n=t.substr(s),t=t.substr(0,s));var a=t.indexOf("?");return-1!==a&&(r=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}(e)).state=t:(void 0===(s=Er({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return r&&(s.key=r),n?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Tr(s.pathname,n.pathname)):s.pathname=n.pathname:s.pathname||(s.pathname="/"),s}var Ur=!("undefined"==typeof window||!window.document||!window.document.createElement);function Br(e,t){t(window.confirm(e))}var Hr={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Fr(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:Fr,decodePath:Mr},slash:{encodePath:Mr,decodePath:Mr}};function qr(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Wr(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function jr(e){window.location.replace(qr(window.location.href)+"#"+e)}var Yr,zr=function(e){void 0===e&&(e={}),Ur||("production"!==process.env.NODE_ENV?Lr(!1,"Hash history needs a DOM"):Lr(!1));var t=window.history,r=-1===window.navigator.userAgent.indexOf("Firefox"),n=e,s=n.getUserConfirmation,a=void 0===s?Br:s,i=n.hashType,o=void 0===i?"slash":i,c=e.basename?function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}(Mr(e.basename)):"",l=Hr[o],u=l.encodePath,d=l.decodePath;function p(){var e=d(Wr());return"production"!==process.env.NODE_ENV&&Rr(!c||kr(e,c),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+c+'".'),c&&(e=function(e,t){return kr(e,t)?e.substr(t.length):e}(e,c)),Vr(e)}var h,m,g=(h=null,m=[],{setPrompt:function(e){return"production"!==process.env.NODE_ENV&&Rr(null==h,"A history supports only one prompt at a time"),h=e,function(){h===e&&(h=null)}},confirmTransitionTo:function(e,t,r,n){if(null!=h){var s="function"==typeof h?h(e,t):h;"string"==typeof s?"function"==typeof r?r(s,n):("production"!==process.env.NODE_ENV&&Rr(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),n(!0)):n(!1!==s)}else n(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return m.push(r),function(){t=!1,m=m.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];m.forEach((function(e){return e.apply(void 0,t)}))}});function f(e){Er(G,e),G.length=t.length,g.notifyListeners(G.location,G.action)}var y=!1,E=null;function v(){var e,t,r=Wr(),n=u(r);if(r!==n)jr(n);else{var s=p(),i=G.location;if(!y&&(t=s,(e=i).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===_r(s))return;E=null,function(e){if(y)y=!1,f();else{var t="POP";g.confirmTransitionTo(e,t,a,(function(r){r?f({action:t,location:e}):function(e){var t=G.location,r=b.lastIndexOf(_r(t));-1===r&&(r=0);var n=b.lastIndexOf(_r(e));-1===n&&(n=0);var s=r-n;s&&(y=!0,A(s))}(e)}))}}(s)}}var C=Wr(),S=u(C);C!==S&&jr(S);var I=p(),b=[_r(I)];function A(e){"production"!==process.env.NODE_ENV&&Rr(r,"Hash history go(n) causes a full page reload in this browser"),t.go(e)}var O=0;function T(e){1===(O+=e)&&1===e?window.addEventListener("hashchange",v):0===O&&window.removeEventListener("hashchange",v)}var w=!1,G={length:t.length,action:"POP",location:I,createHref:function(e){var t=document.querySelector("base"),r="";return t&&t.getAttribute("href")&&(r=qr(window.location.href)),r+"#"+u(c+_r(e))},push:function(e,t){"production"!==process.env.NODE_ENV&&Rr(void 0===t,"Hash history cannot push state; it is ignored");var r="PUSH",n=Vr(e,void 0,void 0,G.location);g.confirmTransitionTo(n,r,a,(function(e){if(e){var t=_r(n),s=u(c+t);if(Wr()!==s){E=t,function(e){window.location.hash=e}(s);var a=b.lastIndexOf(_r(G.location)),i=b.slice(0,a+1);i.push(t),b=i,f({action:r,location:n})}else"production"!==process.env.NODE_ENV&&Rr(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),f()}}))},replace:function(e,t){"production"!==process.env.NODE_ENV&&Rr(void 0===t,"Hash history cannot replace state; it is ignored");var r="REPLACE",n=Vr(e,void 0,void 0,G.location);g.confirmTransitionTo(n,r,a,(function(e){if(e){var t=_r(n),s=u(c+t);Wr()!==s&&(E=t,jr(s));var a=b.indexOf(_r(G.location));-1!==a&&(b[a]=t),f({action:r,location:n})}}))},go:A,goBack:function(){A(-1)},goForward:function(){A(1)},block:function(e){void 0===e&&(e=!1);var t=g.setPrompt(e);return w||(T(1),w=!0),function(){return w&&(w=!1,T(-1)),t()}},listen:function(e){var t=g.appendListener(e);return T(1),function(){T(-1),t()}}};return G}(),Qr=function(e,t){var r=JSON.parse(sessionStorage.getItem("previousHistory")||"{}");t||(t=zr.location.pathname+zr.location.search),r[e]=t,sessionStorage.setItem("previousHistory",JSON.stringify(r))},Kr=function(e){return JSON.parse(sessionStorage.getItem("previousHistory")||"{}")[e]},Xr=function(){return""+zr.location.pathname+zr.location.search};zr.listen((function(e,t){})),function(e){e[e.FullName=64]="FullName",e[e.FirstName=64]="FirstName",e[e.LastName=64]="LastName",e[e.MiddleName=64]="MiddleName",e[e.Email=254]="Email"}(Yr||(Yr={}));var Jr=Yr,Zr=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.Contact.getCustomerGroups()];case 1:return e=t.sent(),this.props.dispatch(rt.ContactActions.setCustomerGroups(e)),[2]}}))}))},r.prototype.render=function(){var e=this;return t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"Full Name *")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(T.TextValidator,{fullWidth:!0,name:"FullName",placeholder:"Contact's full name",value:this.props.contact.FullName||"",onChange:this.props.updateInputValue,validators:[Vt.Required,Vt.setMaxStringLength(Jr.FullName)],errorMessages:[Vt.getValidationMessage(Vt.Required),Vt.getValidationMessage(Vt.MaxStringLength,Jr.FullName)],withRequiredValidator:!0})))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"First Name *")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(T.TextValidator,{fullWidth:!0,name:"FirstName",placeholder:"Contact's first name",value:this.props.contact.FirstName||"",onChange:this.props.updateInputValue,validators:[Vt.Required,Vt.setMaxStringLength(Jr.FirstName)],errorMessages:[Vt.getValidationMessage(Vt.Required),Vt.getValidationMessage(Vt.MaxStringLength,Jr.FirstName)],withRequiredValidator:!0})))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"Middle Name")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(T.TextValidator,{fullWidth:!0,placeholder:"Contact's middle name",id:"middle-name",value:this.props.contact.MiddleName||"",name:"MiddleName",onChange:this.props.updateInputValue,validators:[Vt.setMaxStringLength(Jr.MiddleName)],errorMessages:[Vt.getValidationMessage(Vt.MaxStringLength,Jr.MiddleName)]})))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"Last Name *")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(T.TextValidator,{fullWidth:!0,name:"LastName",placeholder:"Contact's last name",value:this.props.contact.LastName||"",onChange:this.props.updateInputValue,validators:[Vt.Required,Vt.setMaxStringLength(Jr.LastName)],errorMessages:[Vt.getValidationMessage(Vt.Required),Vt.getValidationMessage(Vt.MaxStringLength,Jr.LastName)],withRequiredValidator:!0})))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"E-mail *")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(T.TextValidator,{fullWidth:!0,name:"Email",placeholder:"E-mail address",value:this.props.contact.Email||"",onChange:this.props.updateInputValue,validators:[Vt.Required,Vt.IsEmail,Vt.setMaxStringLength(Jr.Email)],errorMessages:[Vt.getValidationMessage(Vt.Required),Vt.getValidationMessage(Vt.IsEmail),Vt.getValidationMessage(Vt.MaxStringLength,Jr.Email)],withRequiredValidator:!0})))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:3},t.createElement(s.Typography,null,"Customer Group")),t.createElement(s.Grid,{item:!0,xs:12,sm:9},t.createElement(s.Select,{fullWidth:!0,displayEmpty:!0,id:"customerGroup",placeholder:"Customer group",value:this.props.contact.CustomerGroup||"",name:"CustomerGroup",onChange:this.props.updateInputValue},Object.keys(this.props.customerGroups).map((function(r,n){return t.createElement(s.MenuItem,{key:r,value:e.props.customerGroups[r].Id},e.props.customerGroups[r].Id)})),t.createElement(s.MenuItem,{value:""},"None"))))))},r}(t.Component),$r=function(e){var t=e.palette;e.spacing,e.breakpoints;return s.createStyles({root:{marginBottom:er.marginDefault},header:Ge(Ge({},rr),{height:48,background:t.primary.main}),title:{color:t.common.white}})},en=o.withStyles($r)(n.connect((function(e,t){return{contact:t.contact,contactApi:new Ht,customerGroups:e.contact.customerGroups,updateInputValue:t.updateInputValue,classes:t.classes}}))(Zr)),tn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.savePersonalInformation=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Zt.Contact.updatePersonalInformation(this.props.contact)];case 1:return t.sent(),zr.replace("./info"),[3,3];case 2:return e=t.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(e.message)),[3,3];case 3:return[2]}}))}))},t.updateInputValue=function(e){return Pe(t,void 0,void 0,(function(){var t;return Ne(this,(function(r){return(t=Object.assign({},this.props.contact))[e.target.name]=String(e.target.value),this.props.dispatch(rt.ContactActions.setCurrentContact(t)),[2]}))}))},t}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData(this.props.contactId)];case 1:return e.sent(),[2]}}))}))},r.prototype.componentDidMount=function(){var e=!this.currentForm||this.currentForm.isFormValid(!1);this.props.dispatch(rt.ApplicationActions.setIsCurrentFormValid(e))},r.prototype.componentDidUpdate=function(e){this.currentForm&&this.currentForm.isFormValid()!==e.isCurrentFormValid&&this.props.dispatch(rt.ApplicationActions.setIsCurrentFormValid(this.currentForm.isFormValid()))},r.prototype.shouldComponentUpdate=function(e,t){return e.contactId!==this.props.contactId&&this.getData(e.contactId),!0},r.prototype.getData=function(e){return Pe(this,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return[4,Zt.Contact.get(e)];case 1:return t=r.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(t)),[2]}}))}))},r.prototype.render=function(){var e=this;return t.createElement(s.Card,{className:this.props.classes.root},t.createElement(s.CardHeader,{className:this.props.classes.header,title:"Edit Personal Information",titleTypographyProps:{className:this.props.classes.title,variant:"subheading"}}),t.createElement(s.CardContent,null,t.createElement(T.ValidatorForm,{ref:function(t){return e.currentForm=t},onSubmit:this.savePersonalInformation},t.createElement(en,{saveChanges:this.savePersonalInformation,contact:this.props.contact,updateInputValue:this.updateInputValue}),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:24},t.createElement(s.Grid,{item:!0},t.createElement(D.Link,{to:"./info",replace:!0,style:{textDecoration:"none"}},t.createElement(f.TextButton,null,"Cancel"))),t.createElement(s.Grid,{item:!0},t.createElement(f.TextButton,{onClick:this.savePersonalInformation,unelevated:!0,disabled:!this.props.isCurrentFormValid},"Save")))))))},r}(t.Component),rn=o.withStyles($r)(n.connect((function(e,t){return Ge({contact:e.contact.currentContact||{},currentCart:e.orderGroup.currentOrderGroup,listedCarts:e.orderGroup.listedOrderGroups,isCurrentFormValid:e.application.isCurrentFormValid},t)}))(tn)),nn=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){return t.createElement(rn,Ge({},this.props))},r}(t.Component),sn=[{id:"OrderNumber",numeric:!1,label:"No.",minWidth:"100px"},{id:"Created",numeric:!1,label:"Created Date",minWidth:"100px"},{id:"LineItems",numeric:!1,label:"Products",minWidth:"100px"},{id:"Total",numeric:!0,label:"Total Amount",minWidth:"100px"},{id:"OrderStatus",numeric:!1,label:"Order Status",minWidth:"100px"}],an=[10,20,50],on=function(e){function r(t){var r=e.call(this,t)||this;return r.query=new URLSearchParams(zr.location.search),r.state={page:r.getPageParam(),rowsPerPage:r.getRowsPerPageParam(),totalRecords:0,orderList:[]},r.getData=function(){return Pe(r,void 0,void 0,(function(){var e,t,r,n=this;return Ne(this,(function(s){switch(s.label){case 0:return e=0===this.state.totalRecords,t=this.state.page*this.state.rowsPerPage,[4,Zt.OrderHistory.getOrdersByCustomerId(this.props.customerId,t,this.state.rowsPerPage,e)];case 1:return r=s.sent(),e&&r.TotalRecords<=this.state.page*this.state.rowsPerPage?(this.setState({page:0},(function(){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}}))}))})),[2]):(zr.replace({pathname:zr.location.pathname,search:"?"+new URLSearchParams({page:(this.state.page+1).toString(),rowsPerPage:this.state.rowsPerPage.toString()}).toString()}),setTimeout((function(){n.setState({orderList:r.Results}),e&&n.setState({totalRecords:r.TotalRecords})}),200),[2])}}))}))},r.handleChangePage=function(e,t){null!==e&&r.setState({page:t},(function(){r.getData()}))},r.handleChangeRowsPerPage=function(e){null!==e&&r.setState({page:0,rowsPerPage:e.target.value},(function(){r.getData()}))},r.getItemDescriptions=function(e){var t="",r=1;if(e&&e.length>0){for(t=e[0].DisplayName;t.length<120&&r<e.length;)t+=", "+e[r].DisplayName,r++;if(r<e.length){var n=e.length-r;t+=" ... and "+n+" more "+(n>1?"products":"product")}}return t},r.state.page<0&&(r.state.page=0),r}return Te(r,e),r.prototype.getPageParam=function(){var e=parseInt(this.query.get("page"),10)-1||0;return e<0&&(e=0),e},r.prototype.getRowsPerPageParam=function(){var e=parseInt(this.query.get("rowsPerPage"),10)||10;return an.indexOf(e)>=0?e:10},r.prototype.shouldComponentUpdate=function(e,t){var r=this;this.query=new URLSearchParams(zr.location.search);var n=this.getPageParam(),s=this.getRowsPerPageParam();return this.state.page===n&&this.state.rowsPerPage===s||this.setState({page:n,rowsPerPage:s},(function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}}))}))})),!0},r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}}))}))},r.prototype.render=function(){var e=this,r=this.props.classes;return t.createElement("div",{className:r.root},t.createElement(K,{className:r.paper},t.createElement("div",{className:r.tableWrapper},t.createElement(q,{className:r.table},t.createElement(Y,null,t.createElement(Q,null,sn.map((function(e){return t.createElement(j,{className:r.headerLable,key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",style:{minWidth:e.minWidth}},e.label)})))),t.createElement(W,null,this.state.orderList.map((function(n,s){return t.createElement(Q,{hover:!0,key:s},t.createElement(j,null,t.createElement(D.Link,{className:r.link,to:vt+"/"+n.OrderGroupId},n.OrderNumber)),t.createElement(j,null,X(n.Created).format("LLL")),t.createElement(j,null," ",e.getItemDescriptions(n.LineItems)),t.createElement(j,{align:"right"},n.Total.Amount.toFixed(n.Total.Fractions)+" "+n.Total.Currency),t.createElement(j,null,n.OrderStatus))}))))),t.createElement(z,{rowsPerPageOptions:an,component:"div",count:this.state.totalRecords,rowsPerPage:this.state.rowsPerPage,page:this.state.page,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})))},r}(t.Component),cn=o.withStyles((function(e){return o.createStyles({tableWrapper:{overflowX:"auto"},link:{textDecoration:"none",color:e.palette.primary.main+" !important"},headerLable:{fontWeight:"bold"}})}))(on);function ln(e){return t.createElement(cn,Ge({},e))}var un,dn=function(e){return t.createElement(d,{item:!0,xs:12,style:{minHeight:50}},t.createElement(d,{container:!0},t.createElement(d,{item:!0,xs:12,sm:3},t.createElement(x,{variant:"body1"},e.label,":")),t.createElement(d,{item:!0,xs:12,sm:9},t.createElement(x,{variant:"body1"},e.value))))},pn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.classes=t.props.classes,t}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData(this.props.contactId)];case 1:return e.sent(),[2]}}))}))},r.prototype.shouldComponentUpdate=function(e,t){return e.contactId!==this.props.contactId&&this.getData(e.contactId),!0},r.prototype.getData=function(e){return Pe(this,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return[4,Zt.Contact.get(e)];case 1:return t=r.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(t)),[2]}}))}))},r.prototype.openContactPersonalInformationEditView=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){try{this.props.dispatch(rt.ContactActions.showPersonalInformationEditView())}catch(e){this.props.dispatch(rt.ApplicationActions.showNotification(e.message))}return[2]}))}))},r.prototype.render=function(){return this.props.contact&&t.createElement(P,{className:this.classes.root},t.createElement(N,{className:this.classes.header,action:!this.props.isReadonly&&t.createElement(D.Link,{to:"./edit",className:this.classes.action,replace:!0},t.createElement(J,{title:"Edit the contact's personal information"},t.createElement(f.IconButton,null,t.createElement(f.EditIcon,{className:this.classes.icon})))),title:"Personal Information",titleTypographyProps:{className:this.classes.title,variant:"subheading"}}),t.createElement(R,null,t.createElement(d,{container:!0,direction:"column",spacing:8},t.createElement(dn,{label:"Full Name",value:this.props.contact.FullName}),t.createElement(dn,{label:"First Name",value:this.props.contact.FirstName}),t.createElement(dn,{label:"Middle Name",value:this.props.contact.MiddleName}),t.createElement(dn,{label:"Last Name",value:this.props.contact.LastName}),t.createElement(dn,{label:"E-mail",value:this.props.contact.Email}),t.createElement(dn,{label:"Customer Group",value:this.props.contact.CustomerGroup?this.props.contact.CustomerGroup:"None"}))))},r}(t.Component),hn=o.withStyles((function(e){var t=e.palette;e.spacing,e.breakpoints;return s.createStyles({root:{marginBottom:er.marginDefault},header:Ge(Ge({},rr),{height:48,background:t.primary.main}),title:{color:t.common.white},action:{display:"block",marginTop:"8px"},icon:{fill:t.common.white}})}))(n.connect((function(e,t){return{contactId:t.contactId,contact:e.contact.currentContact,isReadonly:t.isReadonly,classes:t.classes}}))(pn)),mn=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){return t.createElement(hn,Ge({},this.props))},r}(t.Component),gn=function(e){function r(t){var r=e.call(this,t)||this;r.state={discardDialogOpen:!1},r.classes=r.props.classes,r.addressListLink="/customers/"+r.props.currentContactId+"/addresses",r.personalInfoLink="/customers/"+r.props.currentContactId+"/info",r.PeronalInfoEditLink="/customers/"+r.props.currentContactId+"/edit",r.addressSearchQuery="",r.customerInfoLink="/customers/"+r.props.currentContactId+"/info",r.customerAddressLink="/customers/"+r.props.currentContactId+"/addresses",r.customerOrderLink="/customers/"+r.props.currentContactId+"/orders",r.unListenHistory=zr.listen((function(e,t){r.forceUpdate()}));var n=new URLSearchParams(r.props.location.search);return null!==n.get("orderType")&&null!==n.get("orderId")&&(r.addressSearchQuery="?orderType="+n.get("orderType")+"&orderId="+n.get("orderId")),r}return Te(r,e),r.prototype.componentWillUnmount=function(){this.unListenHistory()},r.prototype.discardChanges=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:this.props.dispatch(rt.ApplicationActions.setCurrentDialog(Le.None)),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Zt.Contact.get(this.props.currentContactId)];case 2:return e=r.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(e)),this.props.dispatch(rt.AddressFormActions.clearAddressForm()),this.props.drawerNextMenu!==Ve.None?this.displayMainContent(this.props.drawerNextMenu):this.props.dispatch(rt.ContactActions.setDrawerSelectedMenu(Ve.None)),[3,4];case 3:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,4];case 4:return[2]}}))}))},r.prototype.displayMainContent=function(e){e===Ve.PersonalInformation?this.props.dispatch(rt.ContactActions.showContactProfile()):e===Ve.AddressBook&&this.props.dispatch(rt.ContactActions.showAddressBook())},r.prototype.closeProfileOverview=function(){this.leavePage()},r.prototype.leavePage=function(){this.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!1));var e=Kr(mt);void 0!==e?zr.push(e):zr.push("/")},r.prototype.getMenuListItem=function(){var e=this;return t.createElement(s.MenuList,null,t.createElement(D.Link,{to:this.personalInfoLink,className:this.classes.menuItem+" "+(zr.location.pathname===this.personalInfoLink||zr.location.pathname===this.PeronalInfoEditLink?this.classes.menuItemActive:""),replace:!0},t.createElement(s.MenuItem,{button:!0,key:"Personal Information"},t.createElement(s.ListItemText,{classes:{primary:this.classes.primary},primary:"Personal Information"}))),t.createElement(D.Link,{to:this.addressListLink+this.addressSearchQuery,className:this.classes.menuItem+" "+(zr.location.pathname===this.addressListLink?this.classes.menuItemActive:""),replace:!0},t.createElement(s.MenuItem,{button:!0,key:"Address Book"},t.createElement(s.ListItemText,{classes:{primary:this.classes.primary},primary:"Address Book"}))),t.createElement(D.Link,{to:this.customerOrderLink,className:this.classes.menuItem+" "+(zr.location.pathname===this.customerOrderLink?this.classes.menuItemActive:""),replace:!0},t.createElement(s.MenuItem,{button:!0,key:"Orders"},t.createElement(s.ListItemText,{classes:{primary:this.classes.primary},primary:"Orders"}))),this.props.extraPages&&this.props.extraPages.map((function(r,n){var a="/customers/"+e.props.currentContactId+"/"+r.getLink({CustomerId:e.props.currentContactId});return t.createElement(D.Link,{key:n,to:a,className:e.classes.menuItem+" "+(zr.location.pathname===a?e.classes.menuItemActive:""),replace:!0},t.createElement(s.MenuItem,null,t.createElement(s.ListItemText,{classes:{primary:e.classes.primary},primary:r.title})))})))},r.prototype.render=function(){var e,r=this;return t.createElement(fr,{title:"Contact Details",showDialogActions:this.props.showDialogActions,closeView:function(){return r.closeProfileOverview()}},t.createElement(V,{smUp:!0,implementation:"js"},t.createElement(s.Drawer,{className:this.classes.drawer,variant:"temporary",classes:{paper:this.classes.drawerPaper},open:this.props.drawerIsExpanded,anchor:"right",onClose:function(){return r.props.dispatch(rt.ContactActions.setDrawerIsExpanded(!1))}},t.createElement("div",{className:this.classes.toolbar}),this.getMenuListItem())),t.createElement(V,{xsDown:!0,implementation:"js"},t.createElement(s.Drawer,{className:this.classes.drawer,variant:"permanent",classes:{paper:this.classes.drawerPaper},open:!0,anchor:"left"},t.createElement("div",{className:this.classes.toolbar}),this.getMenuListItem())),t.createElement("main",{className:this.classes.content},t.createElement("div",{className:this.classes.childContent},t.createElement(D.Switch,{location:zr.location},t.createElement(D.Route,{exact:!0,path:gt,render:function(e){return t.createElement(mn,{contactId:e.match.params.id})}}),t.createElement(D.Route,{exact:!0,path:ft,render:function(e){return t.createElement(nn,{contactId:e.match.params.id})}}),t.createElement(D.Route,{path:yt,render:function(e){return t.createElement(mr,Ge({contactId:e.match.params.id},e))}}),t.createElement(D.Route,{exact:!0,path:Et,render:function(e){return t.createElement(ln,{customerId:e.match.params.id})}}),this.props.extraPages&&(null===(e=this.props.extraPages)||void 0===e?void 0:e.map((function(e){return t.createElement(D.Route,{path:"/customers/"+r.props.currentContactId+e.path,exact:e.exact,render:function(t){return e.render({CustomerId:r.props.currentContactId})}})})))),this.props.discardChangesDialogIsVisible&&t.createElement(yr,{discardChanges:this.discardChanges}))),this.state.discardDialogOpen&&t.createElement(ir,{title:"Leave page?",closeButtonLabel:"Cancel",confirmButtonLabel:"Leave",onConfirm:function(){return r.leavePage()},onClose:function(){return r.setState({discardDialogOpen:!1})}},t.createElement(s.Typography,{variant:"body1"},"You have unsaved changes. Do you want to leave the page without saving?")))},r}(t.Component),fn=o.withStyles((function(e){var t,r,n=e.palette,a=e.spacing,i=e.zIndex,o=e.mixins,c=e.breakpoints;return s.createStyles({root:{display:"flex"},appBar:{zIndex:i.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,background:tr.light},content:(t={flexGrow:1,padding:3*a.unit},t[c.down("xs")]={padding:0},t),childContent:(r={marginLeft:240},r[c.down("xs")]={marginLeft:0},r),toolbar:o.toolbar,menuItem:{display:"block",borderLeftWidth:5,borderLeftStyle:"solid",borderLeftColor:tr.light,textDecoration:"none"},menuItemActive:{backgroundColor:n.common.white,borderLeftColor:n.primary.main},selected:{},primary:{}})}))(n.connect((function(e,t){var r,n,s=e.setting.pageConfig.contactDetail;return Ge({isCurrentFormDirty:e.application.isCurrentFormDirty,showDialogActions:!e.contact.personalInformationEditViewIsVisible&&e.contact.addressDetailsViewMode===_e.Hide,currentContactId:t.customerId,drawerSelectedMenu:e.contact.drawerSelectedMenu,drawerNextMenu:e.contact.drawerNextMenu,drawerIsExpanded:e.contact.drawerIsExpanded,discardChangesDialogIsVisible:e.application.currentDialog===Le.DiscardChanges,extraPages:null===(n=null===(r=s)||void 0===r?void 0:r.config)||void 0===n?void 0:n.extraPages},t)}))(gn)),yn=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){return t.createElement(fn,Ge({},this.props))},r}(t.Component),En=function(e){var r=e.amount;return t.createElement(x,Ge({variant:"body1",component:"span"},e),r.Amount.toFixed(r.Fractions)+" "+r.Currency)};!function(e){e[e.DateTime=4]="DateTime",e[e.Decimal=5]="Decimal",e[e.Float=6]="Float",e[e.Int=8]="Int",e[e.Money=9]="Money",e[e.Integer=26]="Integer",e[e.Boolean=27]="Boolean",e[e.Date=28]="Date",e[e.Email=29]="Email",e[e.URL=30]="URL",e[e.ShortString=31]="ShortString",e[e.LongString=32]="LongString",e[e.LongHtmlString=33]="LongHtmlString",e[e.DictionarySingleValue=34]="DictionarySingleValue",e[e.DictionaryMultiValue=35]="DictionaryMultiValue",e[e.EnumSingleValue=36]="EnumSingleValue",e[e.EnumMultiValue=37]="EnumMultiValue",e[e.StringDictionary=38]="StringDictionary",e[e.File=39]="File",e[e.ImageFile=40]="ImageFile"}(un||(un={}));var vn=un;T.ValidatorForm.addValidationRule(Vt.IsURL,Vt.isValidUrl),T.ValidatorForm.addValidationRule(Vt.IsInteger,Vt.isValidInteger),T.ValidatorForm.addValidationRule(Vt.IsMoney,Vt.isValidMoney);var Cn,Sn=function(e){function r(r){var n=e.call(this,r)||this;n.state={value:null===n.props.property.Value?"":n.props.property.Value},n.validators=[],n.errorMessages=[],n.inputRef=t.createRef(),n.isMultiLine=!1,n.maxRows=4,n.onChangeHandler=function(e){n.setState({value:e.currentTarget.value})},n.onBlurHandler=function(e){if(!0===n.inputRef.current.isValid()){if(!(n.state.value&&""!==n.state.value||n.props.property.Value&&""!==n.props.property.Value))return;if(n.state.value!==n.props.property.Value){var t=Object.assign({},n.props.property);t.Value=n.state.value,n.props.onPropertyChanged(t)}}};var s=n.props.property.DataType;if(n.props.property.AllowNulls||n.addValidation(Vt.Required),s===vn.Integer||s===vn.Int)n.addValidation(Vt.IsInteger);else if(s===vn.Float)n.addValidation(Vt.IsFloatRegex);else if(s===vn.Decimal){var a=parseInt(n.props.property.Attributes.mdpprecision,10),i=parseInt(n.props.property.Attributes.mdpscale,10),o="Decimal"+a+","+i;T.ValidatorForm.addValidationRule(o,(function(e){var t=new w.BigNumber(e);return""===e||!(t.isNaN()||t.decimalPlaces()>i||t.precision()>a)})),n.validators.push(o),n.errorMessages.push("Value is not valid decimal("+a+","+i+")")}else s===vn.Money?n.addValidation(Vt.IsMoney):s===vn.Email?n.addValidation(Vt.IsEmail):s===vn.URL?n.addValidation(Vt.IsURL):[vn.LongHtmlString,vn.LongString].indexOf(s)>=0&&(n.isMultiLine=!0);return n}return Te(r,e),r.prototype.shouldComponentUpdate=function(e,t){return e.property.Value!==this.props.property.Value&&e.property.Value!==t.value&&(t.value=null===e.property.Value?"":e.property.Value),!0},r.prototype.addValidation=function(e){this.validators.push(e),this.errorMessages.push(Vt.getValidationMessage(e))},r.prototype.render=function(){return t.createElement(T.TextValidator,{ref:this.inputRef,multiline:this.isMultiLine,rowsMax:this.maxRows,className:this.isMultiLine?"textarea-input-control":"",variant:"outlined",fullWidth:!0,name:this.props.property.Name,label:this.props.property.FriendlyName+(!0===this.props.property.AllowNulls?"":" *"),value:this.state.value,onChange:this.onChangeHandler,onBlur:this.onBlurHandler,validators:this.validators,errorMessages:this.errorMessages,withRequiredValidator:!0,disabled:this.props.isReadonly})},r}(t.Component),In=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={value:null===t.props.property.Value?null:X(t.props.property.Value)},t.onChangeHandler=function(e){var r=null!==t.props.property.Value?X(t.props.property.Value).toISOString():null,n=e?e.toISOString():null;if(t.props.property.DataType===vn.Date&&(r&&(r=X(r).startOf("day").toISOString()),n&&(n=X(n).startOf("day").toISOString())),n!==r){var s=Ge({},t.props.property);s.Value=n,t.props.onPropertyChanged(s)}t.setState({value:e})},t}return Te(r,e),r.prototype.shouldComponentUpdate=function(e,t){return e.property.Value!==this.props.property.Value&&e.property.Value!==t.value&&(t.value=null===e.property.Value?null:X(e.property.Value)),!0},r.prototype.render=function(){var e=this;return t.createElement("div",null,t.createElement("div",{className:"picker"},this.props.property.DataType===vn.Date&&t.createElement(a.DatePicker,{fullWidth:!0,variant:"outlined",keyboard:!1,clearable:this.props.property.AllowNulls&&null!==this.state.value,label:this.props.property.FriendlyName,format:"DD MMM YYYY",required:!this.props.property.AllowNulls,disableOpenOnEnter:!0,animateYearScrolling:!0,disabled:this.props.isReadonly,value:this.state.value,onChange:function(t){return e.onChangeHandler(t)}}),this.props.property.DataType===vn.DateTime&&t.createElement(a.DateTimePicker,{fullWidth:!0,variant:"outlined",keyboard:!1,clearable:this.props.property.AllowNulls&&null!==this.state.value,label:this.props.property.FriendlyName,format:"DD MMM YYYY hh:mm",required:!this.props.property.AllowNulls,disableOpenOnEnter:!0,animateYearScrolling:!0,disabled:this.props.isReadonly,value:this.state.value,onChange:function(t){return e.onChangeHandler(t)}})))},r}(t.Component),bn=function(e){return t.createElement("tr",{className:"mdc-data-table__row"+(e.isRowSelected?" mdc-data-table__row--selected":"")},e.selectableRows&&t.createElement("td",{className:"mdc-data-table__cell mdc-data-table__cell--checkbox"},t.createElement(f.Checkbox,{checked:e.isRowSelected,onChange:function(t){e.setRowSelected(e.rowIndex,!e.isRowSelected)}})),e.columns.map((function(r,n){if(r.hidden)return null;var s=r.selector?e.rowData[r.selector]:"";return r.render&&(s=r.render(e.rowData,e.rowIndex)),t.createElement("td",{className:"mdc-data-table__cell"+(r.hide?" hide-"+r.hide:"")+(r.right?" align-right":""),key:n,onClick:function(){e.onRowClicked()},onDoubleClick:function(){e.onRowDoubleClicked()}},t.createElement("div",{style:{whiteSpace:"pre-wrap"}},s))})))},An=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){var e=this;return t.createElement("tr",{className:"mdc-data-table__header-row"},this.props.selectableRows&&t.createElement("th",{className:"mdc-data-table__header-cell mdc-data-table__header-cell--checkbox",role:"columnheader",scope:"col",style:{width:"60px"}},t.createElement(f.Checkbox,{checked:this.props.isSelectedAll,indeterminate:this.props.indeterminate,onChange:function(t){e.props.setHeaderRowChecked(!e.props.isSelectedAll)}})),this.props.columns.map((function(e,r){if(e.hidden)return null;var n={};return e.width&&(n.width=e.width+"px"),e.minWidth&&(n.minWidth=e.minWidth+"px"),e.maxWidth&&(n.maxWidth=e.maxWidth+"px"),t.createElement("th",{className:"mdc-data-table__header-cell epi-table__header-cell"+(e.hide?" hide-"+e.hide:"")+(e.right?" align-right":""),role:"columnheader",scope:"col",key:r,style:n},t.createElement("div",{className:"epi-table__header-title"},t.createElement("span",{className:"header-title"},e.name)))})))},r}(t.Component),On=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},t.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Tn=function(e){return t.createElement("div",{className:"epi-table__toolbar"},t.createElement("div",null,e.contextActions&&e.selectedCount>0?t.createElement("div",{className:"action-buttons"},e.contextActions.map((function(e,r){return t.createElement(f.TextButton,{outlined:!0,key:r,onClick:function(){e.clickHandler&&e.clickHandler()}},e.title)}))):t.createElement("div",null,e.buttons&&e.buttons.map((function(e,r){return t.createElement(f.TextButton,{key:r,outlined:!0,onClick:function(){e.clickHandler()}},e.title)})))),e.searchInput&&t.createElement("div",null,t.createElement("div",{className:"search-input"},t.createElement("div",{className:"search-icon"},t.createElement(On,null)),t.createElement(s.InputBase,{placeholder:e.searchInput.placeholder}))))},wn=function(e){function r(r){var n=e.call(this,r)||this;return n.foundation=new ne.MDCDataTableFoundation,n.rowElements=[],n.isSelectedAll=!1,n.isSelectedRows=new Array,n.selectedCount=0,n.tableInstance={getSelectedRows:function(){var e=new Array;return n.isSelectedRows.forEach((function(t,r){!0===t&&n.data[r]&&e.push(n.data[r])})),e},setRowSelected:function(e,t){n.isSelectedRows[e]!==t&&(!0===t?(n.selectedCount++,n.selectedCount===n.data.length&&(n.isSelectedAll=!0)):(n.selectedCount--,!0===n.isSelectedAll&&(n.isSelectedAll=!1))),n.isSelectedRows[e]=t,n.props.selectableRowsPreSelectedField&&(n.data[e][n.props.selectableRowsPreSelectedField]=t),n.props.onRowSelected&&n.props.onRowSelected(e,t),n.forceUpdate()},setHeaderRowChecked:function(e){n.isSelectedAll=e;for(var t=0;t<n.data.length;t++)n.isSelectedRows[t]=e;n.selectedCount=e?n.data.length:0,n.props.selectableRowsPreSelectedField&&n.data.forEach((function(t){t[n.props.selectableRowsPreSelectedField]=e})),n.props.onHeaderRowSelected&&n.props.onHeaderRowSelected(e),n.forceUpdate()},addRow:function(e){n.data.push(e),n.initDataTable(),n.forceUpdate()},removeRow:function(e){n.data.splice(e,1),n.isSelectedRows.splice(e,1),n.initDataTable(),n.forceUpdate()},getData:function(){return n.data},refresh:function(){n.forceUpdate()}},n.defaultSettings={columns:[],data:[]},n.dataTableElement=t.createRef(),n.data=n.props.data,n.initDataTable(),n}return Te(r,e),r.prototype.componentDidMount=function(){this.instance=new ne.MDCDataTable(this.dataTableElement.current,new ne.MDCDataTableFoundation(this.adapter)),this.props.tableInstance&&Object.assign(this.props.tableInstance,this.tableInstance)},r.prototype.componentWillReceiveProps=function(e){this.data=e.data},Object.defineProperty(r.prototype,"adapter",{get:function(){return{}},enumerable:!0,configurable:!0}),r.prototype.initDataTable=function(){var e=this;this.props.selectableRowsPreSelectedField&&(this.selectedCount=0,this.data.map((function(t,r){!0===t[e.props.selectableRowsPreSelectedField]&&(e.selectedCount++,e.isSelectedRows[r]=!0)})))},r.prototype.render=function(){var e=this,r=this.props.contextActions&&this.props.toolbar;return t.createElement("div",{ref:this.dataTableElement},t.createElement("div",{className:"mdc-data-table epi-table"},r&&t.createElement(Tn,Ge({},this.props.toolbar,{contextActions:this.props.contextActions,selectedCount:this.selectedCount})),t.createElement("table",{className:"mdc-data-table__table"},t.createElement("thead",null,t.createElement(An,{columns:this.props.columns,selectableRows:this.props.selectableRows,isSelectedAll:this.isSelectedAll,indeterminate:this.selectedCount>0&&!this.isSelectedAll,setHeaderRowChecked:function(t){return e.tableInstance.setHeaderRowChecked(t)}})),t.createElement("tbody",{className:"mdc-data-table__content"},this.data.map((function(r,n){return t.createElement(bn,{key:n,rowData:r,rowIndex:n,columns:e.props.columns,isRowSelected:!!e.isSelectedRows[n],selectableRows:e.props.selectableRows,setRowSelected:function(t,r){return e.tableInstance.setRowSelected(t,r)},onRowClicked:function(){e.props.onRowClicked&&e.props.onRowClicked(r,n)},onRowDoubleClicked:function(){e.props.onRowDoubleClicked&&e.props.onRowDoubleClicked(r,n)}})}))))))},r}(t.Component),Gn=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={editingRowIndex:-1,currentEditingRowValue:""},r.onValueCellChange=function(e){r.setState({currentEditingRowValue:e.currentTarget.value})},r.renderValueCell=function(e,n){return e?t.createElement(T.TextValidator,{name:"valueInput",variant:"outlined",defaultValue:n,value:r.state.currentEditingRowValue,onChange:r.onValueCellChange,validators:[Vt.Required],errorMessages:[Vt.getValidationMessage(Vt.Required)],withRequiredValidator:!0}):n},r.renderActionsCell=function(e,n,s,a){return e?t.createElement(t.Fragment,null,t.createElement(J,{title:"Save"},t.createElement(Z,{onClick:function(){return r.saveItem(s)}},t.createElement(te,null))),t.createElement(J,{title:"Cancel"},t.createElement(Z,{onClick:r.cancelEditing},t.createElement(re,null)))):-1===r.state.editingRowIndex&&t.createElement(t.Fragment,null,t.createElement(J,{title:"Edit item"},t.createElement(Z,{onClick:function(){return r.editRow(n,a)}},t.createElement($,null))),t.createElement(J,{title:"Delete item"},t.createElement(Z,{onClick:function(){return r.deleteRow(s)}},t.createElement(ee,null))))},r.saveItem=function(e){if(r.state.currentEditingRowValue){var t=Object.assign({},r.props.itemsObject);t[e]=r.state.currentEditingRowValue,r.props.onItemsUpdated(t),r.cancelEditing()}},r.cancelEditing=function(){r.setState({editingRowIndex:-1})},r.editRow=function(e,t){r.setState({editingRowIndex:e,currentEditingRowValue:t})},r.deleteRow=function(e){var t=Object.assign({},r.props.itemsObject);delete t[e],r.props.onItemsUpdated(t)},r}return Te(r,e),r.prototype.render=function(){var e=this,r=Object.keys(this.props.itemsObject),n=[{name:"Key",width:300,render:function(e){return e.key}},{name:"Value",render:function(t,r){var n=e.state.editingRowIndex===r;return e.renderValueCell(n,e.props.itemsObject[t.key])}}];this.props.isReadonly||n.push({name:"Options",width:150,right:!0,render:function(t,r){var n=e.state.editingRowIndex===r;return e.renderActionsCell(n,r,t.key,t.value)}});var s=r.map((function(t){return{key:t,value:e.props.itemsObject[t]}}));return t.createElement(wn,{data:s,columns:n})},r}(t.Component),Dn=function(e){function r(t){var r=e.call(this,t)||this;return r.validators=[],r.errorMessages=[],r.state={isDetailsDialogOpen:!1,itemsObject:Object.assign({},r.props.property.Value),inputKey:"",inputValue:"",loaded:!1},r.openDetailsDialog=function(){r.setState({isDetailsDialogOpen:!0}),setTimeout((function(){r.setState({loaded:!0})}),100)},r.closeDetailsDialog=function(){r.setState({isDetailsDialogOpen:!1})},r.updateItemsObject=function(e){r.setState({itemsObject:e})},r.addItem=function(e){var t=r.state.inputKey.toLowerCase().trim(),n=r.state.inputValue;if(!r.state.itemsObject[t]){var s=Object.assign({},r.state.itemsObject);s[t]=n,r.setState({itemsObject:s})}},r.onInputKeyChange=function(e){r.setState({inputKey:e.currentTarget.value})},r.onInputValueChange=function(e){r.setState({inputValue:e.currentTarget.value})},r.saveProperty=function(){var e=Object.assign({},r.props.property);e.Value=r.state.itemsObject,r.props.onPropertyChanged(e),r.closeDetailsDialog()},r.handleClosingDetailsDialog=function(){var e=Object.assign({},r.props.property.Value);r.setState({itemsObject:e}),r.closeDetailsDialog()},r.validators.push(Vt.Required),r.errorMessages.push(Vt.getValidationMessage(Vt.Required)),r}return Te(r,e),r.prototype.shouldComponentUpdate=function(e,t){return e.property.Value!==this.props.property.Value&&e.property.Value!==t.itemsObject&&(t.itemsObject=Object.assign({},e.property.Value),t.inputKey="",t.inputValue=""),!0},r.prototype.render=function(){var e=this.props.isReadonly;return t.createElement("div",null,t.createElement(s.Typography,null,this.props.property.FriendlyName,this.props.property.AllowNulls?"":" *"),t.createElement(f.TextButton,{outlined:!0,onClick:this.openDetailsDialog},"View Details"),t.createElement(ar,{title:"Dictionary Items",open:this.state.isDetailsDialogOpen,okLabel:"Save",onOK:this.saveProperty,closeLabel:"Close",onClose:this.handleClosingDetailsDialog,large:!0},t.createElement(s.Grid,{container:!0,spacing:16},!e&&t.createElement(s.Grid,{item:!0,xs:12},this.state.loaded&&t.createElement(T.ValidatorForm,{onSubmit:this.addItem},t.createElement(s.Grid,{container:!0,spacing:24,alignItems:"center"},t.createElement(s.Grid,{item:!0,xs:12,sm:4},t.createElement(T.TextValidator,{fullWidth:!0,variant:"outlined",label:"Key",name:"inputKey",value:this.state.inputKey,onChange:this.onInputKeyChange,validators:this.validators,errorMessages:this.errorMessages,withRequiredValidator:!0})),t.createElement(s.Grid,{item:!0,xs:12,sm:4},t.createElement(T.TextValidator,{fullWidth:!0,variant:"outlined",label:"Value",name:"inputValue",value:this.state.inputValue,onChange:this.onInputValueChange,validators:this.validators,errorMessages:this.errorMessages,withRequiredValidator:!0})),t.createElement(s.Grid,{item:!0,xs:12,sm:4},t.createElement(f.TextButton,{unelevated:!0,type:"submit"},"Add item"))))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(Gn,{isReadonly:e,itemsObject:this.state.itemsObject,onItemsUpdated:this.updateItemsObject})))))},r}(t.Component),Pn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedIds:t.props.property.Value||[]},t.handleChange=function(e){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){return this.props.property.DataType===vn.DictionaryMultiValue||this.props.property.DataType===vn.EnumMultiValue?this.setState({selectedIds:e.target.value}):this.setState({selectedIds:[e.target.value]}),[2]}))}))},t.isSelectedItemsChanged=function(e,t){var r=!1;if(e.length!==t.length)r=!0;else for(var n=0,s=e;n<s.length;n++){var a=s[n];if(-1===t.indexOf(a)){r=!0;break}}return r},t.onSelectBlurHandler=function(e){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){return this.isSelectedItemsChanged(this.props.property.Value||[],this.state.selectedIds)&&((e=Object.assign({},this.props.property)).Value=this.state.selectedIds,this.props.onPropertyChanged(e)),[2]}))}))},t}return Te(r,e),r.prototype.shouldComponentUpdate=function(e,t){return e.property.Value!==this.props.property.Value&&e.property.Value!==t.selectedIds&&(t.selectedIds=e.property.Value||[]),!0},r.prototype.render=function(){var e=this;return t.createElement(s.FormControl,{fullWidth:!0,variant:"outlined"},t.createElement(s.InputLabel,null,this.props.property.FriendlyName),t.createElement(s.Select,{input:t.createElement(s.OutlinedInput,{labelWidth:150}),multiple:this.props.property.DataType===vn.DictionaryMultiValue||this.props.property.DataType===vn.EnumMultiValue,value:this.state.selectedIds,onChange:this.handleChange,onBlur:this.onSelectBlurHandler},this.props.property.DictionaryItems.map((function(r){return t.createElement(s.MenuItem,{disabled:e.props.isReadonly,key:r.Id,value:r.Id},r.Value)}))))},r}(t.Component),Nn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={value:!0===t.props.property.Value?"true":!1===t.props.property.Value?"false":void 0},t.onChangeHandler=function(e){t.setState({value:e.currentTarget.value});var r=Object.assign({},t.props.property);r.Value="true"===e.currentTarget.value||"false"!==e.currentTarget.value&&null,t.props.onPropertyChanged(r)},t}return Te(r,e),r.prototype.shouldComponentUpdate=function(e,t){return e.property.Value!==this.props.property.Value&&e.property.Value!==t.value&&(t.value=!0===e.property.Value?"true":!1===e.property.Value?"false":void 0),!0},r.prototype.render=function(){return t.createElement("div",null,t.createElement(ie,{style:{fontSize:"0.75rem"},component:"label"},this.props.property.FriendlyName),t.createElement(se,{value:this.state.value,onChange:this.onChangeHandler,row:!0},t.createElement(ae,{style:{marginLeft:"0px",marginRight:"0px"},value:"true",control:t.createElement(oe,{color:"primary"}),label:"True",labelPlacement:"start",disabled:this.props.isReadonly}),t.createElement(ae,{value:"false",control:t.createElement(oe,{color:"primary"}),label:"False",labelPlacement:"start",disabled:this.props.isReadonly})))},r}(t.Component),Rn=function(e){function r(r){var n=e.call(this,r)||this;return n.renderInput=function(e){var r={property:e,isReadonly:n.props.isReadonly,onPropertyChanged:n.props.onPropertyChanged};return[vn.Decimal,vn.Float,vn.Int,vn.Money,vn.Integer,vn.Email,vn.URL,vn.ShortString,vn.LongString,vn.LongHtmlString].indexOf(e.DataType)>=0?t.createElement(Sn,Ge({},r)):[vn.Date,vn.DateTime].indexOf(e.DataType)>=0?t.createElement(In,Ge({},r)):e.DataType===vn.DictionaryMultiValue||e.DataType===vn.EnumMultiValue||e.DataType===vn.DictionarySingleValue||e.DataType===vn.EnumSingleValue?t.createElement(Pn,Ge({},r)):e.DataType===vn.Boolean?t.createElement(Nn,Ge({},r)):e.DataType===vn.StringDictionary?t.createElement(Dn,Ge({},r)):t.createElement(s.Grid,null,t.createElement(s.Typography,null,e.FriendlyName),t.createElement(s.Typography,null,e.Value))},n}return Te(r,e),r.prototype.render=function(){return this.renderInput(this.props.property)},r}(t.Component),xn=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={isExpanded:!r.props.isCollapsible,hasShowAll:!0,propertiesBody:t.createRef()},r.togglePanelHandler=function(e){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){return this.setState({isExpanded:!this.state.isExpanded}),[2]}))}))},r}return Te(r,e),r.prototype.updateLayout=function(){this.state.propertiesBody.current&&(this.state.propertiesBody.current.clientHeight<140?this.setState({hasShowAll:!1}):this.setState({hasShowAll:!0}))},r.prototype.componentDidMount=function(){this.updateLayout(),window.addEventListener("resize",this.updateLayout.bind(this))},r.prototype.render=function(){var e=this;return t.createElement(T.ValidatorForm,{instantValidate:!0,onSubmit:function(){return null}},t.createElement(s.Card,null,t.createElement(s.Collapse,{in:this.state.isExpanded,collapsedHeight:"180px"},t.createElement("div",{ref:this.state.propertiesBody},t.createElement(s.CardContent,null,t.createElement(s.Grid,{container:!0,className:this.props.classes.expandableContainer},this.props.properties.map((function(r){return t.createElement(s.Grid,{key:r.Id,item:!0,xs:12,sm:6,lg:4,className:e.props.classes.expandableItem},t.createElement(Rn,{property:r,isReadonly:e.props.isReadonly||!r.IsEditable,onPropertyChanged:e.props.onPropertyChanged}))})))))),this.props.isCollapsible&&this.state.hasShowAll&&t.createElement(s.CardActions,null,t.createElement(f.TextButton,{outlined:!0,className:this.props.classes.toggleButton,onClick:this.togglePanelHandler},"Show ",this.state.isExpanded?"Less":"All"))))},r}(t.Component),Ln=s.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({expandableContainer:{overflowY:"hidden",paddingTop:"8px"},expandableItem:{marginBottom:10,padding:"0 20px 20px 0px"},toggleButton:{margin:"0 auto",width:"100%",maxWidth:"250px"}})}))(n.connect((function(e,t){return{isReadonly:void 0!==t.isReadonly&&t.isReadonly,isCollapsible:void 0===t.isCollapsible||t.isCollapsible,properties:t.properties,onPropertyChanged:t.onPropertyChanged,classes:t.classes}}))(xn)),Mn=function(e){return e?e.replace(/([A-Z])/g," $1").trim():""},Fn=0,kn=o.withStyles((function(e){return s.createStyles({root:{flexGrow:1},selectContainer:{display:"inline"},currency:{height:30}})}))(n.connect((function(e,t){return{currencies:e.orderGroup.currencies,selectedCurrency:e.orderGroup.currentOrderGroup.Currency,classes:t.classes,updateInputValue:t.updateInputValue}}))((function(e){var r=e.currencies.map((function(e){return{label:e.Code,value:e.Code}}));return e.currencies.length>0?t.createElement(_t,{label:"Currency","refresh-counter":Fn++,value:e.selectedCurrency,options:r,onChange:function(t){e.updateInputValue(t)}}):t.createElement(t.Fragment,null)}))),_n=n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup;return{orderGroupType:r.Type,orderGroupId:r.OrderGroupId,newOrderCurrency:t.newOrderCurrency,close:t.onClose}}))((function(e){return t.createElement(ir,{title:"Update Currency",closeButtonLabel:"Cancel",confirmButtonLabel:"Update",onConfirm:function(){return Pe(void 0,void 0,void 0,(function(){var t,r,n,s;return Ne(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),t=e.orderGroupId,r=e.orderGroupType,[4,Zt.OrderGroup.updateCurrencyForOrder(r,t,e.newOrderCurrency)];case 1:return 200!==a.sent().status?[3,3]:[4,Zt.OrderGroup.getSingleOrderGroup(r,t)];case 2:n=a.sent(),e.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(n)),n.ValidationMessages.length>0&&e.dispatch(rt.ApplicationActions.showNotification(n.ValidationMessages)),a.label=3;case 3:return[3,5];case 4:return s=a.sent(),e.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,5];case 5:return e.close(!0),[2]}}))}))},onClose:function(){return e.close(!1)}},t.createElement(s.Typography,{variant:"body1"},t.createElement("div",null,t.createElement("b",null,"Are you sure you want to change the currency?")),"Changing currency could affect shipping and payment methods, prices or searched items."))})),Vn=n.connect((function(e,t){return{orderGroupId:e.orderGroup.currentOrderGroup.OrderGroupId,newOrderMarket:t.newOrderMarket,close:t.onClose}}))((function(e){return t.createElement(ir,{title:"Update Market",closeButtonLabel:"Cancel",confirmButtonLabel:"Update",onConfirm:function(){return Pe(void 0,void 0,void 0,(function(){var t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,Zt.Cart.updateMarketForCart(e.orderGroupId,e.newOrderMarket)];case 1:return 200!==s.sent().status?[3,4]:[4,Zt.OrderGroup.getSingleOrderGroup("Cart",e.orderGroupId)];case 2:return t=s.sent(),e.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),t.ValidationMessages.length>0&&e.dispatch(rt.ApplicationActions.showNotification(t.ValidationMessages)),[4,Zt.Currency.getCurrencies(e.newOrderMarket)];case 3:r=s.sent(),e.dispatch(rt.OrderGroupActions.setCurrencies(r)),s.label=4;case 4:return[3,6];case 5:return n=s.sent(),e.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,6];case 6:return e.close(!0),[2]}}))}))},onClose:function(){return e.close(!1)}},t.createElement(s.Typography,{variant:"body1"},t.createElement("div",null,t.createElement("b",null,"Are you sure you want to change the market?")),"Changing market could affect shipping and payment methods, prices and items that can be added to the cart."))})),Un=o.withStyles((function(e){return s.createStyles({})}))(n.connect((function(e,t){return{markets:e.market.markets,selectedMarket:t.selectedMarket,classes:t.classes,updateInputValue:t.updateInputValue}}))((function(e){var r=e.markets,n=e.selectedMarket,s=r.map((function(e){return{label:e.Name,value:e.Id}}));return t.createElement(_t,{label:"Choose Market",fullWidth:!0,options:s,value:n,onChange:function(t){return e.updateInputValue(t)}})}))),Bn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedCurrency:"",isUpdateCurrencyDialogOpen:!1,selectedMarket:"",isUpdateMarketDialogOpen:!1},t.customerEditLink="/customers/"+t.props.orderGroup.Customer.Id+"/info?orderType="+t.props.orderGroup.Type+"&orderId="+t.props.orderGroup.OrderGroupId,t.customPropertyChangedHandler=function(e){return Pe(t,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Zt.MetaField.updateOrderGroupMetaFields(this.props.orderGroup.OrderGroupId,this.props.orderGroup.Type,e)];case 1:return n.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 2:return t=n.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),[3,4];case 3:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,4];case 4:return[2]}}))}))},t.updateMarketForCart=function(e){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){return e===this.props.orderGroup.MarketId||this.setState({selectedMarket:e,isUpdateMarketDialogOpen:!0}),[2]}))}))},t.updateCurrencyForOrder=function(e){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){return e===this.props.orderGroup.Currency||this.setState({selectedCurrency:e,isUpdateCurrencyDialogOpen:!0}),[2]}))}))},t.closeOrderMarketUpdateDialogHandler=function(e){t.setState({isUpdateMarketDialogOpen:!1}),e||t.setState({selectedMarket:t.props.orderGroup.MarketId})},t.closeOrderCurrencyUpdateDialogHandler=function(e){t.setState({isUpdateCurrencyDialogOpen:!1}),e||t.setState({selectedCurrency:t.props.orderGroup.Currency})},t}return Te(r,e),r.prototype.render=function(){return t.createElement(d,{container:!0,direction:"column",spacing:16},!this.props.createMode&&t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Order Number"),t.createElement(s.Typography,{className:this.props.classes.itemData},this.props.orderGroup.OrderNumber?this.props.orderGroup.OrderNumber:this.props.orderGroup.OrderGroupId)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Created Date"),t.createElement(s.Typography,{className:this.props.classes.itemData},X(this.props.orderGroup.Created).format("LLL"))),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Status"),t.createElement(s.Typography,{className:this.props.classes.itemData},Mn(this.props.orderGroup.OrderStatus))),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Items"),t.createElement(En,{amount:this.props.orderGroup.ItemsTotal,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Line Item Discounts"),t.createElement(En,{amount:this.props.orderGroup.LineItemDiscounts,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Order Level Discounts"),t.createElement(En,{amount:this.props.orderGroup.OrderLevelDiscounts,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Discount Total"),t.createElement(En,{amount:this.props.orderGroup.DiscountsTotal,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Taxes Total"),t.createElement(En,{amount:this.props.orderGroup.TaxTotal,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},this.props.orderGroup.PricesIncludeTax?"Total excluding shipping (includes tax)":"Total excluding shipping and tax"),t.createElement(En,{amount:this.props.orderGroup.TotalExcludingShippingAndTax,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Shipping Cost"),t.createElement(En,{amount:this.props.orderGroup.ShippingTotal,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Shipping Discounts"),t.createElement(En,{amount:this.props.orderGroup.ShippingDiscount,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Handling Total"),t.createElement(En,{amount:this.props.orderGroup.HandlingTotal,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Order Total"),t.createElement(En,{amount:this.props.orderGroup.Total,className:this.props.classes.itemData})),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Market"),!0===this.props.createMode&&"PaymentPlan"===this.props.orderGroup.Type?t.createElement("span",{className:this.props.classes.itemData},t.createElement(Un,{selectedMarket:this.props.orderGroup.MarketId,updateInputValue:this.updateMarketForCart})):t.createElement(s.Typography,{className:this.props.classes.itemData},this.props.orderGroup.MarketName),this.state.isUpdateMarketDialogOpen&&t.createElement(Vn,{newOrderMarket:this.state.selectedMarket,onClose:this.closeOrderMarketUpdateDialogHandler})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Currency"),this.props.isReadonly?t.createElement(s.Typography,{className:this.props.classes.itemData},this.props.orderGroup.Currency):t.createElement("span",{className:this.props.classes.itemData},t.createElement(kn,{updateInputValue:this.updateCurrencyForOrder})),this.state.isUpdateCurrencyDialogOpen&&t.createElement(_n,{newOrderCurrency:this.state.selectedCurrency,onClose:this.closeOrderCurrencyUpdateDialogHandler})),!this.props.createMode&&this.props.orderGroup.Properties&&this.props.orderGroup.Properties.length>0&&t.createElement(d,{item:!0},t.createElement(s.Typography,{variant:"subtitle1"},"Custom Properties"),t.createElement(Ln,{properties:this.props.orderGroup.Properties,onPropertyChanged:this.customPropertyChangedHandler,isReadonly:this.props.isReadonly,isCollapsible:!1})))},r}(t.Component),Hn=s.withStyles((function(){return s.createStyles({itemLabel:{width:"200px",display:"inline-block",fontSize:14},itemData:{display:"inline-block",fontSize:14}})}))(n.connect()(Bn)),qn=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isUpdateMarketDialogOpen:!1,isUpdateCurrencyDialogOpen:!1,selectedMarket:"",selectedCurrency:""},t.updateMarketForCart=function(e){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){return e===this.props.orderGroup.MarketId||this.setState({selectedMarket:e,isUpdateMarketDialogOpen:!0}),[2]}))}))},t.updateCurrencyForOrder=function(e){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){return e===this.props.orderGroup.Currency||this.setState({selectedCurrency:e,isUpdateCurrencyDialogOpen:!0}),[2]}))}))},t.closeOrderMarketUpdateDialogHandler=function(e){t.setState({isUpdateMarketDialogOpen:!1}),e||t.setState({selectedMarket:t.props.orderGroup.MarketId})},t.closeOrderCurrencyUpdateDialogHandler=function(e){t.setState({isUpdateCurrencyDialogOpen:!1}),e||t.setState({selectedCurrency:t.props.orderGroup.Currency})},t}return Te(r,e),r.prototype.render=function(){return t.createElement(d,{container:!0,direction:"column",spacing:16},t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Cart Number"),t.createElement(s.Typography,{className:this.props.classes.itemData,variant:"caption"},this.props.orderGroup.OrderGroupId)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Created Date"),t.createElement(s.Typography,{className:this.props.classes.itemData,variant:"caption"},X(this.props.orderGroup.Created).format("LLL"))),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Order Level Discounts"),t.createElement(En,{className:this.props.classes.itemData,amount:this.props.orderGroup.OrderLevelDiscounts,align:"left",variant:"caption"})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Cart Total"),t.createElement(En,{className:this.props.classes.itemData,amount:this.props.orderGroup.Total,align:"left",variant:"caption"})),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Market"),t.createElement("span",{className:this.props.classes.itemData},t.createElement(Un,{selectedMarket:this.props.orderGroup.MarketId,updateInputValue:this.updateMarketForCart})),this.state.isUpdateMarketDialogOpen&&t.createElement(Vn,{newOrderMarket:this.state.selectedMarket,onClose:this.closeOrderMarketUpdateDialogHandler})),t.createElement(d,{item:!0},t.createElement(s.Typography,{className:this.props.classes.itemLabel,variant:"caption"},"Currency"),t.createElement("span",{className:this.props.classes.itemData},t.createElement(kn,{updateInputValue:this.updateCurrencyForOrder})),this.state.isUpdateCurrencyDialogOpen&&t.createElement(_n,{newOrderCurrency:this.state.selectedCurrency,onClose:this.closeOrderCurrencyUpdateDialogHandler})))},r}(t.Component),Wn=s.withStyles((function(e){e.spacing;return s.createStyles({itemLabel:{width:"200px",display:"inline-block",fontSize:14},itemData:{display:"inline-block",fontSize:14}})}))(qn),jn=function(e){var r="/customers/"+e.orderGroup.Customer.Id+"/info?orderType="+e.orderGroup.Type+"&orderId="+e.orderGroup.OrderGroupId;return t.createElement(d,{container:!0,direction:"column"},t.createElement(d,{item:!0},t.createElement(d,{container:!0,alignItems:"center"},t.createElement(d,{item:!0},t.createElement(s.Typography,{variant:"h6"},"Customer Information")),null!=e.orderGroup.Customer.Email&&t.createElement(d,{item:!0},t.createElement(J,{title:"Edit Customer Information"},t.createElement(D.Link,{to:r,onClick:function(){Qr(mt)}},t.createElement(f.IconButton,null,t.createElement(f.EditIcon,{style:{width:"16px"}}))))))),t.createElement(d,{item:!0},t.createElement(s.Card,null,t.createElement(s.CardContent,null,t.createElement(d,{container:!0,spacing:24},t.createElement(d,{item:!0},t.createElement(s.Typography,{variant:"subtitle1"},"Customer: ",e.orderGroup.Customer.FullName)),t.createElement(d,{item:!0},t.createElement(s.Typography,{variant:"subtitle1"},"Email Address: ",e.orderGroup.Customer.Email)))))))};!function(e){e.OnHold="OnHold",e.PartiallyShipped="PartiallyShipped",e.InProgress="InProgress",e.Completed="Completed",e.Cancelled="Cancelled",e.AwaitingExchange="AwaitingExchange"}(Cn||(Cn={}));var Yn,zn=Cn,Qn=[{label:"None",value:"None"},{label:"Days",value:"Days"},{label:"Weeks",value:"Weeks"},{label:"Months",value:"Months"},{label:"Years",value:"Years"},{label:"Custom1",value:"Custom1"},{label:"Custom2",value:"Custom2"}],Kn=b.object().shape({CycleMode:b.string().required(Vt.getValidationMessage(Vt.Required)),CycleLength:b.number().required(Vt.getValidationMessage(Vt.Required)).integer(Vt.getValidationMessage(Vt.IsInteger)).min(0),MaxCyclesCount:b.number().required(Vt.getValidationMessage(Vt.Required)).integer(Vt.getValidationMessage(Vt.IsInteger)).min(0),CompletedCyclesCount:b.number().required(Vt.getValidationMessage(Vt.Required)).integer(Vt.getValidationMessage(Vt.IsInteger)).min(0),StartDate:b.date().nullable(),EndDate:b.date().nullable().when("StartDate",(function(e,t){return e?t.min(e,"The End Date must greater than or equal to the Start Date."):t})),LastTransactionDate:b.date().nullable(),IsActive:b.boolean()}),Xn=function(e){function r(t){var r=e.call(this,t)||this;r.datetimeFormat="MMM DD, YYYY hh:mm A",r.initPaymentPlanSetting=function(){var e={CycleMode:"None",StartDate:null,EndDate:null,LastTransactionDate:null,IsActive:!1};return r.props.createMode?Object.assign(e,r.props.paymentPlanSetting):e={CycleMode:null==r.props.paymentPlan.CycleMode?"None":r.props.paymentPlan.CycleMode,CycleLength:r.props.paymentPlan.CycleLength,MaxCyclesCount:r.props.paymentPlan.MaxCyclesCount,CompletedCyclesCount:r.props.paymentPlan.CompletedCyclesCount,StartDate:r.props.paymentPlan.StartDate,EndDate:r.props.paymentPlan.EndDate,LastTransactionDate:r.props.paymentPlan.LastTransactionDate,IsActive:null!=r.props.paymentPlan.IsActive&&r.props.paymentPlan.IsActive},r.props.dispatch(rt.OrderGroupActions.setPaymentPlanSetting(e)),e},r.isEditable=function(){return r.props.paymentPlan.OrderStatus!==zn.Cancelled&&!r.props.createMode},r.isValid=function(){return r.validatePaymentPlanSetting(r.state.paymentPlanSetting,!0)},r.validatePaymentPlanSetting=function(e,t){var n={};try{return Kn.validateSync(e,{abortEarly:!1}),r.setState({errors:n}),!0}catch(s){return s.inner.map((function(r){(!t||null!==e[r.path]&&void 0!==e[r.path])&&(n[r.path]=r.message)})),r.setState({errors:n}),!1}},r.updatePaymentPlanSetting=function(e,t){return Pe(r,void 0,void 0,(function(){var r;return Ne(this,(function(n){switch(n.label){case 0:return(r=Ge({},this.state.paymentPlanSetting))[e]=t,[4,this.validatePaymentPlanSetting(r,!0)];case 1:return n.sent(),this.setState({paymentPlanSetting:r}),this.props.dispatch(rt.OrderGroupActions.setPaymentPlanSetting(r)),[2]}}))}))},r.saveChange=function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return this.validatePaymentPlanSetting(this.state.paymentPlanSetting)?[4,Zt.PaymentPlan.updatePaymentPlanSetting(this.props.paymentPlan.OrderGroupId,this.state.paymentPlanSetting)]:[3,2];case 1:e.sent(),this.setState({editMode:!1}),e.label=2;case 2:return[2]}}))}))},r.cancelEdit=function(){r.setState({editMode:!1,errors:{},paymentPlanSetting:r.initPaymentPlanSetting()})},r.props.validator&&(r.props.validator.validate=r.isValid);var n=r.initPaymentPlanSetting();return r.state={paymentPlanSetting:n,errors:{},editMode:r.props.editMode},r}return Te(r,e),r.prototype.render=function(){var e=this;return t.createElement(t.Fragment,null,t.createElement(d,{container:!0,direction:"column",className:this.props.classes.pageItem,spacing:16},t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Last Transaction Date"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(a.DateTimePicker,{fullWidth:!0,clearable:!0,variant:"outlined",disabled:!this.state.editMode,format:this.datetimeFormat,value:null==this.state.paymentPlanSetting.LastTransactionDate?null:X(this.state.paymentPlanSetting.LastTransactionDate),onChange:function(t){return e.updatePaymentPlanSetting("LastTransactionDate",null==t?null:t.toDate())}}),t.createElement(s.Typography,{variant:"caption"},"The date of last transaction"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.LastTransactionDate))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Completed Cycles*"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",disabled:!this.state.editMode,required:!0,type:"number",className:this.props.classes.itemData,value:this.state.paymentPlanSetting.CompletedCyclesCount,onChange:function(t){var r=Number(t.target.value);isNaN(r)||e.updatePaymentPlanSetting("CompletedCyclesCount",r)}}),t.createElement(s.Typography,{variant:"caption"},"Number of completed cycles"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.CompletedCyclesCount))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Cycle Length*"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",disabled:!this.state.editMode,required:!0,type:"number",value:this.state.paymentPlanSetting.CycleLength,onChange:function(t){var r=Number(t.target.value);isNaN(r)||e.updatePaymentPlanSetting("CycleLength",r)}}),t.createElement(s.Typography,{variant:"caption"},"Cycle length in units of cycle mode"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.CycleLength))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Plan Cycle"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(_t,{fullWidth:!0,disabled:!this.state.editMode,value:this.state.paymentPlanSetting.CycleMode,options:Qn,onChange:function(t){return e.updatePaymentPlanSetting("CycleMode",t)}}),t.createElement(s.Typography,{variant:"caption"},"Cycles mode is used to define period of recurring payments. Can be day, week, month or custom"))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Max Cycles*"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(s.TextField,{fullWidth:!0,variant:"outlined",disabled:!this.state.editMode,required:!0,type:"number",value:this.state.paymentPlanSetting.MaxCyclesCount,onChange:function(t){var r=Number(t.target.value);isNaN(r)||e.updatePaymentPlanSetting("MaxCyclesCount",r)}}),t.createElement(s.Typography,{variant:"caption"},"Number of maximum cycles to process"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.MaxCyclesCount))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Start Date"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(a.DateTimePicker,{clearable:!0,fullWidth:!0,variant:"outlined",format:this.datetimeFormat,disabled:!this.state.editMode,value:null==this.state.paymentPlanSetting.StartDate?null:X(this.state.paymentPlanSetting.StartDate),onChange:function(t){return e.updatePaymentPlanSetting("StartDate",null==t?null:t.toDate())},className:this.props.classes.itemData}),t.createElement(s.Typography,{variant:"caption"},"Plan start date"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.StartDate))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"End Date"),t.createElement("div",{className:this.props.classes.itemData},t.createElement(a.DateTimePicker,{clearable:!0,fullWidth:!0,variant:"outlined",format:this.datetimeFormat,disabled:!this.state.editMode,value:null==this.state.paymentPlanSetting.EndDate?null:X(this.state.paymentPlanSetting.EndDate),onChange:function(t){return e.updatePaymentPlanSetting("EndDate",null==t?null:t.toDate())}}),t.createElement(s.Typography,{variant:"caption"},"Plan end date"),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.EndDate))),t.createElement(d,{item:!0,className:this.props.classes.rowData},t.createElement(s.Typography,{className:this.props.classes.itemLabel},"Is Active"),t.createElement(f.Checkbox,{disabled:!this.state.editMode,checked:this.state.paymentPlanSetting.IsActive,onChange:function(t){return e.updatePaymentPlanSetting("IsActive",t.target.checked)}}))),this.isEditable()&&t.createElement(d,{container:!0,spacing:8},!this.state.editMode&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.setState({editMode:!0})}},"Edit")),this.state.editMode&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.cancelEdit},"Cancel")),this.state.editMode&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.saveChange},"Save"))))},r}(t.Component),Jn=s.withStyles((function(e){var t=e.spacing;return s.createStyles({pageItem:{padding:1*t.unit},rowData:{width:"100%",cellPadding:1*t.unit,display:"flex",alignItems:"flex-start"},itemLabel:{padding:1*t.unit,width:"200px",display:"inline-block",fontSize:14},itemData:{width:"400px",display:"inline-block",fontSize:14}})}))(n.connect((function(e,t){return{paymentPlan:t.paymentPlan,editMode:t.editMode,createMode:t.createMode,validator:t.validator,paymentPlanSetting:e.orderGroup.paymentPlanSetting,classes:t.classes}}))(Xn)),Zn=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({})}))(n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup;return{lineItemDeleteConfirmationIsVisible:e.application.lineItemDeleteConfirmationIsVisible,currentLineItemId:e.orderGroup.currentLineItemId,currentOrderGroupId:r.OrderGroupId,orderGroupType:r.Type,listedOrderGroups:e.orderGroup.listedOrderGroups,classes:t.classes}}))((function(e){var r=function(){e.dispatch(rt.ApplicationActions.closeDeleteLineItemConfirmationView())};return t.createElement("div",null,t.createElement(h,{open:e.lineItemDeleteConfirmationIsVisible,maxWidth:"sm",fullWidth:!0,onClose:r},t.createElement(ce,null,"Remove line item"),t.createElement(g,null,t.createElement(le,null,"This will remove the line item from the cart. This operation cannot be undone."),t.createElement(m,null,t.createElement(f.TextButton,{onClick:r},"Cancel"),t.createElement(f.TextButton,{unelevated:!0,onClick:function(){return Pe(void 0,void 0,void 0,(function(){var t,n,s;return Ne(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,Zt.OrderGroup.deleteLineItem(e.orderGroupType,e.currentOrderGroupId,e.currentLineItemId)];case 1:return(t=a.sent())&&t.data&&Array.isArray(t.data)&&t.data.length>0&&e.dispatch(rt.ApplicationActions.showNotification(t.data)),[4,Zt.OrderGroup.getSingleOrderGroup(e.orderGroupType,e.currentOrderGroupId)];case 2:return n=a.sent(),e.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(n)),r(),[3,4];case 3:return s=a.sent(),e.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,4];case 4:return[2]}}))}))}},"Remove")))))})));function $n(e){return!!e&&(e.OrderStatus===zn.Cancelled||e.OrderStatus===zn.Completed||e.OrderStatus===zn.OnHold)}function es(e){var t=!1;if(e&&Array.isArray(e.Forms)&&e.Forms.length>0){var r=e.Forms[0];if(Array.isArray(r.Shipments)&&r.Shipments.length>0)for(var n=0;n<r.Shipments.length;n++)if(Array.isArray(r.Shipments[n].LineItems)&&r.Shipments[n].LineItems.length>0){t=!0;break}}return t}function ts(e){if(!(e&&Array.isArray(e.Forms)&&e.Forms.length>0))return!1;var t=e.Forms[0];if(!(Array.isArray(t.Shipments)&&t.Shipments.length>0))return!1;var r=t.Shipments[0];return!!(Array.isArray(r.LineItems)&&r.LineItems.length>0)&&(!!r.ShippingAddress&&!(!r.ShippingMethodId||"00000000-0000-0000-0000-000000000000"===r.ShippingMethodId))}!function(e){e.OrderNumber="OrderNumber",e.CustomerName="CustomerName",e.Email="Email"}(Yn||(Yn={}));var rs,ns=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={orderDialog:{isOpen:!1,title:"",message:"",closeButtonLabel:"",confirmButtonLabel:"",onConfirm:function(){return null}}},t.goToOriginalOrder=function(){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(e){return zr.push(vt+"/"+this.props.orderGroup.ParentOrderId),[2]}))}))},t}return Te(r,e),r.prototype.updateOrderStatus=function(e){return Pe(this,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Zt.OrderGroup.updateOrderStatus(this.props.orderGroup.OrderGroupId,e)];case 1:return n.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 2:return t=n.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(t)),[3,4];case 3:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,4];case 4:return this.closeOrderDialog(),[2]}}))}))},r.prototype.closeOrderDialog=function(){this.setState({orderDialog:{isOpen:!1}})},r.prototype.showCancelConfirmDialog=function(){var e=this;this.setState({orderDialog:{isOpen:!0,title:"Cancel Order",message:"Are you sure you want to cancel this order?",closeButtonLabel:"Close",confirmButtonLabel:"Cancel Order",onConfirm:function(){return e.updateOrderStatus(zn.Cancelled)}}})},r.prototype.canShowHoldButton=function(){return this.props.orderGroup.OrderStatus===zn.InProgress||this.props.orderGroup.OrderStatus===zn.PartiallyShipped},r.prototype.canShowCancelButton=function(){return this.props.orderGroup.OrderStatus===zn.InProgress},r.prototype.canShowReleaseHoldButton=function(){return this.props.orderGroup.OrderStatus===zn.OnHold},r.prototype.render=function(){var e=this;return t.createElement("div",null,t.createElement(d,{container:!0,justify:"flex-end",spacing:8},this.props.orderGroup.IsExchangeOrder&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.goToOriginalOrder},"Go to original order")),this.canShowHoldButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.updateOrderStatus(zn.OnHold)}},"Hold")),this.canShowReleaseHoldButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.updateOrderStatus(zn.InProgress)}},"Release OnHold")),this.canShowCancelButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.showCancelConfirmDialog()}},"Cancel Order"))),this.state.orderDialog.isOpen&&t.createElement(ir,{title:this.state.orderDialog.title,closeButtonLabel:this.state.orderDialog.closeButtonLabel,confirmButtonLabel:this.state.orderDialog.confirmButtonLabel,onConfirm:this.state.orderDialog.onConfirm,onClose:function(){return e.setState({orderDialog:{isOpen:!1}})}},t.createElement(s.Typography,{variant:"body1"},this.state.orderDialog.message)))},r}(t.Component),ss=n.connect((function(e){return{orderGroup:e.orderGroup.currentOrderGroup}}))(ns),as=function(){return t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},t.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))},is=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.dropdownMenuAnchor=t.createRef(),r.dropdownOpen=!1,r.openActionDropdown=function(){r.dropdownOpen=!0,r.forceUpdate()},r.handleClose=function(){r.dropdownOpen=!1,r.forceUpdate()},r}return Te(r,e),r.prototype.render=function(){var e=this;return t.createElement("div",{className:"action-dropdown__container"},t.createElement("div",{className:"action-dropdown__anchor-icon mdc-ripple-surface",onClick:function(t){window.document.getElementsByTagName("body")[0].click(),t.stopPropagation(),e.openActionDropdown()},ref:this.dropdownMenuAnchor,"data-mdc-ripple-is-unbounded":!0},t.createElement(as,null)),t.createElement(f.MenuSurface,{anchorElement:this.dropdownMenuAnchor.current,anchorCorner:1,open:this.dropdownOpen,onClose:function(){return e.handleClose()},className:"epi-table-action-dropdown"},t.createElement(f.List,null,this.props.actions.map((function(r,n){return t.createElement(f.ListItem,{style:{cursor:"pointer"},key:n,onClick:function(t){t.stopPropagation(),e.handleClose(),r.clickHandler&&r.clickHandler(e.props.rowData,e.props.rowIndex)}},r.title)})))))},r}(t.Component);!function(e){e.Complete="Complete",e.Canceled="Canceled",e.AwaitingStockReturn="AwaitingStockReturn",e.AwaitingCompletion="AwaitingCompletion"}(rs||(rs={}));var os,cs=rs,ls=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={isLoadingResource:!0,returnForms:[],confirmDialog:{isOpen:!1,title:"",message:"",closeButtonLabel:"",confirmButtonLabel:"",onConfirm:function(){return null}},contextActionItems:Array()},r.tableInstance={},r.columns=[{name:"RETURN NO.",selector:"RMANumber"},{name:"CREATED DATE",selector:"Created",render:function(e){return X(e.Created).format("LLL")}},{name:"CREATED BY",selector:"Customer",render:function(e){return e.Customer.FullName}},{name:"STATUS",selector:"Status",render:function(e){return e.Status.Name}},{name:"RETURN TOTAL",selector:"Total",right:!0,render:function(e){return t.createElement(En,{amount:e.Total})}},{name:"",width:10,render:function(e,n){var s=[];return s.push({title:r.isReturnEditable(e)?"Edit":"View",clickHandler:function(t){r.goToDetail(e)}}),e.Status.Code!==cs.AwaitingStockReturn&&e.Status.Code!==cs.AwaitingCompletion||s.push({title:"Cancel",clickHandler:function(t){r.showCancelConfirmDialog(e.FormId)}}),e.Status.Code===cs.AwaitingStockReturn&&s.push({title:"Acknowledge Receipt Items",clickHandler:function(t){r.showAcknowledgeReceiptItemsConfirmDialog(e.FormId)}}),t.createElement(is,{actions:s,rowData:e,rowIndex:n})}}],r}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.loadReturns()];case 1:return e.sent(),[2]}}))}))},r.prototype.loadReturns=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:this.setState({isLoadingResource:!0}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Zt.OrderGroup.getReturns(this.props.orderGroupId)];case 2:return e=r.sent(),this.setState({returnForms:e.Results}),[3,4];case 3:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,4];case 4:return this.setState({isLoadingResource:!1}),[2]}}))}))},r.prototype.goToDetail=function(e){zr.push(vt+"/"+this.props.orderGroupId+"/returns/"+e.FormId)},r.prototype.closeDialog=function(){this.setState({confirmDialog:{isOpen:!1}})},r.prototype.cancelReturn=function(e){return Pe(this,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Zt.OrderGroup.cancelReturn(this.props.orderGroupId,e)];case 1:return r.sent(),[4,this.loadReturns()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,4];case 4:return this.closeDialog(),[2]}}))}))},r.prototype.showCancelConfirmDialog=function(e){var t=this;this.setState({confirmDialog:{isOpen:!0,title:"Cancel Return",message:"Are you sure you want to cancel this return?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return t.cancelReturn(e)}}})},r.prototype.updateAcknowledgeReceiptItems=function(e){return Pe(this,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Zt.OrderGroup.acknowledgeReceiptItems(this.props.orderGroupId,e)];case 1:return r.sent(),[4,this.loadReturns()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,4];case 4:return this.closeDialog(),[2]}}))}))},r.prototype.showAcknowledgeReceiptItemsConfirmDialog=function(e){var t=this;this.setState({confirmDialog:{isOpen:!0,title:"Acknowledge Receipt Items",message:"Are you sure you want to acknowledge receipt items?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return t.updateAcknowledgeReceiptItems(e)}}})},r.prototype.isReturnEditable=function(e){return e.Status.Code===cs.AwaitingStockReturn},r.prototype.showConfirmReturnBatch=function(e){var t=this;this.setState({confirmDialog:{isOpen:!0,title:"Cancel Return(s)",message:"Are you sure you want to cancel return(s)?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return Pe(t,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return[4,this.cancelReturnBatch(e)];case 1:return t.sent(),[2]}}))}))}}})},r.prototype.cancelReturnBatch=function(e){return Pe(this,void 0,void 0,(function(){var t,r,n,s;return Ne(this,(function(a){switch(a.label){case 0:a.trys.push([0,6,,7]),t=0,r=e,a.label=1;case 1:return t<r.length?(n=r[t],[4,Zt.OrderGroup.cancelReturn(this.props.orderGroupId,n.FormId)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[4,this.loadReturns()];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,7];case 7:return this.closeDialog(),[2]}}))}))},r.prototype.updateBatchAcknowledgeReceiptItems=function(e){return Pe(this,void 0,void 0,(function(){var t,r,n,s;return Ne(this,(function(a){switch(a.label){case 0:a.trys.push([0,6,,7]),t=0,r=e,a.label=1;case 1:return t<r.length?(n=r[t],[4,Zt.OrderGroup.acknowledgeReceiptItems(this.props.orderGroupId,n.FormId)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[4,this.loadReturns()];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,7];case 7:return this.closeDialog(),[2]}}))}))},r.prototype.showBatchAcknowledgeReceiptItemsConfirmDialog=function(e){var t=this;this.setState({confirmDialog:{isOpen:!0,title:"Acknowledge Receipt Items",message:"Are you sure you want to acknowledge receipt items?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return t.updateBatchAcknowledgeReceiptItems(e)}}})},r.prototype.onRowSelected=function(){var e=this,t=[],r=!0,n=!0,s=this.tableInstance.getSelectedRows();0===s.length&&(r=!1,n=!1),s.filter((function(e){return e.Status.Code!==cs.AwaitingStockReturn&&e.Status.Code!==cs.AwaitingCompletion})).length>0&&(r=!1),s.filter((function(e){return e.Status.Code!==cs.AwaitingStockReturn})).length>0&&(n=!1),r&&t.push({title:"Cancel Return(s)",clickHandler:function(){e.showConfirmReturnBatch(s)}}),n&&t.push({title:"Acknowledge Receipt Items",clickHandler:function(){e.showBatchAcknowledgeReceiptItemsConfirmDialog(s)}}),this.setState({contextActionItems:t})},r.prototype.render=function(){var e=this;return t.createElement("div",null,!this.state.isLoadingResource&&t.createElement(wn,{columns:this.columns,selectableRows:!0,onRowSelected:function(){return e.onRowSelected()},onHeaderRowSelected:function(){return e.onRowSelected()},contextActions:this.state.contextActionItems,data:this.state.returnForms,toolbar:{},tableInstance:this.tableInstance}),t.createElement(ar,{open:this.state.confirmDialog.isOpen,title:this.state.confirmDialog.title,closeLabel:this.state.confirmDialog.closeButtonLabel,okLabel:this.state.confirmDialog.confirmButtonLabel,onOK:this.state.confirmDialog.onConfirm,onClose:function(){return e.closeDialog()}},t.createElement(x,{variant:"body1"},this.state.confirmDialog.message)))},r}(t.Component),us=n.connect((function(e,t){return Ge({},t)}))(ls),ds=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={listedOrderGroups:Array()},r.columns=[{name:"No.",render:function(e){return t.createElement(x,null,"Order"===e.Type?e.OrderNumber:"# "+e.OrderGroupId)}},{name:"Created Date",render:function(e){return t.createElement(x,null,e.Created&&X(e.Created).format("LLL"))}},{name:"Amount",right:!0,render:function(e){return t.createElement(En,{amount:e.Total})}},{name:"Status",render:function(e){return t.createElement(x,null,Mn(e.OrderStatus))}},{width:50,render:function(e,n){var s=[{title:"View",clickHandler:function(t){r.goToDetail(e.OrderGroupId)}}];return t.createElement(is,{actions:s,rowData:e,rowIndex:n})}}],r}return Te(r,e),r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){return this.loadOrderGroups(),[2]}))}))},r.prototype.loadOrderGroups=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return e=this.props.paymentPlan.OrderGroupId,[4,Zt.PaymentPlan.getPurchaseOrders(e,0,500)];case 1:return t=r.sent(),this.setState({listedOrderGroups:t.Results}),[2]}}))}))},r.prototype.goToDetail=function(e){zr.push(vt+"/"+e+"?returnUrl="+Xr())},r.prototype.render=function(){return t.createElement("div",null,t.createElement(x,{variant:"h6"},"Orders History"),t.createElement("br",null),t.createElement(wn,{columns:this.columns,data:this.state.listedOrderGroups}))},r}(t.Component);!function(e){e.AwaitingInventory="AwaitingInventory",e.Cancelled="Cancelled",e.InventoryAssigned="InventoryAssigned",e.OnHold="OnHold",e.Packing="Packing",e.Released="Released",e.Shipped="Shipped"}(os||(os={}));var ps,hs=os,ms=function(e){function r(t){var r=e.call(this,t)||this;r.state={updateCustomerAddress:!1,loaded:!1,existCustomerAddress:!1,addToAddressBook:!1,customerAddressId:""},r.validator={validate:function(){return null}},r.setCurrentAddress=function(e){r.props.dispatch(rt.ContactActions.setCurrentAddress(e)),r.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!0))},r.handleFormChanges=function(e){var t=Object.assign({},r.props.address),n="checkbox"===e.target.type?e.target.checked:e.target.value;t[e.target.name]=n,r.setCurrentAddress(t)},r.saveChanges=function(){return Pe(r,void 0,void 0,(function(){var e,t,r,n,s,a,i,o,c,l=this;return Ne(this,(function(u){switch(u.label){case 0:if(null==(e=this.validator.validate()))return[2];t=Ge(Ge({},this.props.address),e),u.label=1;case 1:return u.trys.push([1,20,,21]),(r=this.props.orderGroup).IsDraft?(r.Forms[0].Shipments[0].ShippingAddress=Ge({},t),[4,Zt.OrderGroup.calculateOrder(r)]):[3,9];case 2:return n=u.sent(),a=n.Forms[0].Shipments[0].ShippingAddress,this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(n)),this.props.editMode?this.state.updateCustomerAddress?[4,this.updateContactAddress()]:[3,4]:[3,5];case 3:u.sent(),u.label=4;case 4:return this.props.onAddressChanged(a),[3,8];case 5:return this.state.addToAddressBook?[4,this.addContactAddress()]:[3,7];case 6:u.sent(),u.label=7;case 7:this.props.onAddressCreated(a),u.label=8;case 8:return[3,19];case 9:return this.props.editMode?this.state.updateCustomerAddress?[4,this.updateContactAddress()]:[3,11]:[3,14];case 10:u.sent(),u.label=11;case 11:return[4,Zt.OrderGroup.updateShippingAddress(r.Type,r.OrderGroupId,r.Forms[0].OrderFormId,this.props.shipment.ShipmentId,t)];case 12:return u.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(r.Type,r.OrderGroupId)];case 13:return i=u.sent(),s=i.Forms[0].Shipments.findIndex((function(e){return e.ShipmentId===l.props.shipment.ShipmentId})),a=i.Forms[0].Shipments[s].ShippingAddress,this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(i)),this.props.onAddressChanged(a),[3,19];case 14:return this.state.addToAddressBook?[4,this.addContactAddress()]:[3,16];case 15:u.sent(),u.label=16;case 16:return[4,Zt.OrderGroup.addShippingAddress(r.Type,r.OrderGroupId,r.Forms[0].OrderFormId,this.props.shipment.ShipmentId,t)];case 17:return u.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(r.Type,r.OrderGroupId)];case 18:i=u.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(i)),(o=i.Forms[0].Shipments.find((function(e){return l.props.shipment.ShipmentId===e.ShipmentId})))&&this.props.onAddressCreated(o.ShippingAddress),u.label=19;case 19:return this.props.onClose(),[3,21];case 20:return c=u.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(c.message)),[3,21];case 21:return[2]}}))}))},r.updateContactAddress=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=Ge({},this.props.address),this.state.customerAddressId&&(e.AddressId=this.state.customerAddressId),[4,Zt.Contact.updateContactAddress(this.props.orderGroup.Customer.Id,e.AddressId,e)];case 1:return t.sent(),[2]}}))}))},r.addContactAddress=function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Zt.Contact.addContactAddress(this.props.orderGroup.Customer.Id,this.props.address)];case 1:return e.sent(),[2]}}))}))};var n=r.props.orderGroup.Customer.Addresses.find((function(e){return e.Name+e.DisplayName===r.props.address.Name+r.props.address.DisplayName}));return n&&(r.state.customerAddressId=n.AddressId,r.state.existCustomerAddress=!0,r.state.updateCustomerAddress=!0),r}return Te(r,e),r.prototype.componentDidMount=function(){this.setState({loaded:!0})},r.prototype.render=function(){var e=this;return t.createElement(ar,{open:!0,title:this.props.editMode?"Edit Address":"Add New Address",okLabel:"Save",onOK:this.saveChanges,closeLabel:"Cancel",onClose:this.props.onClose},this.state.loaded&&t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,sm:12},t.createElement(ur,{address:this.props.address,validator:this.validator})),!this.props.orderGroup.Customer.IsAnonymous&&t.createElement(s.Grid,{item:!0,sm:12},this.props.editMode&&this.state.existCustomerAddress&&t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"UpdateCustomerAddress",checked:this.state.updateCustomerAddress,onChange:function(t){e.setState({updateCustomerAddress:t.target.checked})}}),label:"Also update customer's address"}),!this.props.editMode&&t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"AddToAddressBook",checked:this.state.addToAddressBook,onChange:function(t){e.setState({addToAddressBook:t.target.checked})}}),label:"Add to customer's address book"}))))},r}(t.Component),gs=n.connect((function(e,t){return{address:e.contact.currentAddress,orderGroup:e.orderGroup.currentOrderGroup,editMode:t.editMode,shipment:t.shipment,onClose:t.onClose,onAddressChanged:t.onAddressChanged,onAddressCreated:t.onAddressCreated}}))(ms),fs=function(e){function r(t){var r,n=e.call(this,t)||this;return n.shipmentForm={},n.shippingMethodRefreshCount=0,n.loadShippingMethods=function(e){return Pe(n,void 0,Promise,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return[4,Zt.Shipment.getShippingMethods(this.props.orderGroup.MarketId,e)];case 1:return t=r.sent(),this.setState({shippingMethods:t}),[2,t]}}))}))},n.customPropertyChangedHandler=function(e){return Pe(n,void 0,void 0,(function(){var t;return Ne(this,(function(r){return(t=this.state.properties.findIndex((function(t){return t.Name===e.Name})))>=0&&(this.state.properties[t]=Ge({},e),this.setState({properties:Re(this.state.properties)}),this.forceUpdate()),[2]}))}))},n.handleAddressChange=function(e){return Pe(n,void 0,void 0,(function(){var t,r,n=this;return Ne(this,(function(s){switch(s.label){case 0:return this.setState({addressId:e}),(t=this.props.orderGroup.OrderAddresses.find((function(t){return t.AddressId===e})))?[4,this.loadShippingMethods(t.CountryCode)]:(this.props.dispatch(rt.ApplicationActions.showNotification("AddressData not found")),[2]);case 1:return(r=s.sent()).length>0&&void 0===r.find((function(e){return e.ShippingMethodId===n.state.shippingMethodId}))&&this.setState({shippingMethodId:r[0].ShippingMethodId}),0===r.length&&this.setState({shippingMethodId:""}),[2]}}))}))},n.openEditAddressDialog=function(){var e=n.props.orderGroup.OrderAddresses.find((function(e){return e.AddressId===n.state.addressId}));e&&(n.props.dispatch(rt.ContactActions.setCurrentAddress(e)),n.setState({isShowAddressForm:!0,orderAddressEditMode:!0}))},n.openAddAddressDialog=function(){n.props.dispatch(rt.ContactActions.setCurrentAddress({})),n.setState({isShowAddressForm:!0,orderAddressEditMode:!1})},n.onAddressChanged=function(e){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(t){return this.props.orderGroup.IsDraft&&this.setState({shipment:Ge(Ge({},this.state.shipment),{ShippingAddress:e})}),this.setState({addressId:e.AddressId}),[2]}))}))},n.onAddressCreated=function(e){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return this.props.orderGroup.IsDraft&&this.setState({shipment:Ge(Ge({},this.state.shipment),{ShippingAddress:e})}),[4,this.handleAddressChange(e.AddressId)];case 1:return t.sent(),[2]}}))}))},n.state={shippingAddressDropdownIsExpanded:!1,shippingAddressFormVisible:!1,shippingMethodId:n.props.shipment.ShippingMethodId,addressId:(null===(r=n.props.shipment.ShippingAddress)||void 0===r?void 0:r.AddressId)||"",trackingNumber:n.props.shipment.ShipmentTrackingNumber,loaded:!1,errorMessage:"",shipment:JSON.parse(JSON.stringify(n.props.shipment)),selectedAddress:t.shipment.ShippingAddress,properties:Re(t.shipment.Properties),shippingMethods:[],isShowAddressForm:!1,orderAddressEditMode:!0},n}return Te(r,e),r.prototype.componentWillReceiveProps=function(e){var t,r,n,s;return Pe(this,void 0,void 0,(function(){return Ne(this,(function(a){return(null===(t=e.shipment.ShippingAddress)||void 0===t?void 0:t.AddressId)===(null===(r=this.props.shipment.ShippingAddress)||void 0===r?void 0:r.AddressId)&&(null===(n=e.shipment.ShippingAddress)||void 0===n?void 0:n.AddressId)!==this.state.addressId&&this.setState({addressId:(null===(s=e.shipment.ShippingAddress)||void 0===s?void 0:s.AddressId)||""}),[2]}))}))},r.prototype.componentDidMount=function(){var e;return Pe(this,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return this.setState({loaded:!0}),[4,this.loadShippingMethods(null===(e=this.state.selectedAddress)||void 0===e?void 0:e.CountryCode)];case 1:return t.sent(),[2]}}))}))},r.prototype.updateShipmentTrackingNumber=function(e){return Pe(this,void 0,void 0,(function(){var t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.Shipment.updateShipmentTrackingNumber(this.props.orderGroup.OrderGroupId,this.props.orderFormId,this.props.shipment.ShipmentId,e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.prototype.setDropdownIsExpanded=function(){this.setState({shippingAddressDropdownIsExpanded:!this.state.shippingAddressDropdownIsExpanded})},r.prototype.changeShippingMethodHandler=function(e){this.setState({shippingMethodId:e})},r.prototype.changeTrackingNumber=function(e){this.setState({trackingNumber:e})},r.prototype.validateForm=function(){var e="";return this.state.shippingMethodId&&"00000000-0000-0000-0000-000000000000"!==this.state.shippingMethodId||(e="Shipping Method is required."),this.state.addressId||(e="Shipping Address is required."),this.setState({errorMessage:e}),e},r.prototype.updateShipmentProperties=function(){return Pe(this,void 0,void 0,(function(){var e,t,r;return Ne(this,(function(n){switch(n.label){case 0:if(this.props.orderGroup.IsDraft)return this.setState({shipment:Ge(Ge({},this.state.shipment),{Properties:this.state.properties})}),[2];e=0,n.label=1;case 1:if(!(e<this.props.shipment.Properties.length))return[3,6];if(t=this.props.shipment.Properties[e],this.state.properties[e].Value===t.Value)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,Zt.MetaField.updateOrderShipmentMetaFields(this.props.orderGroup.OrderGroupId,this.props.orderGroup.Type,this.props.shipment.ShipmentId,this.state.properties[e])];case 3:return n.sent(),[3,5];case 4:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,5];case 5:return e++,[3,1];case 6:return[2]}}))}))},r.prototype.saveForm=function(){var e;return Pe(this,void 0,void 0,(function(){var t,r,n,s,a,i=this;return Ne(this,(function(o){switch(o.label){case 0:return this.shipmentForm.isFormValid()?""!==this.validateForm()?[2]:[4,this.updateShipmentProperties()]:[2];case 1:return o.sent(),this.state.addressId===(null===(e=this.props.shipment.ShippingAddress)||void 0===e?void 0:e.AddressId)?[3,5]:(t=this.props.orderGroup.OrderAddresses.find((function(e){return e.AddressId===i.state.addressId})))?this.props.orderGroup.IsDraft?(this.setState({shipment:Ge(Ge({},this.state.shipment),{ShippingAddress:t})}),[3,5]):[3,2]:(this.props.dispatch(rt.ApplicationActions.showNotification("AddressData not found")),[2]);case 2:return o.trys.push([2,4,,5]),[4,Zt.OrderGroup.updateShippingAddress(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,this.props.orderFormId,this.props.shipment.ShipmentId,t)];case 3:return o.sent(),[3,5];case 4:return r=o.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,5];case 5:return this.props.shipment.ShippingMethodId===this.state.shippingMethodId?[3,9]:this.props.orderGroup.IsDraft?(this.setState({shipment:Ge(Ge({},this.state.shipment),{ShippingMethodId:this.state.shippingMethodId})}),[3,9]):[3,6];case 6:return o.trys.push([6,8,,9]),[4,Zt.OrderGroup.updateShippingMethod(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,this.props.orderFormId,this.props.shipment.ShipmentId,this.state.shippingMethodId)];case 7:return o.sent(),[3,9];case 8:return n=o.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,9];case 9:return this.props.orderGroup.IsDraft?((s=JSON.parse(JSON.stringify(this.props.orderGroup))).Forms[0].Shipments[0]=this.state.shipment,[4,Zt.OrderGroup.calculateOrder(s)]):[3,11];case 10:return s=o.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(s)),[3,15];case 11:return this.state.trackingNumber===this.props.shipment.ShipmentTrackingNumber?[3,13]:[4,this.updateShipmentTrackingNumber(this.state.trackingNumber)];case 12:o.sent(),o.label=13;case 13:return[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 14:a=o.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(a)),o.label=15;case 15:return this.props.onClose(),[2]}}))}))},r.prototype.isEditable=function(){var e=this.props.shipment.OrderShipmentStatus.Name;return[hs.AwaitingInventory,hs.InventoryAssigned,hs.Released,hs.Packing].indexOf(e)>=0},r.prototype.render=function(){var e,r,n=this,a={title:this.isEditable()?"Edit Shipment":"View Shipment",open:!0,onClose:function(){n.props.onClose()}};this.isEditable()&&(a.onOK=function(){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.saveForm()];case 1:return e.sent(),[2]}}))}))},a.okLabel="Save");var i=this.props.orderGroup.OrderAddresses.map((function(e,t){return{label:e.DisplayName,value:e.AddressId}})),o=this.state.shippingMethods.map((function(e){return{label:e.DisplayName,value:e.ShippingMethodId}})),c=null===(e=this.props.extendUI)||void 0===e?void 0:e.topPlaceHolder,l=null===(r=this.props.extendUI)||void 0===r?void 0:r.bottomPlaceHolder;return t.createElement(ar,Ge({},a),this.state.loaded&&t.createElement("div",null,c&&t.createElement(c,null),t.createElement(T.ValidatorForm,{instantValidate:!0,onSubmit:function(){return null},ref:function(e){return n.shipmentForm=e}},t.createElement(s.Grid,{container:!0,spacing:16,direction:"row"},t.createElement(s.Grid,{item:!0,sm:12},t.createElement("span",{style:{color:"red"}},this.state.errorMessage)),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(_t,{label:"Choose Shipping Address *",fullWidth:!0,value:this.state.addressId,onChange:function(e){return n.handleAddressChange(e)},disabled:!this.isEditable(),options:i}),this.isEditable()&&t.createElement(s.Grid,{container:!0,spacing:16,justify:"flex-end"},t.createElement(s.Grid,{item:!0},t.createElement(s.Typography,{variant:"subtitle1",color:"primary",onClick:this.openAddAddressDialog,style:{cursor:"pointer",fontSize:"13px"}},"Add Address")),this.state.addressId&&t.createElement(s.Grid,{item:!0},t.createElement(s.Typography,{variant:"subtitle1",color:"primary",onClick:this.openEditAddressDialog,style:{cursor:"pointer",fontSize:"13px"}},"Edit Address")))),t.createElement(s.Grid,{item:!0,sm:12},t.createElement(_t,{fullWidth:!0,key:this.shippingMethodRefreshCount++,disabled:!this.isEditable(),label:"Choose Shipping Method *",value:this.state.shippingMethodId,onChange:function(e){return n.changeShippingMethodHandler(e)},options:o})),t.createElement(s.Grid,{item:!0,sm:12},"Order"===this.props.orderGroup.Type&&t.createElement(s.TextField,{label:"Tracking number",variant:"outlined",value:this.state.trackingNumber,fullWidth:!0,onChange:function(e){return n.changeTrackingNumber(e.currentTarget.value)},disabled:this.props.shipment.OrderShipmentStatus.Name!==hs.Packing})),this.props.properties&&this.props.properties.map((function(e,r){return t.createElement(s.Grid,{item:!0,sm:12,key:r},t.createElement(Rn,{key:r,property:e,isReadonly:!e.IsEditable,onPropertyChanged:n.customPropertyChangedHandler}))})))),l&&t.createElement(l,null)),this.state.isShowAddressForm&&t.createElement(gs,{onClose:function(){return n.setState({isShowAddressForm:!1})},editMode:this.state.orderAddressEditMode,shipment:this.state.shipment,onAddressChanged:this.onAddressChanged,onAddressCreated:this.onAddressCreated}))},r}(t.Component),ys=n.connect((function(e,t){var r,n,s=t.shipment,a=e.orderGroup.currentOrderGroup;return{shipment:s,orderFormId:a.Forms[e.orderGroup.selectedFormIndex].OrderFormId,orderGroup:a,createOrderAddressFormIsVisible:e.createOrderAddressForm.isVisible,properties:s.Properties,shipmentStatusUpdateDialogVisible:e.application.currentDialog===Le.UpdateShipmentStatus,customerAddresses:Re(a.Customer.Addresses),onClose:t.onClose,extendUI:null===(n=null===(r=e.setting.general)||void 0===r?void 0:r.editShipmentDialog)||void 0===n?void 0:n.extendUI}}))(fs),Es=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={shipmentDialogOpen:!1,currentShipmentIndex:0,shipmentDialog:{isOpen:!1,title:"",message:"",closeButtonLabel:"",confirmButtonLabel:"",onConfirm:function(){return null}}},r.columns=[{name:"No",right:!0,render:function(e,t){return t+1}},{name:"Recipient Name",render:function(e){var t="";return e.ShippingAddress&&(t=[e.ShippingAddress.FirstName,e.ShippingAddress.LastName].filter((function(e){return e})).join(" ")),t}},{name:"Shipping Address",render:function(e){return e.ShippingAddress?e.ShippingAddress.DisplayName:null}},{name:"Shipping Method",render:function(e){return r.getShippingMethodName(e.ShippingMethodId)}},{name:"Tracking No",selector:"ShipmentTrackingNumber"},{name:"Shipment Status",render:function(e){return Mn(e.OrderShipmentStatus.Name)}},{name:"Shipping Cost",right:!0,render:function(e){return e.ShippingCost.Amount.toFixed(e.ShippingCost.Fractions)}},{name:"Shipping Tax",right:!0,render:function(e){return e.ShippingTax.Amount.toFixed(e.ShippingTax.Fractions)}},{name:"Total (Incl tax)",right:!0,render:function(e){return e.ShipmentTotal.Amount.toFixed(e.ShipmentTotal.Fractions)+" "+e.ShipmentTotal.Currency}},{name:"",width:50,hideOnColumnsSelection:!0,render:function(e,n){var s=[{title:r.isEditableShipment(e)?"Edit":"View",clickHandler:function(e){r.openEditShipmentDialog(n)}}];return r.props.orderGroup.IsDraft||"Order"!==r.props.orderGroup.Type||(r.canReleaseShipment(e)&&s.push({title:"Release",clickHandler:function(e){r.showReleaseShipmentConfirmDialog(e.ShipmentId)}}),r.canShowAddToPickListButton(e)&&s.push({title:"Add to Picklist",clickHandler:function(e){r.showAddToPickListConfirmDialog(e.ShipmentId)}}),r.canShowCompleteButton(e)&&s.push({title:"Complete",clickHandler:function(e){r.showCompleteShipmentConfirmDialog(e.ShipmentId)}}),!r.props.orderGroup.IsDraft&&r.canShowCancelButton(e)&&s.push({title:"Cancel",clickHandler:function(e){r.showCancelShipmentConfirmDialog(e.ShipmentId)}})),t.createElement(is,{actions:s,rowData:e,rowIndex:n})}}],r}return Te(r,e),r.prototype.canReleaseShipment=function(e){return!(this.props.orderGroup.OrderStatus===zn.AwaitingExchange||!e.ShippingAddress||"00000000-0000-0000-0000-000000000000"===e.ShippingMethodId)&&this.canShowReleaseButton(e)},r.prototype.canShowReleaseButton=function(e){return e.OrderShipmentStatus.Name===hs.AwaitingInventory||e.OrderShipmentStatus.Name===hs.InventoryAssigned},r.prototype.canShowCompleteButton=function(e){return this.props.orderGroup.OrderStatus!==zn.AwaitingExchange&&e.OrderShipmentStatus.Name===hs.Packing},r.prototype.canShowCancelButton=function(e){return this.props.orderGroup.OrderStatus!==zn.AwaitingExchange&&e.OrderShipmentStatus.Name!==hs.Shipped&&e.OrderShipmentStatus.Name!==hs.OnHold&&e.OrderShipmentStatus.Name!==hs.Cancelled},r.prototype.canShowAddToPickListButton=function(e){return e.OrderShipmentStatus.Name===hs.Released},r.prototype.showCancelShipmentConfirmDialog=function(e){var t=this;this.setState({shipmentDialog:{isOpen:!0,title:"Cancel Shipment",message:"Are you sure you want to cancel this shipment?",closeButtonLabel:"Close",confirmButtonLabel:"Cancel Shipment",onConfirm:function(){return t.updateShipmentStatus(e,hs.Cancelled)}}})},r.prototype.showReleaseShipmentConfirmDialog=function(e){var t=this;this.setState({shipmentDialog:{isOpen:!0,title:"Release Shipment",message:"Are you sure you want to release this shipment?",closeButtonLabel:"Close",confirmButtonLabel:"Release Shipment",onConfirm:function(){return t.updateShipmentStatus(e,hs.Released)}}})},r.prototype.showAddToPickListConfirmDialog=function(e){var t=this;this.setState({shipmentDialog:{isOpen:!0,title:"Add to PickList",message:"Are you sure you want to add this shipment to a new picklist?",closeButtonLabel:"Close",confirmButtonLabel:"Add to PickList",onConfirm:function(){return t.addShipmentToPickList(e)}}})},r.prototype.closeShipmentDialog=function(){this.setState({shipmentDialog:{isOpen:!1}})},r.prototype.addShipmentToPickList=function(e){return Pe(this,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:this.closeShipmentDialog(),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!0)),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,Zt.Shipment.addToPickList(this.props.orderGroup.OrderGroupId,this.props.orderFormId,e)];case 2:return n.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 3:return t=n.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!1)),[3,5];case 4:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!1)),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,5];case 5:return[2]}}))}))},r.prototype.showCompleteShipmentConfirmDialog=function(e){var t=this;this.setState({shipmentDialog:{isOpen:!0,title:"Complete Shipment",message:"Are you sure you want to complete this shipment?",closeButtonLabel:"Close",confirmButtonLabel:"Complete Shipment",onConfirm:function(){return t.updateShipmentStatus(e,hs.Shipped)}}})},r.prototype.updateShipmentStatus=function(e,t){return Pe(this,void 0,void 0,(function(){var r,n;return Ne(this,(function(s){switch(s.label){case 0:this.closeShipmentDialog(),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!0)),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,Zt.Shipment.updateShipmentStatus(this.props.orderGroup.OrderGroupId,this.props.orderFormId,e,t)];case 2:return s.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 3:return r=s.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(r)),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!1)),[3,5];case 4:return n=s.sent(),this.props.dispatch(rt.ApplicationActions.setLoadingOverlayState(!1)),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,5];case 5:return[2]}}))}))},r.prototype.openEditShipmentDialog=function(e){this.setState({shipmentDialogOpen:!0,currentShipmentIndex:e})},r.prototype.isEditableShipment=function(e){var t=e.OrderShipmentStatus.Name;return!(t===hs.Cancelled||t===hs.OnHold||t===hs.Shipped)},r.prototype.getShippingMethodName=function(e){var t;return null===(t=this.props.shippingMethods.filter((function(t){return t.ShippingMethodId===e}))[0])||void 0===t?void 0:t.DisplayName},r.prototype.render=function(){var e=this;return t.createElement("div",null,t.createElement(s.Typography,{variant:"h6"},"Shipments"),t.createElement("br",null),t.createElement(wn,{columns:this.columns,data:this.props.shipments}),this.state.shipmentDialogOpen&&t.createElement(ys,{shipment:this.props.shipments[this.state.currentShipmentIndex],isShipmentReadonly:this.isEditableShipment(this.props.shipments[this.state.currentShipmentIndex]),onClose:function(){e.setState({shipmentDialogOpen:!1})}}),this.state.shipmentDialog.isOpen&&t.createElement(ir,{title:this.state.shipmentDialog.title,closeButtonLabel:this.state.shipmentDialog.closeButtonLabel,confirmButtonLabel:this.state.shipmentDialog.confirmButtonLabel,onConfirm:this.state.shipmentDialog.onConfirm,onClose:function(){e.setState({shipmentDialog:{isOpen:!1}})}},t.createElement(s.Typography,{variant:"body1"},this.state.shipmentDialog.message)))},r}(t.Component),vs=o.withStyles((function(e){e.palette;var t,r=e.spacing,n=e.breakpoints;return s.createStyles({root:{},paper:(t={padding:2*r.unit,marginBottom:2*r.unit},t[n.down("xs")]={padding:10},t)})}))(n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup,n=r.Forms[e.orderGroup.selectedFormIndex];return{shipments:t.shipments,orderGroup:r,shippingMethods:e.shipment.shippingMethods,orderFormId:n.OrderFormId,classes:t.classes}}))(Es)),Cs=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{"&-inline":{display:"inline-block"}}})}))((function(e){var r=e.classes;return t.createElement("div",{className:r.root+" "+(e.renderInline?r.root+"-inline":"")},t.createElement(x,{variant:"body1",color:"textSecondary"},e.message))})),Ss=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={AddToAddressBook:!0},t.validator={validate:function(){return null}},t.handleCheckboxChange=function(e){t.setState({AddToAddressBook:e.target.checked})},t.saveChanges=function(){return Pe(t,void 0,void 0,(function(){var e,t,r,n,s;return Ne(this,(function(a){switch(a.label){case 0:if(null==(e=this.validator.validate()))return[2];t=Ge(Ge({},this.props.address),e),a.label=1;case 1:return a.trys.push([1,8,,9]),this.state.AddToAddressBook?[4,this.props.addContactAddress(this.props.currentContactId,t)]:[3,5];case 2:return a.sent(),[4,this.props.getContact(this.props.currentContactId)];case 3:return r=a.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(r)),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.currentOrderGroup.Type,this.props.currentOrderGroup.OrderGroupId)];case 4:(n=a.sent()).Customer=r,this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(n)),a.label=5;case 5:return this.props.processOnAddressCreation?[4,this.props.processOnAddressCreation(t,this.props.addressType)]:[3,7];case 6:a.sent(),a.label=7;case 7:return this.props.addressType===Fe.BillingAddress&&this.props.dispatch(rt.PaymentActions.setBillingAddress(t)),this.closeDialog(),[3,9];case 8:return s=a.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,9];case 9:return[2]}}))}))},t.closeView=function(){t.props.dispatch(rt.CreateOrderAddressFormAction.hideCreateOrderAddressForm()),t.props.dispatch(rt.AddressFormActions.clearAddressForm()),t.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!1))},t}return Te(r,e),r.prototype.closeDialog=function(){this.closeView(),this.props.onClose()},r.prototype.render=function(){var e=this;return t.createElement(s.Dialog,{open:!0,"aria-describedby":"alert-dialog-description",className:this.props.classes.root,fullWidth:!0},t.createElement(ce,null,"Add New Address"),t.createElement(g,{id:"alert-dialog-description"},t.createElement(ur,{address:this.props.address,validator:this.validator}),"Order"===this.props.currentOrderGroup.Type&&t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"AddToAddressBook",checked:this.state.AddToAddressBook,onChange:this.handleCheckboxChange}),label:"Add to customer's address book"})),t.createElement(m,null,t.createElement(f.TextButton,{onClick:function(){return e.closeDialog()}},"Cancel"),t.createElement(f.TextButton,{unelevated:!0,type:"submit",onClick:this.saveChanges},"Add as ",this.props.addressType)))},r}(t.Component),Is=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{}})}))(n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup;return{addContactAddress:Zt.Contact.addContactAddress,address:e.contact.currentAddress,currentContactId:e.contact.currentContact.Id,currentOrderGroup:r,addressType:e.createOrderAddressForm.addressType,classes:t.classes,getContact:Zt.Contact.get,onClose:t.onClose,processOnAddressCreation:t.processOnAddressCreation}}))(Ss)),bs=function(e){function r(t){var r=e.call(this,t)||this;r.state={updateCustomerAddress:!1,loaded:!1,existCustomerAddress:!1,addToAddressBook:!1,customerAddressId:""},r.validator={validate:function(){return null}},r.setCurrentAddress=function(e){r.props.dispatch(rt.ContactActions.setCurrentAddress(e)),r.props.dispatch(rt.ApplicationActions.setIsCurrentFormDirty(!0))},r.handleFormChanges=function(e){var t=Object.assign({},r.props.address),n="checkbox"===e.target.type?e.target.checked:e.target.value;t[e.target.name]=n,r.setCurrentAddress(t)},r.saveChanges=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:if(null==this.validator.validate())return[2];r.label=1;case 1:return r.trys.push([1,10,,11]),this.props.editMode?this.state.updateCustomerAddress?[4,this.updateContactAddress()]:[3,3]:[3,5];case 2:r.sent(),r.label=3;case 3:return[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 4:return e=r.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(e)),this.props.onAddressChanged(Ge({},this.props.address)),[3,9];case 5:return this.state.addToAddressBook?[4,this.addContactAddress()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 8:e=r.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(e)),this.props.onAddressCreated(this.props.address),r.label=9;case 9:return this.props.onClose(),[3,11];case 10:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,11];case 11:return[2]}}))}))},r.updateContactAddress=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return e=Ge({},this.props.address),this.state.customerAddressId&&(e.AddressId=this.state.customerAddressId),[4,Zt.Contact.updateContactAddress(this.props.orderGroup.Customer.Id,e.AddressId,e)];case 1:return t.sent(),[2]}}))}))},r.addContactAddress=function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Zt.Contact.addContactAddress(this.props.orderGroup.Customer.Id,this.props.address)];case 1:return e.sent(),[2]}}))}))};var n=r.props.orderGroup.Customer.Addresses.find((function(e){return e.Name+e.DisplayName===r.props.address.Name+r.props.address.DisplayName}));return n&&(r.state.customerAddressId=n.AddressId,r.state.existCustomerAddress=!0,r.state.updateCustomerAddress=!0),r}return Te(r,e),r.prototype.componentDidMount=function(){this.setState({loaded:!0})},r.prototype.render=function(){var e=this;return t.createElement(ar,{open:!0,title:this.props.editMode?"Edit Address":"Add New Address",okLabel:"Save",onOK:this.saveChanges,closeLabel:"Cancel",onClose:this.props.onClose},this.state.loaded&&t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,sm:12},t.createElement(ur,{address:this.props.address,validator:this.validator})),!this.props.orderGroup.Customer.IsAnonymous&&t.createElement(s.Grid,{item:!0,sm:12},this.props.editMode&&this.state.existCustomerAddress&&t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"UpdateCustomerAddress",checked:this.state.updateCustomerAddress,onChange:function(t){e.setState({updateCustomerAddress:t.target.checked})}}),label:"Also update customer's address"}),!this.props.editMode&&t.createElement(s.FormControlLabel,{control:t.createElement(f.Checkbox,{name:"AddToAddressBook",checked:this.state.addToAddressBook,onChange:function(t){e.setState({addToAddressBook:t.target.checked})}}),label:"Add to customer's address book"}))))},r}(t.Component),As=n.connect((function(e,t){return{address:e.contact.currentAddress,orderGroup:e.orderGroup.currentOrderGroup,editMode:t.editMode,onClose:t.onClose,onAddressChanged:t.onAddressChanged,onAddressCreated:t.onAddressCreated}}))(bs),Os=function(e){function r(t){var r=e.call(this,t)||this;return r.state={paymentInProcess:!1,paymentAddressFormVisible:!1,billingAddressId:"",paymentMethodId:"",selectedPayment:{},billingAddress:{},loaded:!1,errors:{BillingAddressId:"",PaymentMethodId:"",TransactionAmount:""},isShowAddressForm:!1,billingAddressEditMode:!0},r.validationSchema=b.object({BillingAddressId:b.string().required("Billing Address is required."),PaymentMethodId:b.string().required("Payment Method is required."),TransactionAmount:b.number().required("Transaction Amount is required.").min(0).lessThan(Number.MAX_SAFE_INTEGER,"This value is out of range.")}),r.validateForm=function(){return Pe(r,void 0,void 0,(function(){var e,t,r;return Ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.validationSchema.validate({BillingAddressId:this.state.billingAddressId,TransactionAmount:Number(null===(r=this.state.selectedPayment.Amount)||void 0===r?void 0:r.Amount)||void 0,PaymentMethodId:this.state.paymentMethodId},{abortEarly:!1})];case 1:return n.sent(),[2,!0];case 2:return e=n.sent(),t={},e.inner.map((function(e){t[e.path]=e.message})),this.setState({errors:t}),[2,!1];case 3:return[2]}}))}))},r.addPayment=function(){return Pe(r,void 0,void 0,(function(){var e,t,r,n,s=this;return Ne(this,(function(a){switch(a.label){case 0:return[4,this.validateForm()];case 1:if(!a.sent())return[2];if(this.setState({paymentInProcess:!0}),(e=this.props.orderGroup.OrderAddresses.find((function(e){return e.AddressId===s.state.billingAddressId})))||(e=this.state.billingAddress),!this.state.billingAddress)return[3,7];this.state.selectedPayment.BillingAddress=e,a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Zt.OrderGroup.addPayment(this.props.orderGroup.Type,this.state.selectedPayment,this.props.orderGroup.OrderGroupId,this.props.orderForm.OrderFormId)];case 3:return t=a.sent(),this.props.orderForm.Payments.push(t.data),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 4:return r=a.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(r)),this.props.onClose(),[3,6];case 5:return n=a.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,6];case 6:return[3,8];case 7:this.props.dispatch(rt.ApplicationActions.showNotification("You need to choose a billing address.")),a.label=8;case 8:return this.setState({paymentInProcess:!1}),[2]}}))}))},r.changeTransactionAmountHandler=function(e){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(t){return this.updatePayment(this.state.selectedPayment,"Amount",{Currency:this.state.selectedPayment.Amount.Currency,Amount:e}),[2]}))}))},r.customPropertyChangedHandler=function(e){return Pe(r,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){for(t=this.state.selectedPayment.Properties,r=0;r<t.length;r++)if(t[r].Id===e.Id){t[r]=e;break}return this.updatePayment(this.state.selectedPayment,"Properties",t),[2]}))}))},r.billingAddressChange=function(e){r.setState({billingAddressId:e})},r.openEditAddressDialog=function(){var e=r.props.orderGroup.OrderAddresses.find((function(e){return e.AddressId===r.state.billingAddressId}));e||(e=r.state.billingAddress),e&&(r.props.dispatch(rt.ContactActions.setCurrentAddress(e)),r.setState({isShowAddressForm:!0,billingAddressEditMode:!0,billingAddress:e}))},r.openAddAddressDialog=function(){r.props.dispatch(rt.ContactActions.setCurrentAddress({})),r.setState({isShowAddressForm:!0,billingAddressEditMode:!1})},r.updateBillingAddress=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return e.DisplayName=[e.Line1,e.Line2,e.City,e.PostalCode,e.CountryName].filter((function(e){return e})).join(", "),void 0===(t=this.props.orderGroup.OrderAddresses.find((function(t){return t.DisplayName===e.DisplayName})))&&(e.AddressId=this.props.orderForm.OrderFormId.toString()),t&&!e.AddressId&&(e.AddressId=t.AddressId),this.setState({billingAddressId:e.AddressId,billingAddress:e}),[2]}))}))},r.setDefaultBillingAddress(),r.setDefaultPaymentMethod(),r}return Te(r,e),r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){return this.setState({loaded:!0}),[2]}))}))},r.prototype.setDefaultPaymentMethod=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return this.props.paymentMethods.length>=1&&(e=this.props.paymentMethods.find((function(e){return!0===e.IsDefault}))),void 0===e?[3,2]:[4,Zt.OrderGroup.getPaymentModel(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,this.props.orderForm.OrderFormId,e.PaymentMethodId)];case 1:t=r.sent(),this.setState({paymentMethodId:e.PaymentMethodId,selectedPayment:t}),r.label=2;case 2:return[2]}}))}))},r.prototype.setDefaultBillingAddress=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){return null!==(e=this.props.orderGroup.OrderAddresses)&&(t=void 0,e.length>=1&&(t=e.find((function(e){return!0===e.IsPreferredBillingAddress}))),void 0!==t&&this.setState({billingAddress:t})),[2]}))}))},r.prototype.updatePayment=function(e,t,r){var n=Object.assign({},e);n[t]=r,this.setState({selectedPayment:n})},r.prototype.changePaymentMethod=function(e){return Pe(this,void 0,void 0,(function(){var t,r=this;return Ne(this,(function(n){switch(n.label){case 0:return[4,Zt.OrderGroup.getPaymentModel(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,this.props.orderForm.OrderFormId,e)];case 1:return t=n.sent(),this.setState({paymentMethodId:e,selectedPayment:t},(function(){var e=r.getRemainTransactionAmount();r.changeTransactionAmountHandler(e)})),[2]}}))}))},r.prototype.getRemainTransactionAmount=function(){return(this.props.orderGroup.Total.Amount-(this.props.orderForm.AuthorizedPaymentTotal.Amount+this.props.orderForm.CapturedPaymentTotal.Amount)).toFixed(this.props.orderGroup.Total.Fractions)},r.prototype.render=function(){var e=this,r=this.props.paymentMethods.map((function(e){return{label:e.Name+" "+e.LanguageId,value:e.PaymentMethodId}})),n=Re(this.props.orderGroup.OrderAddresses);this.state.billingAddress.AddressId&&void 0===n.find((function(t){return t.DisplayName===e.state.billingAddress.DisplayName}))&&(n=Re([this.state.billingAddress],this.props.orderGroup.OrderAddresses));var a=n.map((function(e){return{label:e.DisplayName,value:e.AddressId}}));return t.createElement(ar,{open:!0,title:"Add Payment",onClose:this.props.onClose,okLabel:"Save",closeLabel:"Cancel",onOK:this.addPayment},this.state.paymentAddressFormVisible&&t.createElement(Is,{onClose:function(){e.setState({paymentAddressFormVisible:!1})}}),this.state.loaded&&t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,xs:12},t.createElement(_t,{label:"Billing Address",fullWidth:!0,options:a,value:this.state.billingAddressId,onChange:function(t){return e.billingAddressChange(t)}}),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.BillingAddressId),t.createElement(s.Grid,{container:!0,spacing:16,justify:"flex-end"},t.createElement(s.Grid,{item:!0},t.createElement(s.Typography,{variant:"subtitle1",color:"primary",onClick:this.openAddAddressDialog,style:{cursor:"pointer",fontSize:"13px"}},"Add Address")),this.state.billingAddressId&&t.createElement(s.Grid,{item:!0},t.createElement(s.Typography,{variant:"subtitle1",color:"primary",onClick:this.openEditAddressDialog,style:{cursor:"pointer",fontSize:"13px"}},"Edit Address")))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(_t,{label:"Payment Method",fullWidth:!0,options:r,value:this.state.paymentMethodId,onChange:function(t){return e.changePaymentMethod(t)}}),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.PaymentMethodId)),this.state.paymentMethodId&&t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.TextField,{id:"transactionAmount",name:"TransactionAmount",type:"number",label:"Transaction Amount",fullWidth:!0,variant:"outlined",defaultValue:this.getRemainTransactionAmount(),onChange:function(t){return e.changeTransactionAmountHandler(t.target.value)},error:!!this.state.errors.TransactionAmount,helperText:this.state.errors.TransactionAmount,inputProps:{step:.1,min:0}})))),this.state.paymentMethodId&&this.state.selectedPayment.Properties&&this.state.selectedPayment.Properties.length>0&&t.createElement(s.Grid,{item:!0,xs:12},t.createElement(Ln,{isCollapsible:!1,properties:this.state.selectedPayment.Properties,onPropertyChanged:this.customPropertyChangedHandler}))),this.state.isShowAddressForm&&t.createElement(As,{onClose:function(){return e.setState({isShowAddressForm:!1})},editMode:this.state.billingAddressEditMode,onAddressChanged:this.updateBillingAddress,onAddressCreated:this.updateBillingAddress}))},r}(t.Component),Ts=n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup;return{paymentMethods:e.payment.paymentMethods,orderGroup:r,orderForm:r.Forms[e.orderGroup.selectedFormIndex],onClose:t.onClose}}))(Os),ws=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={isAddPaymentFormVisible:!1},r.columns=[{name:"Payment Method",render:function(e){return t.createElement(x,null,e.PaymentMethodName)}},{name:"Billing Address",render:function(e){return t.createElement(cr,{address:e.BillingAddress})}},{name:"Status",render:function(e){return t.createElement(x,null,Mn(e.Status))}},{name:"Transaction Amount",render:function(e){return t.createElement(En,{amount:e.Amount,variant:"body2"})}},{name:"Transaction Type",render:function(e){return t.createElement(x,null,Mn(e.TransactionType))}},{name:"Transaction ID",render:function(e){return t.createElement(x,null,Mn(e.TransactionID))}},{name:"Provider Transaction ID",render:function(e){return t.createElement(x,null,Mn(e.ProviderTransactionID))}}],r}return Te(r,e),r.prototype.render=function(){var e=this;return t.createElement(s.Grid,{container:!0,direction:"column",spacing:16},t.createElement(s.Grid,{item:!0},t.createElement(x,{variant:"h6"},"Transactions")),t.createElement(s.Grid,{item:!0},t.createElement(ue,null)),!this.state.isAddPaymentFormVisible&&this.props.canAcceptPayment&&t.createElement(s.Grid,{item:!0},t.createElement(f.TextButton,{unelevated:!0,onClick:function(){return e.setState({isAddPaymentFormVisible:!0})}},"Add Payment")),t.createElement(s.Grid,{item:!0},this.props.payments.length>0?t.createElement(wn,{columns:this.columns,data:this.props.payments}):t.createElement(Cs,{message:"No payments found."})),this.state.isAddPaymentFormVisible&&t.createElement(Ts,{onClose:function(){e.setState({isAddPaymentFormVisible:!1})}}))},r}(t.Component),Gs=function(e){var t=e.orderGroup.currentOrderGroup,r=!1;if("Cart"!==t.Type){var n=t.Forms[e.orderGroup.selectedFormIndex],s=n.AuthorizedPaymentTotal.Amount+n.CapturedPaymentTotal.Amount<t.Total.Amount;r=(t.OrderStatus===zn.InProgress||t.OrderStatus===zn.PartiallyShipped)&&s}return r},Ds=n.connect((function(e,t){return{payments:t.payments,canAcceptPayment:Gs(e)}}))(ws),Ps=function(e,t,r,n){return Pe(void 0,void 0,void 0,(function(){var s,a;return Ne(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Zt.OrderGroup.getSingleOrderGroup(e,t)];case 1:return s=i.sent(),r(s),[3,3];case 2:return a=i.sent(),n(a.message),[3,3];case 3:return[2]}}))}))},Ns=function(e,t,r,n,s,a){return Pe(void 0,void 0,void 0,(function(){var i,o,c;return Ne(this,(function(l){switch(l.label){case 0:i={Code:n,Applied:!1},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Zt.OrderGroup.addCoupon(e,t,r,i)];case 2:return o=l.sent(),Ps(e,t,s,a),o.data.Applied||a('The coupon code "'+n+'" will not be subject to any discount.'),o.data.HasValidationIssues&&a("The coupon was applied with errors. \n "+o.data.ValidationMessages),[3,4];case 3:return c=l.sent(),a(c.message),[3,4];case 4:return[2]}}))}))},Rs=o.withStyles((function(e){e.palette;var t=e.spacing,r=e.transitions;e.breakpoints;return s.createStyles({root:{marginBottom:er.marginDefault,padding:er.paddingDefault},chip:{marginRight:t.unit,maxWidth:250,"& span":{textOverflow:"ellipsis",display:"inline",overflow:"hidden"}},chipAvatar:{background:"rgba(0,0,0,0)"},couponTextField:{"& fieldset":{top:-3,"& legend":{width:0,position:"absolute"}}},couponTextFieldFocus:{width:25,textOverflow:"ellipsis",transition:r.create("width",{easing:r.easing.easeInOut,duration:r.duration.standard}),transitionDelay:"0.5s","&:focus, &:hover":{width:150,transition:r.create("width",{easing:r.easing.easeInOut,duration:r.duration.standard})}},couponTextFieldInput:{paddingRight:0}})}))(n.connect((function(e,t){return{coupons:e.orderGroup.currentOrderGroup.Forms[e.orderGroup.selectedFormIndex].Coupons,orderGroupId:e.orderGroup.currentOrderGroup.OrderGroupId,orderForm:e.orderGroup.currentOrderGroup.Forms[e.orderGroup.selectedFormIndex],couponTextFieldValue:e.orderGroup.couponTextFieldValue,classes:t.classes,isReadonly:t.isReadonly,orderGroupType:e.orderGroup.currentOrderGroup.Type}}))((function(e){var r=e.classes,n=function(t){e.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),e.dispatch(rt.OrderGroupActions.setCouponTextFieldValue(""))},s=function(t){e.dispatch(rt.ApplicationActions.showNotification(t))};return t.createElement(d,null,t.createElement(d,null,t.createElement(x,{variant:"subtitle2",gutterBottom:!0},"Discount Codes")),t.createElement(d,{container:!0,alignItems:"center",spacing:16},!e.isReadonly&&t.createElement(d,{item:!0},t.createElement(pe,{value:e.couponTextFieldValue,className:r.couponTextField,onChange:function(t){return r=t.target.value,void e.dispatch(rt.OrderGroupActions.setCouponTextFieldValue(r));var r},variant:"outlined",margin:"dense",onKeyDown:function(t){13===t.keyCode&&e.couponTextFieldValue.length>0&&Ns(e.orderGroupType,e.orderGroupId,e.orderForm.OrderFormId,e.couponTextFieldValue,n,s)},inputProps:{className:r.couponTextFieldFocus},InputProps:{className:r.couponTextFieldInput,endAdornment:t.createElement(he,{position:"end"},t.createElement(J,{title:"Add "+e.couponTextFieldValue+" as a coupon code"},t.createElement("div",null,t.createElement(f.IconButton,{disabled:0===e.couponTextFieldValue.length,onClick:function(){return Ns(e.orderGroupType,e.orderGroupId,e.orderForm.OrderFormId,e.couponTextFieldValue,n,s)}},t.createElement(F,null)))))}})),e.coupons.length>0?e.coupons.map((function(a,i){return t.createElement(d,{item:!0,key:i},t.createElement(de,{avatar:a.Applied?t.createElement(me,{className:r.chipAvatar},t.createElement(ge,null)):void 0,className:r.chip,label:a.Code,variant:a.Applied?"default":"outlined",onDelete:e.isReadonly?void 0:function(){return function(e,t,r,n,s,a){return Pe(void 0,void 0,void 0,(function(){var i;return Ne(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Zt.OrderGroup.removeCoupon(e,t,r,a)];case 1:return o.sent(),Ps(e,t,n,s),[3,3];case 2:return i=o.sent(),s(i.message),[3,3];case 3:return[2]}}))}))}(e.orderGroupType,e.orderGroupId,e.orderForm.OrderFormId,n,s,a)}}))})):t.createElement(d,{item:!0},t.createElement(Cs,{message:Mn(e.orderGroupType)+" contains no coupons.",renderInline:!0}))))})));!function(e){e[e.None=0]="None",e[e.Money=1]="Money",e[e.Percentage=2]="Percentage",e[e.Free=3]="Free",e[e.FixedPrice=4]="FixedPrice",e[e.Gift=5]="Gift"}(ps||(ps={}));var xs,Ls=ps,Ms=function(e){return e.promotionInformation.RewardType===Ls.Gift?t.createElement(x,Ge({},e),"Gift"):t.createElement(En,Ge({},e.typographyProps,{amount:e.promotionInformation.SavedAmount}))},Fs=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({})}))((function(e){var r=[{name:"Discount",selector:"Name"},{name:"Description",selector:"Description"},{name:"Coupon Code",selector:"CouponCode"},{name:"Saved Amount",right:!0,render:function(e){return t.createElement(Ms,{promotionInformation:e,typographyProps:{variant:"body1"}})}}];return t.createElement(d,{direction:"column",spacing:16,container:!0},t.createElement(d,{item:!0},t.createElement(x,{variant:"h6",gutterBottom:!0},"Discounts")),t.createElement(d,{item:!0},t.createElement(s.Divider,null)),!e.isCreateNewOrder&&t.createElement(d,{item:!0},t.createElement(Rs,{isReadonly:e.isReadonly})),t.createElement(d,{item:!0},e.promotionInformation.length>0?t.createElement(wn,{columns:r,data:e.promotionInformation}):t.createElement(Cs,{message:"There are currently no discounts applied."})))})),ks=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{width:48,height:48,display:"inline-flex",justifyContent:"center",alignItems:"center"},tooltip:{postition:"relative",height:"100%",width:"100%"}})}))((function(e){var r=e.classes,n=e.children;return t.createElement("div",{className:r.root},t.createElement(J,{classes:{tooltip:r.tooltip},title:e.tooltipMessage},t.createElement(Ee,{badgeContent:e.badgeContent,color:"primary"},n)))})),_s=function(e){var r=e.ThumbnailUrl?t.createElement(me,{src:e.ThumbnailUrl}):t.createElement(fe,null);return e.IsGift?t.createElement(ks,{tooltipMessage:"Gift",badgeContent:t.createElement(ye,{style:{width:"0.75em"}})},r):r},Vs=function(e){return t.createElement(s.Grid,{container:!0,direction:"row",justify:"flex-start",spacing:8},e.properties&&Object.keys(e.properties).map((function(r){return t.createElement(s.Grid,{item:!0,key:r},t.createElement(x,{color:"textSecondary",variant:"body2"},r,": ",t.createElement("strong",null,e.properties[r])))})))},Us=require("autosuggest-highlight/match"),Bs=require("autosuggest-highlight/parse"),Hs=function(e){e.classes;var r=De(e,["classes"]);return t.createElement(s.TextField,Ge({fullWidth:!0,label:"Product Variant",placeholder:"Search by catalog SKU code or name",variant:"outlined"},r))},qs=function(e){return e.Code},Ws=function(e){function r(r){var n=e.call(this,r)||this;return n.classes=n.props.classes,n.state={searchFieldValue:"",suggestions:[],isWaitingSuggestions:!1},n.requiredSearchStringLength=3,n.SuggestionsContainer=function(e){var r=e.containerProps,a=e.children;return t.createElement(s.Paper,Ge({},r,{className:n.classes.suggestionsContainerOpen,square:!0}),n.state.isWaitingSuggestions&&t.createElement("div",{className:n.classes.progressContainer},t.createElement(s.CircularProgress,{className:n.classes.progressIndicator})),a)},n.selectSuggestion=function(e,t){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(e){return this.props.onSelected(t.suggestion),[2]}))}))},n.getSuggestions=function(e){var t=e.value;return Pe(n,void 0,void 0,(function(){var e,r,n;return Ne(this,(function(s){switch(s.label){case 0:return e=t.trim().toLowerCase(),r=[],this.props.dispatch(rt.ApplicationActions.setIsLoadingResource(!0)),e.length<this.requiredSearchStringLength?(this.clearSuggestions(),[3,4]):[3,1];case 1:return s.trys.push([1,3,,4]),[4,Zt.Catalog.search(e)];case 2:return(r=s.sent()).length>0&&(r=r.map((function(e){return e})),this.setState({suggestions:r})),[3,4];case 3:return n=s.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,4];case 4:return this.props.dispatch(rt.ApplicationActions.setIsLoadingResource(!1)),[2,r]}}))}))},n.clearSuggestions=function(){n.setState({suggestions:[]})},n.updateSearchFieldValue=function(e,t){t&&(n.setState({searchFieldValue:t.newValue}),n.props.onSearchFieldChanged&&n.props.onSearchFieldChanged(t.newValue))},n.renderEntrySuggestion=function(e,r){return function(e,r){var n=Us(e.DisplayName,r.query),a=Bs(e.DisplayName,n),i=Us(e.Code,r.query),o=Bs(e.Code,i),c=r.isHighlighted?tr.hoveredList:"#fff";return t.createElement(f.List,{style:{backgroundColor:c,paddingTop:0,paddingBottom:0}},t.createElement(f.ListItem,{style:{height:"auto"}},""!==e.ThumbnailUrl?t.createElement(s.Avatar,{src:e.ThumbnailUrl}):t.createElement(s.Avatar,null,t.createElement(fe,null)),t.createElement(f.ListItemText,{primaryText:t.createElement("div",{style:{textAlign:"left",minHeight:"50px",paddingLeft:"16px",width:"100%"}},t.createElement(s.Typography,{variant:"subtitle1"},a.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)}))),t.createElement(d,{container:!0,spacing:16,justify:"space-between"},t.createElement(d,{item:!0,xs:12,sm:6},t.createElement(s.Typography,{variant:"body1",color:"textSecondary"},o.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)})))),t.createElement(d,{item:!0,xs:12,sm:3},t.createElement(s.Typography,{variant:"body1",color:"textSecondary",style:{fontWeight:300}},"In Stock: ",e.InStock)),t.createElement(d,{item:!0,xs:12,sm:3},e.ProductUrl&&t.createElement("a",{href:e.ProductUrl,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},t.createElement(s.Typography,null,"More Details"))),t.createElement(d,{item:!0,xs:12},t.createElement(Vs,{properties:e.CustomProperties}))))}),e.QuantityInShipment>0&&t.createElement("div",{style:{marginLeft:"-40px"}},t.createElement(ks,{badgeContent:e.QuantityInShipment,tooltipMessage:"The shipment already contains "+e.QuantityInShipment+" of this item."},t.createElement(Se,null)))),t.createElement(f.ListDivider,null))}(e,r)},n.getSuggestionsDebounce=ve.debounce(n.getSuggestions,1e3,{trailing:!0}),n}return Te(r,e),r.prototype.render=function(){return t.createElement("div",{className:this.classes.root},t.createElement(Ce,{suggestions:this.state.suggestions.slice(0,20),renderInputComponent:Hs,onSuggestionsFetchRequested:this.getSuggestionsDebounce,onSuggestionsClearRequested:this.clearSuggestions,renderSuggestionsContainer:this.SuggestionsContainer,getSuggestionValue:qs,renderSuggestion:this.renderEntrySuggestion,onSuggestionSelected:this.selectSuggestion,theme:{container:this.classes.container,suggestionsContainerOpen:this.classes.suggestionsContainerOpen,suggestionsList:this.classes.suggestionsList,suggestion:this.classes.suggestion},inputProps:{classes:this.classes,value:this.state.searchFieldValue,onChange:this.updateSearchFieldValue,type:"search"}}))},r}(t.Component),js=o.withStyles((function(e){var t=e.palette,r=e.spacing;e.breakpoints;return s.createStyles({root:{flexGrow:1},container:{position:"relative",textAlign:"center",minHeight:56},suggestionsContainerOpen:{position:"absolute",zIndex:2,marginTop:r.unit,left:0,right:0,width:"100%"},suggestion:{display:"block",cursor:"pointer"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*r.unit},progressContainer:{marginTop:8},progressIndicator:{color:t.secondary.light,margin:8},noResultsFound:{fontStyle:"italic",textAlign:"center",padding:6,marginTop:8}})}))(n.connect((function(e,t){return{classes:t.classes,onSelected:t.onSelected,onSearchFieldChanged:t.onSearchFieldChanged}}))(Ws));!function(e){e[e.Percentage=1]="Percentage",e[e.Value=2]="Value"}(xs||(xs={}));var Ys=xs,zs=function(e){function r(t){var r=e.call(this,t)||this;if(r.state={lineItem:r.props.lineItem,openEntrySelectionView:!1,shipmentId:-1,quantity:1,placedPrice:r.props.lineItem.PlacedPrice?r.props.lineItem.PlacedPrice.Amount:0,defaultPlacedPrice:-1,entrySelectedSuggestion:{},editMode:!1,errorMessage:"",discountType:Ys.Value,discountValue:0,discountDescription:"",showDialog:!1,properties:new Array,shipmentOptions:[],isBundle:!1,isReadonly:r.props.isReadonly,originalLineItem:{},errors:{Quantity:"",PlacedPrice:"",DiscountValue:"",DiscountType:"",ShipmentId:"",LineItemCode:""}},r.customPropertiesForm={},r.validationSchema=b.object().shape({Quantity:b.number().required().positive().lessThan(Number.MAX_SAFE_INTEGER,"This value is out of range."),EditMode:b.bool(),PlacedPrice:b.number().min(0).lessThan(Number.MAX_SAFE_INTEGER,"This value is out of range."),ShipmentId:b.number().required("Please select a Shipment."),LineItemCode:b.string().when("EditMode",{is:!1,then:b.string().required("Product variant is required.")}),DiscountType:b.number(),DiscountValue:b.number().min(0).when("DiscountType",{is:1,then:b.number().max(100,"DiscountValue must be between 0-100."),otherwise:b.number().max(b.ref("PlacedPrice"),"DiscountValue can not exceed PlacedPrice.")})}),r.submitForm=function(){return Pe(r,void 0,void 0,(function(){var e,t,r,n,s,a,i,o,c,l,u,d,p,h,m;return Ne(this,(function(g){switch(g.label){case 0:return this.customPropertiesForm.isFormValid()?[4,this.validateForm()]:[2];case 1:return g.sent()?(e=this.getExistedLineItem(this.state.entrySelectedSuggestion.Code),this.state.editMode||e?(t=e?e.LineItemId:this.props.lineItem.LineItemId,r=e?e.Quantity:0,n=r+this.state.quantity,s={OrderGroupId:this.props.orderGroup.OrderGroupId,OrderGroupType:this.props.orderGroup.Type,LineItemId:t,Quantity:n,PlacedPrice:this.state.placedPrice},this.state.discountValue>0&&(s.DiscountType=this.state.discountType,s.DiscountValue=this.state.discountValue,s.DiscountDescription=this.state.discountDescription),this.state.editMode?[4,this.updateLineItemProperties()]:[3,3]):[3,10]):[2];case 2:g.sent(),g.label=3;case 3:return this.props.orderGroup.IsDraft?((a=e?JSON.parse(JSON.stringify(e)):this.state.lineItem).Quantity=s.Quantity,s.PlacedPrice&&(a.PlacedPrice.Amount=s.PlacedPrice),(i=s.DiscountValue?{ManualDiscountType:s.DiscountType,DiscountValue:s.DiscountValue,Description:s.DiscountDescription}:void 0)&&(a.ManualDiscount=i),o=JSON.parse(JSON.stringify(this.props.orderGroup)),c=o.Forms[0].Shipments[0].LineItems,l=c.findIndex((function(e){return e.LineItemId===t})),c[l]=a,[4,Zt.OrderGroup.calculateOrder(o)]):[3,5];case 4:return o=g.sent(),p=o.ValidationMessages,this.lineItemHasChangedPrice(e||this.state.originalLineItem,o)&&(h="The price for product "+a.Code+" has changed since it was added to your cart.",p.push(h)),p.length>0?this.props.dispatch(rt.ApplicationActions.showNotification(p.join("\n"))):this.props.dispatch(rt.ApplicationActions.showNotification("The line item was successfully updated.")),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(o)),[3,9];case 5:return g.trys.push([5,8,,9]),[4,Zt.OrderGroup.updateLineItem(s)];case 6:return u=g.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 7:return d=g.sent(),p=[],this.isValidationMessagesReturned(u)&&(p=u.data),this.lineItemHasChangedPrice(e||this.state.originalLineItem,d)&&(h="The price for product "+(e?e.Code:this.state.originalLineItem.Code)+" has changed since it was added to your cart.",p.push(h)),p.length>0?this.props.dispatch(rt.ApplicationActions.showNotification(p.join("\n"))):this.props.dispatch(rt.ApplicationActions.showNotification("The line item was successfully updated.")),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(d)),[3,9];case 8:return m=g.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(m.message)),[3,9];case 9:return this.props.onClose(),[3,12];case 10:return[4,this.addLineItemToOrderGroup()];case 11:g.sent()&&this.props.onClose(),g.label=12;case 12:return[2]}}))}))},r.lineItemHasChangedPrice=function(e,t){var r=t.Forms[0];if(t.IsDraft)for(var n=0;n<r.Shipments.length;n++){if(r.Shipments[n].LineItems.find((function(t){return t.Code===e.Code&&t.PlacedPrice.Amount!==e.PlacedPrice.Amount})))return!0}else for(n=0;n<r.Shipments.length;n++){if(r.Shipments[n].LineItems.find((function(t){return t.LineItemId===e.LineItemId&&t.PlacedPrice.Amount!==e.PlacedPrice.Amount})))return!0}return!1},r.updatePlacedPrice=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return t=Number(e.target.value),!isNaN(t)&&t>=0&&this.setState({placedPrice:t},this.validateForm),[2]}))}))},r.updateDiscountPrice=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return t=Number(e.target.value),!isNaN(t)&&t>=0&&this.setState({discountValue:t},this.validateForm),[2]}))}))},r.updateDiscountDescription=function(e){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(t){return this.setState({discountDescription:e.target.value}),[2]}))}))},r.quantityChangeHandler=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return t=Number(e.target.value),isNaN(t)||this.setState({quantity:t},this.validateForm),[2]}))}))},r.quantityBluredHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t,r;return Ne(this,(function(n){switch(n.label){case 0:return[4,this.validateForm()];case 1:if(!n.sent())return[2];e=this.state.editMode?this.props.lineItem.Code:this.state.entrySelectedSuggestion.Code,n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.getPlacedPrice(e,this.state.quantity)];case 3:return(t=n.sent())&&t.Amount!==this.state.defaultPlacedPrice&&this.setState({defaultPlacedPrice:t.Amount,placedPrice:t.Amount},this.validateForm),[3,5];case 4:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,5];case 5:return[2]}}))}))},r.getPlacedPrice=function(e,t){return Pe(r,void 0,void 0,(function(){var r;return Ne(this,(function(n){switch(n.label){case 0:if(!e)return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Zt.OrderGroup.getPlacedPrice(e,t,this.props.orderGroup.MarketId,this.props.orderGroup.Currency,this.props.orderGroup.Customer.Id)];case 2:return[2,n.sent().data];case 3:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),404===r.response.status&&this.setState({isReadonly:!0}),[2,null];case 4:return[2]}}))}))},r.customPropertyChangedHandler=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return(t=this.state.properties.findIndex((function(t){return t.Name===e.Name})))>=0&&(this.state.properties[t]=Ge({},e),this.setState({properties:Re(this.state.properties)}),this.forceUpdate()),[2]}))}))},void 0!==r.props.lineItem.LineItemId){if(r.state.editMode=!0,r.state.quantity=r.props.lineItem.Quantity,r.state.placedPrice=r.props.lineItem.PlacedPrice.Amount,r.state.shipmentId=r.props.orderForm.Shipments[r.props.lineItem.ShipmentNo-1].ShipmentId,r.props.lineItem.ManualDiscount){var n=r.props.lineItem.ManualDiscount;r.state.discountType=n.ManualDiscountType,r.state.discountValue=n.DiscountValue,r.state.discountDescription=n.Description}r.state.properties=Re(r.props.lineItem.Properties),r.state.originalLineItem=JSON.parse(JSON.stringify(r.props.lineItem))}else r.state.shipmentId=r.props.orderForm.Shipments[0].ShipmentId;return r}return Te(r,e),r.prototype.componentDidMount=function(){var e=this;this.props.lineItem.Code&&this.props.lineItem.IsEntryAvailable?this.getPlacedPrice(this.props.lineItem.Code,this.state.quantity).then((function(t){t?e.setState({defaultPlacedPrice:t.Amount,showDialog:!0}):e.setState({showDialog:!0})})):this.setState({showDialog:!0}),this.initData()},r.prototype.addLineItemToOrderGroup=function(){return Pe(this,void 0,void 0,(function(){var e,t,r,n,s,a;return Ne(this,(function(i){switch(i.label){case 0:e=this.createLineItemPostData(this.state.entrySelectedSuggestion,this.state.quantity,this.state.placedPrice),i.label=1;case 1:return i.trys.push([1,8,,9]),this.props.orderGroup.IsDraft?[4,Zt.OrderGroup.initLineItem(this.props.orderGroup.Currency,this.props.orderGroup.MarketId,this.props.orderGroup.Customer.Id,e)]:[3,4];case 2:return t=i.sent(),r=JSON.parse(JSON.stringify(this.props.orderGroup)),t.forEach((function(e){var t=r.Forms[0].Shipments[0].LineItems.find((function(t){return t.Code===e.Code}));t?t.Quantity+=e.Quantity:r.Forms[0].Shipments[0].LineItems.push(e)})),[4,Zt.OrderGroup.calculateOrder(r)];case 3:return(r=i.sent()).ValidationMessages.length>0&&this.props.dispatch(rt.ApplicationActions.showNotification(r.ValidationMessages.join("\n"))),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(r)),[3,7];case 4:return[4,Zt.OrderGroup.addLineItemToOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,this.props.orderForm.OrderFormId,this.state.shipmentId,e)];case 5:return n=i.sent(),this.isValidationMessagesReturned(n)&&this.props.dispatch(rt.ApplicationActions.showNotification(n.data.join("\n"))),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 6:s=i.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(s)),i.label=7;case 7:return[3,9];case 8:return a=i.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(a.message)),[2,!1];case 9:return[2,!0]}}))}))},r.prototype.getExistedLineItem=function(e){var t,r=this,n=this.props.orderForm.Shipments.find((function(e){return e.ShipmentId===r.state.shipmentId}));return n&&(t=n.LineItems.find((function(t){return!t.IsGift&&t.Code===e}))),t},r.prototype.isValidationMessagesReturned=function(e){return e&&e.data&&Array.isArray(e.data)&&e.data.length>0},r.prototype.createLineItemPostData=function(e,t,r){return{code:e.Code,displayName:e.DisplayName,quantity:t,placedPrice:r}},r.prototype.validateForm=function(){return Pe(this,void 0,void 0,(function(){var e,t,r;return Ne(this,(function(n){switch(n.label){case 0:e=!0,t={},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.validationSchema.validate({Quantity:this.state.quantity,PlacedPrice:this.state.placedPrice,DiscountValue:this.state.discountValue,DiscountType:this.state.discountType,ShipmentId:this.state.shipmentId,EditMode:this.state.editMode,LineItemCode:this.state.entrySelectedSuggestion.Code},{strict:!0,abortEarly:!1})];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),e=!1,r.inner.map((function(e){t[e.path]=e.message})),[3,4];case 4:return this.setState({errors:t}),[2,e]}}))}))},r.prototype.updateLineItemProperties=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:if(this.props.orderGroup.IsDraft)return this.setState({lineItem:Ge(Ge({},this.state.lineItem),{Properties:this.state.properties})}),[2];e=0,r.label=1;case 1:if(!(e<this.props.lineItem.Properties.length))return[3,6];if(this.props.lineItem.Properties[e].Value===this.state.properties[e].Value)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,Zt.MetaField.updateOrderLineItemMetaFields(this.props.orderGroup.OrderGroupId,this.props.orderGroup.Type,this.props.lineItem.LineItemId,this.state.properties[e])];case 3:return r.sent(),[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return e++,[3,1];case 6:return[2]}}))}))},r.prototype.handleEntrySearchSelected=function(e){this.setState({placedPrice:e.Price.Amount,entrySelectedSuggestion:e,isBundle:e.IsBundle},this.validateForm)},r.prototype.handleEntrySearchChanged=function(e){""===e&&this.setState({placedPrice:0,quantity:1,entrySelectedSuggestion:{},isBundle:!1,defaultPlacedPrice:-1})},r.prototype.initData=function(){var e=[],t=this.props.orderForm.Shipments.map((function(e,t){return{label:"Shipment "+(t+1),orderShipmentStatus:e.OrderShipmentStatus,shipmentId:e.ShipmentId,value:e.ShipmentId.toString()}})),r=t.filter((function(e){return e.orderShipmentStatus.Name===hs.AwaitingInventory||e.orderShipmentStatus.Name===hs.InventoryAssigned})),n=r.length>0?r[0].shipmentId:-1;e=this.state.editMode?t:r,this.setState({shipmentOptions:e}),this.state.editMode||n===this.state.shipmentId||this.setState({shipmentId:n})},r.prototype.render=function(){var e=this,r={title:this.state.isReadonly?"Line Item Details":this.state.editMode?"Edit Line Item":"Add Line Item",open:!0,onClose:function(){e.props.onClose()},closeLabel:this.state.isReadonly?"Close":"Cancel"};return this.state.isReadonly||(r.okLabel=this.state.editMode?"Save":"Add Line Item",r.onOK=function(){return Pe(e,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.submitForm()];case 1:return e.sent(),[2]}}))}))}),t.createElement(ar,Ge({},r),this.state.showDialog&&t.createElement(T.ValidatorForm,{instantValidate:!0,onSubmit:function(){return null},ref:function(t){return e.customPropertiesForm=t}},t.createElement(s.Grid,{container:!0,spacing:16,style:{marginTop:"5px"}},t.createElement(s.Grid,{item:!0,xs:12},this.state.editMode?t.createElement(s.TextField,{label:"Product variant",name:"productName",variant:"outlined",value:this.props.lineItem.DisplayName,fullWidth:!0,disabled:!0}):t.createElement(js,{onSelected:function(t){e.handleEntrySearchSelected(t)},onSearchFieldChanged:function(t){e.handleEntrySearchChanged(t)}}),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.LineItemCode)),this.props.orderForm.Shipments.length>1&&t.createElement(s.Grid,{item:!0,xs:12},t.createElement(_t,{label:"Shipment",fullWidth:!0,value:this.state.shipmentId,options:this.state.shipmentOptions,disabled:this.state.editMode,required:!0,onChange:function(t){e.setState({shipmentId:t})}}),t.createElement(s.Typography,{variant:"caption",color:"error"},this.state.errors.ShipmentId)),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.TextField,{label:"Quantity",name:"Quantity",type:"number",variant:"outlined",value:this.state.quantity,onChange:this.quantityChangeHandler,onBlur:this.quantityBluredHandler,fullWidth:!0,error:!!this.state.errors.Quantity,helperText:this.state.errors.Quantity,required:!0,disabled:this.state.isReadonly,inputProps:{step:.1,min:0}})),this.state.editMode&&t.createElement(t.Fragment,null,t.createElement(s.Grid,{item:!0,xs:6},t.createElement(s.TextField,{label:"Discount",name:"DiscountValue",type:"number",variant:"outlined",value:this.state.discountValue,onChange:this.updateDiscountPrice,fullWidth:!0,disabled:this.state.isReadonly||"Cart"===this.props.orderGroup.Type,inputProps:{min:0},error:!!this.state.errors.DiscountValue,helperText:this.state.errors.DiscountValue})),t.createElement(s.Grid,{item:!0,xs:6},t.createElement(_t,{label:"Discount Type",value:this.state.discountType.toString(),options:[{label:"Percentage",value:"1"},{label:"Value",value:"2"}],onChange:function(t){e.setState({discountType:Number(t)},(function(){e.validateForm()}))},fullWidth:!0,disabled:this.state.isReadonly||"Cart"===this.props.orderGroup.Type})),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.TextField,{label:"Discount Description",variant:"outlined",value:this.state.discountDescription,onChange:this.updateDiscountDescription,fullWidth:!0,disabled:this.state.isReadonly||"Cart"===this.props.orderGroup.Type}))),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.TextField,{label:"Placed Price"+(this.props.orderGroup.Currency?"("+this.props.orderGroup.Currency+")":""),type:"number",name:"PlacedPrice",fullWidth:!0,variant:"outlined",value:this.state.placedPrice,onChange:this.updatePlacedPrice,error:!!this.state.errors.PlacedPrice,helperText:this.state.errors.PlacedPrice,inputProps:{min:0,step:.1},InputLabelProps:{shrink:!0},required:!0,disabled:this.state.isReadonly||"Cart"===this.props.orderGroup.Type||this.state.isBundle}),this.state.defaultPlacedPrice>=0&&this.state.defaultPlacedPrice!==this.state.placedPrice&&t.createElement(s.Typography,{variant:"caption",component:"h6"},"Default PlacedPrice is ",t.createElement("b",null,this.state.defaultPlacedPrice))),this.props.lineItem.Properties&&this.props.lineItem.Properties.map((function(r,n){return t.createElement(s.Grid,{item:!0,xs:12,key:n},t.createElement(Rn,{key:n,property:r,isReadonly:e.state.isReadonly||!r.IsEditable,onPropertyChanged:e.customPropertyChangedHandler}))})))))},r}(t.Component),Qs=n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup,n=r.Forms[e.orderGroup.selectedFormIndex];return Ge({orderGroup:r,orderForm:n},t)}))(zs),Ks=function(){},Xs=function(e){function r(t){var r=e.call(this,t)||this;return r.handleReturnCommentChange=function(e){r.setState({returnComment:e.target.value})},r.state={isLoadingResource:!1,returnReasons:Array(),returnLineItems:Array(),returnComment:""},r}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return this.initReturnLineItem(),[4,this.getData()];case 1:return e.sent(),[2]}}))}))},r.prototype.initReturnLineItem=function(){var e=this.props.lineItems.map((function(e){return Ge(Ge({},e),{OriginalLineItemId:e.LineItemId,ReturnQuantity:e.ReturnableQuantity,ReturnReason:""})}));this.setState({returnLineItems:e})},r.prototype.getData=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return this.setState({isLoadingResource:!0}),[4,Zt.OrderGroup.getReturnReasons()];case 1:return e=r.sent(),t=e.map((function(e){return{label:e.Label,value:e.Label}})),this.setState({returnReasons:t,isLoadingResource:!1}),[2]}}))}))},r.prototype.onCloseDialog=function(){this.props.closeView()},r.prototype.onCreateReturn=function(){return Pe(this,void 0,void 0,(function(){var e,t,r;return Ne(this,(function(n){switch(n.label){case 0:if(!this.validate())return this.props.dispatch(rt.ApplicationActions.showNotification("Please input valid return information!")),[2];(e=new Ks).LineItems=this.state.returnLineItems,e.ReturnComment=this.state.returnComment,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Zt.OrderGroup.createReturn(this.props.orderGroupId,e)];case 2:return(t=n.sent()).ReturnFormId&&zr.push(vt+"/"+this.props.orderGroupId+"/returns/"+t.ReturnFormId),this.props.closeView(),[3,4];case 3:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,4];case 4:return[2]}}))}))},r.prototype.validate=function(){return!!this.state.returnLineItems.every((function(e){return e.ReturnQuantity>0&&""!==e.ReturnReason}))},r.prototype.render=function(){var e=this;return t.createElement(ar,{title:"Create Return",open:!0,large:!0,onClose:function(){e.props.closeView()},onOK:function(){return Pe(e,void 0,void 0,(function(){return Ne(this,(function(e){return this.onCreateReturn(),[2]}))}))},okLabel:"Create",closeLabel:"Cancel"},t.createElement(d,{container:!0,spacing:16,direction:"column"},!this.state.isLoadingResource&&this.state.returnLineItems.map((function(r,n){return t.createElement(d,{item:!0,key:n},t.createElement(d,{container:!0,direction:"row",key:n,spacing:8},t.createElement(d,{item:!0,xs:7},t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,xs:2},t.createElement(_s,Ge({},r))),t.createElement(d,{item:!0,xs:10},t.createElement(s.Typography,{variant:"body1",color:"inherit"},r.DisplayName),t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,xs:6},t.createElement(s.Typography,{variant:"body2",color:"inherit",align:"left"},r.Code)),t.createElement(d,{item:!0,xs:6},t.createElement(s.Typography,{variant:"body2",color:"inherit",align:"right"},"Shipment No: ",r.ShipmentNo)))))),t.createElement(d,{item:!0,xs:2},t.createElement(be,{outlined:!0,style:{width:"100%"},label:"Return Quantity"},t.createElement(Ie.Input,{type:"number",step:"0.01",max:r.ReturnableQuantity,min:0,value:r.ReturnQuantity.toString(),onChange:function(t){r.ReturnQuantity=Number.parseFloat(t.currentTarget.value),e.setState({returnLineItems:e.state.returnLineItems})}}))),t.createElement(d,{item:!0,xs:3},t.createElement(_t,{label:"Return Reason",fullWidth:!0,value:r.ReturnReason,options:e.state.returnReasons,required:!0,onChange:function(t){r.ReturnReason=t,e.setState({returnLineItems:e.state.returnLineItems})}}))))}))),t.createElement(d,{container:!0,direction:"column",spacing:8},t.createElement(d,{item:!0},t.createElement(s.Typography,null,"Comment")),t.createElement(d,{item:!0},t.createElement(be,{textarea:!0,label:"Comment",size:5,fullWidth:!0},t.createElement(Ie.Input,{style:{height:"100px"},maxLength:1024,value:this.state.returnComment,onChange:this.handleReturnCommentChange})))))},r}(t.Component),Js=s.withStyles((function(e){e.spacing;return s.createStyles({})}))(n.connect((function(e,t){return Ge({},t)}))(Xs)),Zs={productRemoved:{textDecorationLine:"line-through"}},$s=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={isReturnDialogOpen:!1,selectedLineItems:[],isAddDialogOpen:!1,currentLineItem:{},contextAction:{isDeleteButtonVisible:!0,isCreateReturnButtonVisible:!1},delConfirmDialog:{isOpen:!1,onConfirm:function(){return null}}},r.tableInstance={},r.columns=[{name:"NAME",render:function(e,r){return t.createElement(s.Grid,{container:!0,direction:"row",alignItems:"center",wrap:"nowrap",spacing:8},t.createElement(s.Grid,{item:!0},t.createElement(_s,Ge({},e))),t.createElement(s.Grid,{item:!0,style:e.IsEntryAvailable?void 0:Zs.productRemoved},t.createElement(x,{variant:"body2",color:"inherit"},e.DisplayName),t.createElement(x,null,e.Code)))}},{name:"PLACED PRICE",right:!0,render:function(e,r){return t.createElement(x,null,e.PlacedPrice.Amount," ",e.PlacedPrice.Currency)}},{name:"SHIPMENT NO",selector:"ShipmentNo",right:!0},{name:"SHIPMENT STATUS",selector:"ShipmentStatus",render:function(e,t){return Mn(e.ShipmentStatus)}},{name:"TOTAL DISCOUNT",right:!0,render:function(e,r){var n,s,a;return t.createElement(x,null,null===(n=e.DiscountTotal)||void 0===n?void 0:n.Amount.toFixed(null===(s=e.DiscountTotal)||void 0===s?void 0:s.Fractions)," ",null===(a=e.DiscountTotal)||void 0===a?void 0:a.Currency)}},{name:"QUANTITY",selector:"Quantity",right:!0},{name:"TOTAL",right:!0,render:function(e,r){var n,s,a;return t.createElement(x,null,null===(n=e.DiscountedPrice)||void 0===n?void 0:n.Amount.toFixed(null===(s=e.DiscountedPrice)||void 0===s?void 0:s.Fractions)," ",null===(a=e.DiscountedPrice)||void 0===a?void 0:a.Currency)}},{width:50,render:function(e,n){var s=new Array;return r.isEditableLineItem(e)&&!e.IsGift&&e.IsEntryAvailable?(s.push({title:"Edit",clickHandler:function(t){r.setState({isAddDialogOpen:!0,currentLineItem:e})}}),s.push({title:"Delete",clickHandler:function(e){var t={isOpen:!0,onConfirm:function(){r.deleteLineItems([r.state.currentLineItem])}};r.setState({currentLineItem:e,delConfirmDialog:t})}})):s.push({title:"View",clickHandler:function(t){r.setState({isAddDialogOpen:!0,currentLineItem:e})}}),e.ReturnableQuantity>0&&s.push({title:"Create Return",clickHandler:function(e){r.openReturnDialog([e])}}),0===s.length?null:t.createElement(is,{actions:s,rowData:e,rowIndex:n})}}],r.deleteLineItems=function(e){return Pe(r,void 0,void 0,(function(){var t,r,n,s,a,i;return Ne(this,(function(o){switch(o.label){case 0:return this.setState({delConfirmDialog:{isOpen:!1}}),this.props.orderGroup.IsDraft?(t=JSON.parse(JSON.stringify(this.props.orderGroup)),r=e.map((function(e){return e.Code})),t.Forms[0].Shipments[0].LineItems=t.Forms[0].Shipments[0].LineItems.filter((function(e){return-1===r.indexOf(e.Code)})),[4,Zt.OrderGroup.calculateOrder(t)]):[3,2];case 1:return t=o.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(t)),[3,11];case 2:n=0,o.label=3;case 3:if(!(n<e.length))return[3,8];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,Zt.OrderGroup.deleteLineItem(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId,e[n].LineItemId)];case 5:return o.sent(),[3,7];case 6:return s=o.sent(),this.props.dispatch(rt.ApplicationActions.showNotification('Error occurred while deleting line item "'+e[n].DisplayName+'". <br/> '+s.message)),[3,8];case 7:return n++,[3,3];case 8:return o.trys.push([8,10,,11]),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 9:return a=o.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(a)),[3,11];case 10:return i=o.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(i.message)),[3,11];case 11:return[2]}}))}))},r.openReturnDialog=function(e){r.setState({isReturnDialogOpen:!0,selectedLineItems:e})},r.handleOnRowSelected=function(e,t){return Pe(r,void 0,void 0,(function(){var e,t,r,n,s;return Ne(this,(function(a){for(e=!0,t=!0,r=this.tableInstance.getSelectedRows(),n=0;n<r.length;n++){if((s=r[n]).IsGift){e=!1,0===s.ReturnableQuantity&&(t=!1);break}0===s.ReturnableQuantity&&(t=!1),this.isShipmentEditable(s.ShipmentStatus)||(e=!1)}return this.setState({contextAction:{isDeleteButtonVisible:e,isCreateReturnButtonVisible:t}}),[2]}))}))},r.isShipmentEditable=function(e){return e===hs.AwaitingInventory||e===hs.InventoryAssigned},r.buildTableProps=function(){var e={columns:r.columns,data:r.props.lineItems,selectableRows:!0,tableInstance:r.tableInstance,onRowSelected:r.handleOnRowSelected,onHeaderRowSelected:r.handleOnRowSelected},t={buttons:[]};r.props.isReadonly||r.props.shipments.filter((function(e){return r.isShipmentEditable(e.OrderShipmentStatus.Name)})).length>0&&t.buttons&&t.buttons.push({title:"Add Line Items",clickHandler:function(e){r.setState({isAddDialogOpen:!0,currentLineItem:{}})}});e.toolbar=t;var n=new Array;return!r.props.isReadonly&&r.state.contextAction.isDeleteButtonVisible&&n.push({title:"Delete",clickHandler:function(e){var t={isOpen:!0,onConfirm:function(){var e=r.tableInstance.getSelectedRows();r.deleteLineItems(e),r.tableInstance.setHeaderRowChecked(!1)}};r.setState({delConfirmDialog:t})}}),r.state.contextAction.isCreateReturnButtonVisible&&n.push({title:"Create Return",clickHandler:function(e){var t=r.tableInstance.getSelectedRows();r.openReturnDialog(t),r.tableInstance.setHeaderRowChecked(!1)}}),n.length>0&&(e.contextActions=n),e},r}return Te(r,e),r.prototype.componentDidMount=function(){var e=this.props.lineItems.filter((function(e){return!e.IsEntryAvailable})).map((function(e){return e.Code}));if(e.length>0){var t="You can not edit line items "+e.join(", ")+" because their entries have been removed or their code have been changed.";this.props.dispatch(rt.ApplicationActions.showNotification(t))}},r.prototype.isEditableLineItem=function(e){return!e.Code||!!e.IsEntryAvailable&&(!e.IsGift&&this.isShipmentEditable(e.ShipmentStatus))},r.prototype.render=function(){var e=this,r=this.buildTableProps();return t.createElement("div",null,t.createElement(x,{variant:"h6",gutterBottom:!0},"Line Items"),t.createElement(wn,Ge({},r)),this.state.isAddDialogOpen&&t.createElement(Qs,{onClose:function(){return e.setState({isAddDialogOpen:!1})},lineItem:this.state.currentLineItem,isReadonly:!this.isEditableLineItem(this.state.currentLineItem)}),this.state.delConfirmDialog.isOpen&&t.createElement(ir,{title:"Delete Line Item",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:this.state.delConfirmDialog.onConfirm,onClose:function(){e.setState({delConfirmDialog:{isOpen:!1}})}},t.createElement(x,{variant:"body1"},"Are you sure you want to delete?")),this.state.isReturnDialogOpen&&t.createElement(Js,{lineItems:this.state.selectedLineItems,orderGroupId:this.props.orderGroup.OrderGroupId,closeView:function(){return e.setState({isReturnDialogOpen:!1})}}))},r}(t.Component);function ea(e){if(!e.Shipments||0===e.Shipments.length)return[];for(var t=new Array,r=function(r){var n=e.Shipments[r];n.LineItems.forEach((function(e){e.ShipmentNo=r+1,e.ShipmentStatus=n.OrderShipmentStatus.Name,t.push(e)}))},n=0;n<e.Shipments.length;n++)r(n);return t}var ta=n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup,n=r.Forms[e.orderGroup.selectedFormIndex];return{lineItems:ea(n),orderGroup:r,shipments:n.Shipments,isReadonly:t.isReadonly}}))($s),ra=function(e){function r(t){var r=e.call(this,t)||this;return r.orderGroupApi=new Nt,t.isCreateNewOrder||r.getData(),r}return Te(r,e),r.prototype.getData=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroupType,this.props.orderGroupId)];case 1:return e=r.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(e)),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.prototype.render=function(){return t.createElement(d,{container:!0,direction:"column",spacing:32},t.createElement(d,{item:!0},t.createElement(vs,{shipments:this.props.orderForm.Shipments})),t.createElement(d,{item:!0},t.createElement(ta,{isReadonly:this.props.isReadonly})),t.createElement(d,{item:!0,style:{textAlign:"right",paddingRight:"100px"}},t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,md:!0},t.createElement(s.Typography,{variant:"subtitle2"},"Line Item Total")),t.createElement(d,{item:!0,md:1},t.createElement(En,{amount:this.props.orderForm.ItemsTotal,variant:"subtitle2",align:"right"}))),t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,md:!0},t.createElement(s.Typography,{variant:"subtitle2"},"Shipping Total")),t.createElement(d,{item:!0,md:1},t.createElement(En,{amount:this.props.orderForm.ShippingTotal,variant:"subtitle2",align:"right"}))),t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,md:!0},t.createElement(s.Typography,{variant:"subtitle2"},"Handling Total")),t.createElement(d,{item:!0,md:1},t.createElement(En,{amount:this.props.orderForm.HandlingTotal,variant:"subtitle2",align:"right"}))),t.createElement(d,{container:!0,direction:"row"},t.createElement(d,{item:!0,md:!0},t.createElement(s.Typography,{variant:"subtitle2"},"Form Total")),t.createElement(d,{item:!0,md:1},t.createElement(En,{amount:this.props.orderForm.Total,variant:"subtitle2",align:"right"})))),t.createElement(d,{item:!0},t.createElement(Fs,{promotionInformation:this.props.orderForm.Promotions,isReadonly:this.props.isReadonly,isCreateNewOrder:this.props.isCreateNewOrder})),("Cart"!==this.props.orderGroupType&&!this.props.isCreateNewOrder||this.props.orderForm.Payments.length>0)&&t.createElement(d,{item:!0},t.createElement(Ds,{payments:this.props.orderForm.Payments})))},r}(t.Component),na=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({})}))(n.connect((function(e,t){var r=e.orderGroup.currentOrderGroup;return{orderGroupId:r.OrderGroupId,orderForm:t.orderForm,orderGroupType:r.Type,classes:t.classes,isReadonly:$n(r),isCreateNewOrder:r.IsDraft}}))(ra)),sa=function(e){function r(t){var r=e.call(this,t)||this;r.state={selectedOrderTabIndex:0,showCancelPaymentPlanConfirm:!1},r.orderTabNames=new Array,r.closeOrderGroupView=function(){r.props.dispatch(rt.ApplicationActions.closeOrderGroupView()),r.props.dispatch(rt.ContactActions.setCurrentContact(null)),r.props.dispatch(rt.ContactActions.setCurrentAddress(null)),r.props.dispatch(rt.PaymentActions.hideAcceptPaymentForm()),r.props.dispatch(rt.PaymentActions.setPaymentMethodId("")),r.props.dispatch(rt.PaymentActions.setPayment(null)),r.props.dispatch(rt.PaymentActions.setBillingAddress(null)),r.props.dispatch(rt.PaymentActions.setBillingAddressDropdownIsExpanded(!1)),r.props.dispatch(rt.OrderGroupActions.setPaymentPlanSetting({}))},r.orderTabIndexChangedHandler=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return this.setState({selectedOrderTabIndex:e}),(t=new URLSearchParams(zr.location.search)).set("tab",this.orderTabNames[e].key),zr.replace(zr.location.pathname+"?"+t.toString()),[2]}))}))},r.customPropertyChangedHandler=function(e){return Pe(r,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Zt.MetaField.updateOrderGroupMetaFields(this.props.orderGroup.OrderGroupId,this.props.orderGroup.Type,e)];case 1:return n.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroup.Type,this.props.orderGroup.OrderGroupId)];case 2:return t=n.sent(),this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(t)),[3,4];case 3:return r=n.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,4];case 4:return[2]}}))}))},r.convertCartToOrderHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),es(this.props.orderGroup)?[4,Zt.Cart.convertToPurchaseOrder(this.props.orderGroup.OrderGroupId)]:[3,2];case 1:return e=r.sent(),zr.replace(vt+"/"+e.OrderGroupId),Qr(It,pt+"?type=Order"),[3,3];case 2:this.props.dispatch(rt.ApplicationActions.showNotification("Cannot convert an empty cart to purchase order.")),r.label=3;case 3:return[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return[2]}}))}))},r.convertCartToPaymentPlanHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),es(this.props.orderGroup)?[4,Zt.Cart.convertToPaymentPlan(this.props.orderGroup.OrderGroupId)]:[3,2];case 1:return e=r.sent(),zr.replace(St+"/"+e.OrderGroupId),Qr(At,pt+"?type=PaymentPlan"),[3,3];case 2:this.props.dispatch(rt.ApplicationActions.showNotification("Cannot convert an empty cart to payment plan.")),r.label=3;case 3:return[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return[2]}}))}))},r.convertPaymentPlanToOrderHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),es(this.props.orderGroup)?[4,Zt.PaymentPlan.convertToPurchaseOrder(this.props.orderGroup.OrderGroupId)]:[3,2];case 1:return e=r.sent(),zr.replace(vt+"/"+e.OrderGroupId),Qr(It,St+"/"+this.props.orderGroup.OrderGroupId),[3,3];case 2:this.props.dispatch(rt.ApplicationActions.showNotification("Cannot convert an empty payment plan to purchase order.")),r.label=3;case 3:return[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return[2]}}))}))},r.cancelPaymentPlanHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:this.setState({showCancelPaymentPlanConfirm:!1}),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,Zt.PaymentPlan.cancelPaymentPlan(this.props.orderGroup.OrderGroupId)];case 2:return r.sent(),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroupType,this.props.orderGroupId)];case 3:return e=r.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(e)),[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return[2]}}))}))},r.loadPaymentMethods=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.PaymentMethod.getPaymentMethods(this.props.orderGroup.MarketId)];case 1:return e=t.sent(),this.props.dispatch(rt.PaymentActions.setPaymentMethods(e)),[2]}}))}))},r.loadCurrencies=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.Currency.getCurrencies(this.props.orderGroup.MarketId)];case 1:return e=r.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrencies(e)),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.initOrderTabs(t);var n=new URLSearchParams(zr.location.search).get("tab");if(n){var s=r.orderTabNames.findIndex((function(e){return e.key===n}));s>0&&(r.state.selectedOrderTabIndex=s)}return r}return Te(r,e),r.prototype.componentDidUpdate=function(){this.initOrderTabs(this.props)},r.prototype.initOrderTabs=function(e){var t=this;this.orderTabNames=[],this.orderTabNames.push({key:"summary",name:"Summary"}),this.orderTabNames.push({key:"details",name:"Form Details "}),"Order"===e.orderGroupType&&this.orderTabNames.push({key:"return",name:"Return & Exchange"}),this.orderTabNames.push({key:"contact",name:"Contact Details"}),"PaymentPlan"===e.orderGroupType&&(this.orderTabNames.push({key:"plansettings",name:"Settings"}),this.orderTabNames.push({key:"orders",name:"Orders"})),"Order"===e.orderGroupType&&this.props.orderDetailExtraTabs&&this.props.orderDetailExtraTabs.map((function(e,r){t.orderTabNames.push({key:"extraTab_"+r,name:e.title})})),"Cart"===e.orderGroupType&&this.props.cartDetailExtraTabs&&this.props.cartDetailExtraTabs.map((function(e,r){t.orderTabNames.push({key:"extraTab_"+r,name:e.title})})),"PaymentPlan"===e.orderGroupType&&this.props.paymentPlanExtraTabs&&this.props.paymentPlanExtraTabs.map((function(e,r){t.orderTabNames.push({key:"extraTab_"+r,name:e.title})}))},r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}}))}))},r.prototype.shouldComponentUpdate=function(e,t){var r=this;return e.orderGroupId!==this.props.orderGroupId&&(zr.push(Zt.OrderGroup.getOrderGroupRouting(e.orderGroupType)+"/"+e.orderGroupId),setTimeout((function(){r.getData()}),200)),!0},r.prototype.getData=function(){return Pe(this,void 0,void 0,(function(){var e,t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,Zt.OrderGroup.getSingleOrderGroup(this.props.orderGroupType,this.props.orderGroupId)];case 1:return e=s.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(e)),e.ValidationMessages.length>0&&this.props.dispatch(rt.ApplicationActions.showNotification(e.ValidationMessages.join(", "))),e.Customer.IsAnonymous?[3,3]:[4,Zt.Contact.get(e.Customer.Id)];case 2:t=s.sent(),this.props.dispatch(rt.ContactActions.setCurrentContact(t)),s.label=3;case 3:return this.loadCurrencies(),[4,Zt.Shipment.getShippingMethods()];case 4:return r=s.sent(),this.props.dispatch(rt.ShipmentActions.setShippingMethods(r)),"Cart"!==this.props.orderGroup.Type&&this.loadPaymentMethods(),[3,6];case 5:return n=s.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),404===n.response.status&&zr.replace("/?type="+this.props.orderGroupType),[3,6];case 6:return[2]}}))}))},r.prototype.closeView=function(){var e=new URLSearchParams(zr.location.search).get("returnUrl"),t=void 0;if(e)return zr.push(e),void this.closeOrderGroupView();switch(this.props.orderGroupType){case"Order":t=Kr(It);break;case"PaymentPlan":t=Kr(At);break;default:t=Kr(bt)}void 0!==t?zr.push(t):zr.push("/"),this.closeOrderGroupView()},r.prototype.render=function(){var e,r,n=this,a=this.orderTabNames[this.state.selectedOrderTabIndex].key,i=function(){return t.createElement(t.Fragment,null)},o=null===(e=this.props.extendUI)||void 0===e?void 0:e.topPlaceHolder,c=null===(r=this.props.extendUI)||void 0===r?void 0:r.bottomPlaceHolder;if(a.startsWith("extraTab_")){var l=parseInt(a.substring(a.lastIndexOf("_")+1,a.length),10);"Order"===this.props.orderGroupType&&this.props.orderDetailExtraTabs&&(i=this.props.orderDetailExtraTabs[l].render),"Cart"===this.props.orderGroupType&&this.props.cartDetailExtraTabs&&(i=this.props.cartDetailExtraTabs[l].render),"PaymentPlan"===this.props.orderGroupType&&this.props.paymentPlanExtraTabs&&(i=this.props.paymentPlanExtraTabs[l].render)}return this.props.orderGroup&&t.createElement("div",null,t.createElement(Zn,null),t.createElement(fr,{closeView:function(){return n.closeView()},title:("PaymentPlan"===this.props.orderGroupType?"Payment Plan":this.props.orderGroupType)+" Details",showDialogActions:!0},o&&t.createElement(o,{Id:this.props.orderGroupId,className:"top-placeholder"}),t.createElement(d,{container:!0,direction:"column",spacing:8},t.createElement(d,{item:!0},"Order"===this.props.orderGroup.Type&&t.createElement(ss,null),"Cart"===this.props.orderGroup.Type&&t.createElement(d,{container:!0,justify:"flex-end",spacing:8},t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.convertCartToOrderHandler,id:"convertToPurchaseOrder"},"Convert to purchase order")),t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.convertCartToPaymentPlanHandler,id:"convertToPaymentPlan"},"Convert to payment plan"))),"PaymentPlan"===this.props.orderGroup.Type&&t.createElement(d,{container:!0,justify:"flex-end",spacing:8},this.props.orderGroup.CanConvertPaymentPlanToPurchaseOrder&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.convertPaymentPlanToOrderHandler,id:"convertPaymenPlanToPurchaseOrder"},"Create First Purchase Order")),this.props.orderGroup.OrderStatus===zn.InProgress&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return n.setState({showCancelPaymentPlanConfirm:!0})},id:"cancelPaymentPlan"},"Cancel Payment Plan")))),t.createElement(d,null,t.createElement(U,{position:"static",color:"default"},t.createElement(f.TabBar,{activeIndex:this.state.selectedOrderTabIndex,handleActiveIndexUpdate:this.orderTabIndexChangedHandler},this.orderTabNames.map((function(e){return t.createElement(f.Tab,{key:e.key},e.name)})))),t.createElement(s.Card,null,t.createElement(s.CardContent,null,t.createElement(d,null,"summary"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&("Cart"===this.props.orderGroupType?t.createElement(Wn,{orderGroup:this.props.orderGroup}):t.createElement(Hn,{orderGroup:this.props.orderGroup,isReadonly:this.props.isReadonly})),"details"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(d,null,t.createElement(na,{orderForm:this.props.orderGroup.Forms[0]})),"return"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&"Order"===this.props.orderGroup.Type&&t.createElement(d,null,t.createElement(us,{orderGroupId:this.props.orderGroupId})),"contact"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(d,null,t.createElement(jn,{orderGroup:this.props.orderGroup})),"plansettings"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&"PaymentPlan"===this.props.orderGroup.Type&&t.createElement(d,null,t.createElement(Jn,{editMode:!1,paymentPlan:this.props.orderGroup})),"orders"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&"PaymentPlan"===this.props.orderGroup.Type&&t.createElement(d,null,t.createElement(ds,{paymentPlan:this.props.orderGroup})),i&&t.createElement(i,{Id:this.props.orderGroupId,className:"extra-tab-content"})))))),c&&t.createElement(c,{Id:this.props.orderGroupId,className:"bottom-placeholder"}),this.state.showCancelPaymentPlanConfirm&&t.createElement(ir,{title:"Cancel Payment Plan",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:this.cancelPaymentPlanHandler,onClose:function(){n.setState({showCancelPaymentPlanConfirm:!1})}},t.createElement(s.Typography,{variant:"body1"},"Are you sure you want to cancel this payment plan?"))))},r}(t.Component),aa=function(e,t){var r,n,s,a;switch(e){case"Order":a=null===(r=t.setting.pageConfig.orderDetail)||void 0===r?void 0:r.extendUI;break;case"Cart":a=null===(n=t.setting.pageConfig.cartDetail)||void 0===n?void 0:n.extendUI;break;case"PaymentPlan":a=null===(s=t.setting.pageConfig.paymentPlanDetail)||void 0===s?void 0:s.extendUI}return a},ia=o.withStyles((function(){return s.createStyles({})}))(n.connect((function(e,t){var r,n,s,a,i,o,c,l,u,d;return{orderGroupType:t.orderGroupType,orderGroupId:t.orderGroupId,orderGroup:e.orderGroup.currentOrderGroup,rowsPerPage:e.application.rowsPerPage,orderStatuses:e.orderGroup.orderStatuses,currencies:e.orderGroup.currencies,isReadonly:$n(e.orderGroup.currentOrderGroup),selectedEntry:e.orderGroup.selectedEntry,hasReadonlyOrderStatus:(d=e.orderGroup.currentOrderGroup,!!d&&("Cart"===d.Type||d.OrderStatus===zn.Cancelled||d.OrderStatus===zn.Completed)),classes:t.classes,orderDetailExtraTabs:null===(s=null===(n=null===(r=e.setting.pageConfig)||void 0===r?void 0:r.orderDetail)||void 0===n?void 0:n.config)||void 0===s?void 0:s.extraTabs,cartDetailExtraTabs:null===(o=null===(i=null===(a=e.setting.pageConfig)||void 0===a?void 0:a.cartDetail)||void 0===i?void 0:i.config)||void 0===o?void 0:o.extraTabs,paymentPlanExtraTabs:null===(u=null===(l=null===(c=e.setting.pageConfig)||void 0===c?void 0:c.paymentPlanDetail)||void 0===l?void 0:l.config)||void 0===u?void 0:u.extraTabs,extendUI:aa(t.orderGroupType,e)}}))(sa)),oa=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){return t.createElement(ia,Ge({},this.props))},r}(t.Component),ca=function(e){return t.createElement(d,{container:!0,justify:"flex-end",direction:"row",alignItems:"center",spacing:8},t.createElement(d,{item:!0},t.createElement(x,{style:{fontWeight:"normal"},variant:e.variant},e.label)),t.createElement(d,{item:!0},t.createElement(En,{amount:e.amount,align:"right",variant:e.variant,style:{fontWeight:"bold",paddingRight:16}})))},la=function(e){function r(t){var r=e.call(this,t)||this;return r.state={loaded:!1,errorMessage:"",refundAmountMessage:"",paymentMethodOptions:[],currentPayment:{},returnOrderSummary:{ItemTotal:0,InvalidatedDiscountsTotal:0,ExchangeTotal:0,RefundAmount:0,ExistingPayments:[]},refundAmount:0,maxRefundAmount:0},r.refundForm={},r.existPaymentHandleChange=function(e){var t=r.state.returnOrderSummary.ExistingPayments[e];r.setState({currentPayment:t,refundAmount:Math.min(r.state.maxRefundAmount,t.Amount.Amount)})},r.refundAmountHandlerChange=function(e,t){r.setState({refundAmount:Number(t)})},r.completeReturn=function(){return Pe(r,void 0,void 0,(function(){var e,t,r=this;return Ne(this,(function(n){switch(n.label){case 0:if(""!==this.validateRefundForm())return[2];e=this.state.currentPayment,n.label=1;case 1:return n.trys.push([1,5,,6]),this.state.refundAmount>0?[4,Zt.OrderGroup.createRefund(this.props.orderGroupId,this.props.orderGroup.Forms[0].OrderFormId,{existingPaymentId:e.PaymentId,amount:this.state.refundAmount})]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,Zt.OrderGroup.completeReturn(this.props.orderGroupId,this.props.returnFormId).catch((function(e){r.setState({errorMessage:e.message})}))];case 4:return n.sent(),this.props.onClose(),zr.go(0),[3,6];case 5:return t=n.sent(),this.setState({errorMessage:t.message}),[3,6];case 6:return[2]}}))}))},r.state.paymentMethodOptions=r.props.paymentMethods.map((function(e){return{label:e.Name,value:e.PaymentMethodId}})),r}return Te(r,e),r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.OrderGroup.getRefundInfo(this.props.orderGroupId,this.props.returnFormId)];case 1:return(e=t.sent())&&this.setState({returnOrderSummary:Ge({},e.data),maxRefundAmount:e.data.RefundAmount,loaded:!0}),this.state.returnOrderSummary.ExistingPayments.length>0&&this.existPaymentHandleChange(0),[2]}}))}))},r.prototype.validateRefundForm=function(){var e="",t=this.state.currentPayment;return this.state.currentPayment?this.state.refundAmount>t.Amount.Amount&&(e="Total Refund Amount cannot exceed "+t.Amount.Amount):e="Please select Existing Payments!",this.setState({errorMessage:e}),e},r.prototype.render=function(){var e=this;return t.createElement(ar,{open:!0,title:"Create Refund",okLabel:"OK",onOK:this.completeReturn,closeLabel:"Cancel",onClose:function(){e.props.onClose()}},this.state.loaded&&t.createElement(T.ValidatorForm,{instantValidate:!0,onSubmit:function(){return null},ref:function(t){return e.refundForm=t}},t.createElement(s.Grid,{container:!0,direction:"column",spacing:16},t.createElement(s.Grid,{item:!0},t.createElement("span",{style:{color:"red"}},this.state.errorMessage)),t.createElement(s.Grid,{item:!0},t.createElement(s.TextField,{variant:"outlined",type:"number",label:"Return Items ("+this.props.orderGroup.Currency+")",fullWidth:!0,disabled:!0,value:this.state.returnOrderSummary.ItemTotal})),t.createElement(s.Grid,{item:!0},t.createElement(s.TextField,{variant:"outlined",type:"number",label:"Invalidated Discounts ("+this.props.orderGroup.Currency+")",fullWidth:!0,disabled:!0,value:this.state.returnOrderSummary.InvalidatedDiscountsTotal})),t.createElement(s.Grid,{item:!0},t.createElement(s.TextField,{variant:"outlined",type:"number",label:"Exchange Total ("+this.props.orderGroup.Currency+")",fullWidth:!0,disabled:!0,value:this.state.returnOrderSummary.ExchangeTotal})),t.createElement(s.Grid,{item:!0},t.createElement(s.TextField,{variant:"outlined",type:"number",label:"Refund Total ("+this.props.orderGroup.Currency+")",fullWidth:!0,disabled:!0,value:this.state.maxRefundAmount})),t.createElement(s.Grid,{item:!0},this.state.returnOrderSummary.ExistingPayments.map((function(r,n){return t.createElement(s.Grid,{container:!0,key:n},t.createElement(s.Grid,{item:!0},t.createElement(s.Grid,{container:!0,alignItems:"center",spacing:8},t.createElement(s.Grid,{item:!0},t.createElement(s.Radio,{value:r.PaymentId,onChange:function(t){return e.existPaymentHandleChange(n)},checked:r.PaymentId===e.state.currentPayment.PaymentId,style:{marginLeft:"-12px"}})),t.createElement(s.Grid,{item:!0},t.createElement(s.Typography,null,r.PaymentMethodName+" ("+r.TransactionType+") \n                              - "+r.Amount.Amount+" "+e.props.orderGroup.Currency)))),e.state.currentPayment.PaymentId===r.PaymentId&&t.createElement(s.Grid,{item:!0,xs:12},t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,xs:6},t.createElement(s.TextField,{variant:"outlined",type:"number",label:"Amount ("+e.props.orderGroup.Currency+")",fullWidth:!0,value:e.state.refundAmount,onChange:function(t){return e.refundAmountHandlerChange(r,t.target.value)},inputProps:{min:0,max:e.state.maxRefundAmount,step:.1}})),t.createElement(s.Grid,{item:!0,xs:6},t.createElement(_t,{label:"Payment Method",options:e.state.paymentMethodOptions,fullWidth:!0,value:r.PaymentMethodId,disabled:!0})),t.createElement(s.Grid,{item:!0,xs:12,style:{marginTop:"-10px"}},e.state.refundAmount!==e.state.maxRefundAmount&&t.createElement("span",{style:{fontSize:"12px",color:"red"}},"The amount you are refunding is different from the suggested refund total")))))}))))))},r}(t.Component),ua=n.connect((function(e,t){return Ge(Ge({},t),{paymentMethods:e.payment.paymentMethods,orderGroup:e.orderGroup.currentOrderGroup})}))(la),da=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={confirmDialog:{isOpen:!1,title:"",message:"",closeButtonLabel:"",confirmButtonLabel:"",onConfirm:function(){return null}},isOpenRefundDialog:!1},t}return Te(r,e),r.prototype.cancelReturn=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Zt.OrderGroup.cancelReturn(this.props.orderGroupId,this.props.returnOrderForm.OrderFormId)];case 1:return t.sent(),this.props.onUpdated(),[3,3];case 2:return e=t.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(e.message)),[3,3];case 3:return this.closeDialog(),[2]}}))}))},r.prototype.updateAcknowledgeReceiptItems=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Zt.OrderGroup.acknowledgeReceiptItems(this.props.orderGroupId,this.props.returnOrderForm.OrderFormId)];case 1:return t.sent(),this.props.onUpdated(),[3,3];case 2:return e=t.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(e.message)),[3,3];case 3:return this.closeDialog(),[2]}}))}))},r.prototype.closeDialog=function(){this.setState({confirmDialog:{isOpen:!1}})},r.prototype.showCancelConfirmDialog=function(){var e=this;this.setState({confirmDialog:{isOpen:!0,title:"Cancel Return",message:"Are you sure you want to cancel this return?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return e.cancelReturn()}}})},r.prototype.showAcknowledgeReceiptItemsConfirmDialog=function(){var e=this;this.setState({confirmDialog:{isOpen:!0,title:"Acknowledge Receipt Items",message:"Are you sure you want to acknowledge receipt items?",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:function(){return e.updateAcknowledgeReceiptItems()}}})},r.prototype.canShowCancelButton=function(){return this.props&&this.props.returnOrderForm&&(this.props.returnOrderForm.Status.Code===cs.AwaitingStockReturn||this.props.returnOrderForm.Status.Code===cs.AwaitingCompletion)},r.prototype.canShowAcknowledgeButton=function(){return this.props&&this.props.returnOrderForm&&this.props.returnOrderForm.Status.Code===cs.AwaitingStockReturn},r.prototype.canShowCompleteButton=function(){return this.props&&this.props.returnOrderForm&&this.props.returnOrderForm.Status.Code===cs.AwaitingCompletion},r.prototype.canShowViewExchangeButton=function(){return this.props&&this.props.returnOrderForm&&this.props.returnOrderForm.ExchangeOrderId>0},r.prototype.canShowCreateExchangeButton=function(){return this.canShowCancelButton()&&this.props.returnOrderForm.ExchangeOrderId<=0},r.prototype.showCreateRefundDialog=function(){this.setState({isOpenRefundDialog:!0})},r.prototype.createExchangeOrder=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.OrderGroup.initExchangeOrder(this.props.orderGroupId)];case 1:return e=t.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(e)),Qr("previous_order_create"),zr.push(Tt+"?returnFormId="+this.props.returnOrderForm.OrderFormId),[2]}}))}))},r.prototype.viewExchangeOrder=function(e){zr.push(vt+"/"+e+"?returnUrl="+Xr())},r.prototype.render=function(){var e=this;return t.createElement("div",null,t.createElement(d,{container:!0,justify:"flex-end",spacing:8},this.canShowCompleteButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.showCreateRefundDialog()}},"Complete Return")),this.canShowAcknowledgeButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.showAcknowledgeReceiptItemsConfirmDialog()}},"Acknowledge Receipt Items")),this.canShowViewExchangeButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.viewExchangeOrder(e.props.returnOrderForm.ExchangeOrderId)}},"View Exchange")),this.canShowCreateExchangeButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.createExchangeOrder()}},"Create Exchange")),this.canShowCancelButton()&&t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:function(){return e.showCancelConfirmDialog()}},"Cancel Return"))),t.createElement(ar,{open:this.state.confirmDialog.isOpen,title:this.state.confirmDialog.title,closeLabel:this.state.confirmDialog.closeButtonLabel,okLabel:this.state.confirmDialog.confirmButtonLabel,onOK:this.state.confirmDialog.onConfirm,onClose:function(){return e.closeDialog()}},t.createElement(s.Typography,{variant:"body1"},this.state.confirmDialog.message)),this.state.isOpenRefundDialog&&t.createElement(ua,{onClose:function(){e.setState({isOpenRefundDialog:!1})},orderGroupId:this.props.orderGroupId,returnFormId:this.props.returnOrderForm.OrderFormId}))},r}(t.Component),pa=n.connect((function(e,t){return Ge({},t)}))(da),ha=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={returnLineItem:t.props.returnLineItem,returnReasons:Array(),isLoadingResource:!1,returnQuantity:t.props.returnLineItem.ReturnQuantity},t.handleReturnQuantityChange=function(e){isNaN(e.target.value)?t.setState({returnQuantity:0}):t.setState({returnQuantity:Number(e.target.value)})},t.handleReturnReasonChange=function(e){var r=Ge({},t.state.returnLineItem);r.ReturnReason=e,t.setState({returnLineItem:r})},t.update=function(){return Pe(t,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.state.returnQuantity>this.state.returnLineItem.Quantity?(this.props.dispatch(rt.ApplicationActions.showNotification("The return quantity must be less than or equal to available quantity.")),[2]):[4,Zt.OrderGroup.updateReturnLineItem(this.props.orderGroupId,this.props.returnFormId,this.state.returnLineItem.LineItemId,this.state.returnQuantity,this.state.returnLineItem.ReturnReason)];case 1:return t.sent(),this.props.onUpdated&&this.props.onUpdated(),[3,3];case 2:return e=t.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(e.message)),[3,3];case 3:return[2]}}))}))},t}return Te(r,e),r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}}))}))},r.prototype.getData=function(){return Pe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return this.setState({isLoadingResource:!0}),[4,Zt.OrderGroup.getReturnReasons()];case 1:return e=r.sent(),t=e.map((function(e){return{label:e.Label,value:e.Label}})),this.setState({returnReasons:t,isLoadingResource:!1}),[2]}}))}))},r.prototype.render=function(){var e=t.createElement(d,{container:!0,spacing:16},t.createElement(d,{item:!0,xs:12,sm:12,md:12},t.createElement(be,{outlined:!0,label:"Display Name",style:{width:"100%"}},t.createElement(Ie.Input,{readOnly:!0,disabled:!0,style:{width:"100%"},value:this.props.returnLineItem.DisplayName}))),t.createElement(d,{item:!0,xs:12,sm:12,md:12},t.createElement(be,{outlined:!0,label:"Quantity",style:{width:"100%"}},t.createElement(Ie.Input,{type:"number",readOnly:!0,disabled:!0,style:{width:"100%"},value:this.props.returnLineItem.Quantity}))),t.createElement(d,{item:!0,xs:12,sm:12,md:12},t.createElement(be,{outlined:!0,onChange:this.handleReturnQuantityChange,style:{width:"100%"},label:"Return Quantity"},t.createElement(Ie.Input,{type:"number",step:"0.01",min:"0",disabled:!this.props.isReturnEditable,readOnly:!this.props.isReturnEditable,max:this.state.returnLineItem.Quantity,value:this.state.returnQuantity}))),t.createElement(d,{item:!0,xs:12,sm:12,md:12},t.createElement(be,{outlined:!0,type:"number",label:"Placed Price",style:{width:"100%"}},t.createElement(Ie.Input,{type:"number",style:{width:"100%"},readOnly:!0,disabled:!0,value:this.props.returnLineItem.PlacedPrice.Amount}))),t.createElement(d,{item:!0,xs:12,sm:12,md:12},!this.state.isLoadingResource&&t.createElement(_t,{label:"Return Reason",disabled:!this.props.isReturnEditable,fullWidth:!0,value:this.state.returnLineItem.ReturnReason,options:this.state.returnReasons,required:!0,onChange:this.handleReturnReasonChange})));return this.props.isReturnEditable?t.createElement(ar,{title:"Edit Return Line Item",open:!0,okLabel:"Save",onOK:this.update,onClose:this.props.onClose},e):t.createElement(ar,{title:"View Return Line Item",open:!0,onClose:this.props.onClose},e)},r}(t.Component),ma=n.connect()(ha),ga=function(e){function r(r){var n=e.call(this,r)||this;return n.columns=[{name:"NAME",selector:"DisplayName",render:function(e){return t.createElement(s.Grid,{container:!0,direction:"row",className:n.props.classes.rowData},t.createElement(_s,Ge({},e)),t.createElement(s.Grid,{item:!0},t.createElement(x,{noWrap:!0,variant:"body2",color:"inherit"},e.DisplayName),t.createElement(x,{variant:"body1",color:"inherit"},e.Code)))}},{name:"PLACED PRICE",selector:"PlacedPrice",right:!0,render:function(e){return t.createElement(En,{amount:e.PlacedPrice})}},{name:"PURCHASED QUANTITY",selector:"Quantity",right:!0},{name:"SHIPMENT NO",selector:"OriginalShipmentNo",right:!0},{name:"RETURN QUANTITY",selector:"ReturnQuantity",right:!0},{name:"TOTAL BEFORE RETURN",selector:"Total",right:!0,render:function(e){return t.createElement(En,{amount:e.Total})}},{name:"",width:10,render:function(e,r){var s=[];return n.isReturnEditable()?(s.push({title:"Edit",clickHandler:function(){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(t){return this.goToLineItemDetail(e),[2]}))}))}}),s.push({title:"Delete",clickHandler:function(){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(t){return this.setState({currentItem:e,isDeleteDialogOpen:!0}),[2]}))}))}})):s.push({title:"View",clickHandler:function(){return Pe(n,void 0,void 0,(function(){return Ne(this,(function(t){return this.goToLineItemDetail(e),[2]}))}))}}),t.createElement(is,{actions:s,rowData:e,rowIndex:r})}}],n.handleReturnCommentChange=function(e){var t=Ge({},n.state.returnOrderForm);t.ReturnComment=e.target.value,n.setState({returnOrderForm:t})},n.closeDialog=n.closeDialog.bind(n),n}return Te(r,e),r.prototype.loadPaymentMethods=function(e){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.PaymentMethod.getPaymentMethods(e)];case 1:return[2,t.sent()]}}))}))},r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return this.setState({isLoadingResource:!0}),[4,this.getData()];case 1:return e.sent(),this.setState({isLoadingResource:!1}),[2]}}))}))},r.prototype.getData=function(){return Pe(this,void 0,void 0,(function(){var e,t,r,n;return Ne(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,Zt.OrderGroup.getReturn(this.props.orderGroupId,this.props.returnFormId)];case 1:return e=s.sent(),this.setState({returnOrderForm:e}),[4,Zt.OrderGroup.getSingleOrderGroup("Order",this.props.orderGroupId)];case 2:return t=s.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(t)),t.ValidationMessages.length>0&&this.props.dispatch(rt.ApplicationActions.showNotification(t.ValidationMessages.join(", "))),[4,this.loadPaymentMethods(t.MarketId)];case 3:return r=s.sent(),this.props.dispatch(rt.PaymentActions.setPaymentMethods(r)),[3,5];case 4:return n=s.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,5];case 5:return[2]}}))}))},r.prototype.cancelReturn=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Zt.OrderGroup.cancelReturn(this.props.orderGroupId,this.props.returnFormId)];case 1:return e.sent(),[4,this.getData()];case 2:return e.sent(),[2]}}))}))},r.prototype.closeView=function(){var e=vt+"/"+this.props.orderGroupId+"?tab=return";zr.push(e)},r.prototype.closeDialog=function(){this.setState({lineItemDialogOpen:!1})},r.prototype.goToLineItemDetail=function(e){this.setState({lineItemDialogOpen:!0,returnLineItemSelected:e,isReturnEditable:this.isReturnEditable()})},r.prototype.deleteLineItem=function(e){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return this.setState({isLoadingResource:!0}),[4,Zt.OrderGroup.deleteReturnLineItem(this.props.orderGroupId,this.props.returnFormId,e.LineItemId)];case 1:return t.sent(),[2]}}))}))},r.prototype.updateReturnComment=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Zt.OrderGroup.updateReturnForm(this.props.orderGroupId,this.props.returnFormId,this.state.returnOrderForm)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(e.message)),[3,3];case 3:return[2]}}))}))},r.prototype.isReturnEditable=function(){return this.state.returnOrderForm.Status.Code===cs.AwaitingStockReturn},r.prototype.render=function(){var e=this;return t.createElement("div",null,t.createElement(fr,{closeView:function(){return e.closeView()},title:"Return Details",showDialogActions:!0},this.state.lineItemDialogOpen&&t.createElement(ma,{orderGroupId:this.props.orderGroupId,returnFormId:this.props.returnFormId,returnLineItem:this.state.returnLineItemSelected,isReturnEditable:this.state.isReturnEditable,onUpdated:function(){return Pe(e,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return this.closeDialog(),[4,this.getData()];case 1:return e.sent(),[2]}}))}))},onClose:this.closeDialog}),t.createElement(s.Grid,{container:!0,direction:"column",spacing:8},t.createElement(s.Grid,{item:!0},t.createElement(pa,{onUpdated:function(){return e.getData()},returnOrderForm:this.state.returnOrderForm,orderGroupId:this.props.orderGroupId})),t.createElement(s.Grid,{item:!0},t.createElement(s.Card,null,t.createElement(s.CardContent,null,this.state&&this.state.returnOrderForm&&t.createElement(s.Grid,{container:!0,direction:"column",spacing:16},t.createElement(s.Grid,{item:!0},t.createElement(x,{className:this.props.classes.rowLabel},"Return No"),t.createElement(x,{className:this.props.classes.rowData},this.state.returnOrderForm.RMANumber)),t.createElement(s.Grid,{item:!0},t.createElement(x,{className:this.props.classes.rowLabel},"Created Date"),t.createElement(x,{className:this.props.classes.rowData},X(this.state.returnOrderForm.Created).format("LLL"))),t.createElement(s.Grid,{item:!0},t.createElement(x,{className:this.props.classes.rowLabel},"Created By"),t.createElement(x,{className:this.props.classes.rowData},this.state.returnOrderForm.Creator.FullName)),t.createElement(s.Grid,{item:!0},t.createElement(x,{className:this.props.classes.rowLabel},"Status"),t.createElement(x,{className:this.props.classes.rowData},this.state.returnOrderForm.Status.Name)),t.createElement(s.Grid,{item:!0},t.createElement(x,{className:this.props.classes.rowLabel},"Comment"),t.createElement(be,{className:this.props.classes.rowData,textarea:!0,style:{height:"100px",width:"400px"}},t.createElement(Ie.Input,{style:{resize:"none"},maxLength:1024,readOnly:this.state.returnOrderForm.Status.Code!==cs.AwaitingStockReturn,value:this.state.returnOrderForm.ReturnComment,onChange:this.handleReturnCommentChange,onBlur:function(){e.updateReturnComment()}}))),t.createElement(s.Grid,{item:!0},!this.state.isLoadingResource&&this.state.returnOrderForm&&t.createElement(wn,{columns:this.columns,data:ea(this.state.returnOrderForm)})),t.createElement(s.Grid,null,t.createElement(s.Grid,null,t.createElement(ca,{amount:this.state.returnOrderForm.ItemsTotal,label:"Line Item Total",variant:"subtitle1"})),t.createElement(s.Grid,null,t.createElement(ca,{amount:this.state.returnOrderForm.InvalidDiscount,label:"Invalidated Discounts",variant:"subtitle1"})),t.createElement(s.Grid,null,t.createElement(ca,{amount:this.state.returnOrderForm.Total,label:"Return Total",variant:"subtitle1"}))))))))),t.createElement(ar,{open:this.state.isDeleteDialogOpen,title:"Delete Item",closeLabel:"No",okLabel:"Yes",onOK:function(){e.deleteLineItem(e.state.currentItem).then((function(){e.setState({isDeleteDialogOpen:!1}),e.getData().then((function(){return e.setState({isLoadingResource:!1})}))}))},onClose:function(){return e.setState({isDeleteDialogOpen:!1})}},t.createElement(x,{variant:"body1"},"Are you sure you want to delete this item?")))},r}(t.Component),fa=s.withStyles((function(e){e.spacing;return s.createStyles({rowLabel:{display:"inline-block",width:"200px"},rowData:{display:"inline-block"}})}))(n.connect((function(e,t){return Ge({orderGroup:e.orderGroup.currentOrderGroup},t)}))(ga)),ya=function(e){function r(t){var r,n=e.call(this,t)||this;if(n.state={selectedOrderTabIndex:1,showConfirmDiscardDialog:!1,returnOrderFormId:-1},n.orderTabNames=new Array,n.orderTabIndexChangedHandler=function(e){return Pe(n,void 0,void 0,(function(){var t;return Ne(this,(function(r){return this.setState({selectedOrderTabIndex:e}),(t=new URLSearchParams(zr.location.search)).set("tab",this.orderTabNames[e].key),zr.replace(zr.location.pathname+"?"+t.toString()),[2]}))}))},n.createOrderHandler=function(){return Pe(n,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,Zt.OrderGroup.createPurchaseOrder(this.props.orderGroup)];case 1:return e=r.sent(),this.state.returnOrderFormId>-1&&e.ParentOrderId?[4,Zt.OrderGroup.updateExchangeOrderId(e.ParentOrderId,this.state.returnOrderFormId,e.OrderGroupId)]:[3,3];case 2:r.sent(),r.label=3;case 3:return zr.replace(vt+"/"+e.OrderGroupId),[3,5];case 4:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,5];case 5:return[2]}}))}))},!n.props.orderGroup)return zr.push("/?type=Order"),n;n.initOrderTabs(t);var s=new URLSearchParams(zr.location.search),a=s.get("tab");if(a){var i=n.orderTabNames.findIndex((function(e){return e.key===a}));i>0&&(n.state.selectedOrderTabIndex=i)}return n.state.returnOrderFormId=parseInt(null!=(r=s.get("returnFormId"))?r:"-1",10),n}return Te(r,e),r.prototype.initOrderTabs=function(e){this.orderTabNames.push({key:"summary",name:"Summary"}),this.orderTabNames.push({key:"details",name:"Form Details "}),this.orderTabNames.push({key:"contact",name:"Contact Details"})},r.prototype.closeView=function(){var e=Kr("previous_order_create");zr.push(null!=e?e:"/")},r.prototype.render=function(){var e,r,n=this,a=null===(e=this.props.extendUI)||void 0===e?void 0:e.topPlaceHolder,i=null===(r=this.props.extendUI)||void 0===r?void 0:r.bottomPlaceHolder;return t.createElement(t.Fragment,null,this.props.orderGroup&&t.createElement(fr,{closeView:function(){return n.setState({showConfirmDiscardDialog:!0})},title:"Prepare Order",showDialogActions:!0},a&&t.createElement(a,{MarketId:this.props.selectedMarket,CustomerId:this.props.orderGroup.Customer.Id}),t.createElement(s.Grid,{container:!0,direction:"column",spacing:8},t.createElement(s.Grid,{item:!0},t.createElement(s.Grid,{container:!0,justify:"flex-end"},t.createElement(s.Grid,{item:!0},t.createElement(f.TextButton,{outlined:!0,type:"submit",disabled:!ts(this.props.orderGroup),onClick:this.createOrderHandler},"Create Order")))),t.createElement(s.Grid,{item:!0},t.createElement(s.AppBar,{position:"static",color:"default"},t.createElement(f.TabBar,{activeIndex:this.state.selectedOrderTabIndex,handleActiveIndexUpdate:this.orderTabIndexChangedHandler},this.orderTabNames.map((function(e){return t.createElement(f.Tab,{key:e.key},e.name)})))),t.createElement(s.Card,null,t.createElement(s.CardContent,null,t.createElement(s.Grid,null,"summary"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(Hn,{orderGroup:this.props.orderGroup,isReadonly:!0,createMode:!0}),"details"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(s.Grid,null,t.createElement(na,{orderForm:this.props.orderGroup.Forms[0]})),"contact"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(s.Grid,null,t.createElement(jn,{orderGroup:this.props.orderGroup}))))))),i&&t.createElement(i,{MarketId:this.props.selectedMarket,CustomerId:this.props.orderGroup.Customer.Id})),this.state.showConfirmDiscardDialog&&t.createElement(ir,{title:"Discard Order",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:this.closeView,onClose:function(){n.setState({showConfirmDiscardDialog:!1})}},t.createElement(s.Typography,{variant:"body1"},"Are you sure you want to discard Order?")))},r}(t.Component),Ea=n.connect((function(e,t){var r,n;return{selectedMarket:e.market.selectedMarket,orderGroup:e.orderGroup.currentOrderGroup,extendUI:null===(n=null===(r=e.setting.pageConfig)||void 0===r?void 0:r.createOrder)||void 0===n?void 0:n.extendUI}}))(ya),va=function(e){function r(t){var r=e.call(this,t)||this;r.state={selectedOrderTabIndex:1,showConfirmDiscardDialog:!1,loaded:!1},r.orderTabNames=new Array,r.paymentPlanSettingValidator={validate:function(){return!1}},r.initCartData=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.Cart.getCustomerCart(this.props.customerId,this.props.marketId)];case 1:return t.sent()&&this.props.dispatch(rt.ApplicationActions.showNotification("EPiServer Commerce does not allow carts with same customer and market. Existing cart of the customer in current market was cleared.")),[4,Zt.Cart.createOrRefreshCart(this.props.customerId,this.props.marketId,"Default")];case 2:return(e=t.sent())&&this.props.dispatch(rt.OrderGroupActions.updateCurrentOrderGroup(e)),[2]}}))}))},r.orderTabIndexChangedHandler=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return this.setState({selectedOrderTabIndex:e}),(t=new URLSearchParams(zr.location.search)).set("tab",this.orderTabNames[e].key),zr.replace(zr.location.pathname+"?"+t.toString()),[2]}))}))},r.closeView=function(){r.props.dispatch(rt.ApplicationActions.closeCustomerSelectionView()),r.props.dispatch(rt.OrderGroupActions.setPaymentPlanSetting({})),Zt.Cart.deleteCart(r.props.orderGroup.OrderGroupId);var e=Kr("previous_paymentplan_create");zr.push(null!=e?e:"/")},r.createPaymentPlanHandler=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.PaymentPlan.createPaymentPlan(this.props.orderGroup.OrderGroupId,this.props.paymentPlanSetting)];case 1:return e=r.sent(),zr.replace(St+"/"+e.OrderGroupId),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.initOrderTabs(t);var n=new URLSearchParams(zr.location.search).get("tab");if(n){var s=r.orderTabNames.findIndex((function(e){return e.key===n}));s>0&&(r.state.selectedOrderTabIndex=s)}return r}return Te(r,e),r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return this.props.orderGroup&&this.props.orderGroup.OrderGroupId&&this.props.currentOrderGroupId===this.props.orderGroup.OrderGroupId?[3,3]:[4,this.initCartData()];case 1:return t.sent(),[4,Zt.Currency.getCurrencies(this.props.orderGroup.MarketId)];case 2:e=t.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrencies(e)),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroupId(this.props.orderGroup.OrderGroupId)),t.label=3;case 3:return this.setState({loaded:!0}),[2]}}))}))},r.prototype.initOrderTabs=function(e){this.orderTabNames.push({key:"summary",name:"Summary"}),this.orderTabNames.push({key:"details",name:"Form Details "}),this.orderTabNames.push({key:"contact",name:"Contact Details"}),this.orderTabNames.push({key:"settings",name:"Settings"})},r.prototype.render=function(){var e,r,n=this,a=null===(e=this.props.extendUI)||void 0===e?void 0:e.topPlaceHolder,i=null===(r=this.props.extendUI)||void 0===r?void 0:r.bottomPlaceHolder;return t.createElement(t.Fragment,null,this.props.orderGroup&&this.state.loaded&&t.createElement(fr,{closeView:function(){return n.setState({showConfirmDiscardDialog:!0})},title:"Create Payment Plan",showDialogActions:!0},a&&t.createElement(a,{MarketId:this.props.marketId,CustomerId:this.props.customerId}),t.createElement(s.Grid,{container:!0,direction:"column",spacing:8},t.createElement(s.Grid,{item:!0},t.createElement(s.Grid,{container:!0,justify:"flex-end"},t.createElement(s.Grid,{item:!0},t.createElement(f.TextButton,{outlined:!0,type:"submit",disabled:!ts(this.props.orderGroup)||!this.paymentPlanSettingValidator.validate(),onClick:this.createPaymentPlanHandler},"Create Payment Plan")))),t.createElement(s.Grid,{item:!0},t.createElement(s.AppBar,{position:"static",color:"default"},t.createElement(f.TabBar,{activeIndex:this.state.selectedOrderTabIndex,handleActiveIndexUpdate:this.orderTabIndexChangedHandler},this.orderTabNames.map((function(e){return t.createElement(f.Tab,{key:e.key},e.name)})))),t.createElement(s.Card,null,t.createElement(s.CardContent,null,t.createElement(s.Grid,null,"summary"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(Hn,{orderGroup:this.props.orderGroup,isReadonly:!1,createMode:!0}),"details"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(s.Grid,null,t.createElement(na,{orderForm:this.props.orderGroup.Forms[0]})),"contact"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(s.Grid,null,t.createElement(jn,{orderGroup:this.props.orderGroup})),"settings"===this.orderTabNames[this.state.selectedOrderTabIndex].key&&t.createElement(s.Grid,null,t.createElement(Jn,{editMode:!0,createMode:!0,paymentPlan:this.props.orderGroup,validator:this.paymentPlanSettingValidator}))))))),i&&t.createElement(i,{MarketId:this.props.marketId,CustomerId:this.props.customerId})),this.state.showConfirmDiscardDialog&&t.createElement(ir,{title:"Discard Payment Plan",closeButtonLabel:"No",confirmButtonLabel:"Yes",onConfirm:this.closeView,onClose:function(){n.setState({showConfirmDiscardDialog:!1})}},t.createElement(s.Typography,{variant:"body1"},"Are you sure you want to discard Payment Plan?")))},r}(t.Component),Ca=n.connect((function(e,t){var r,n;return{orderGroup:e.orderGroup.currentOrderGroup,currentOrderGroupId:e.orderGroup.currentOrderGroupId,marketId:t.marketId,customerId:t.customerId,paymentPlanSetting:e.orderGroup.paymentPlanSetting,extendUI:null===(n=null===(r=e.setting.pageConfig)||void 0===r?void 0:r.createPaymentPlan)||void 0===n?void 0:n.extendUI}}))(va),Sa=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{border:"solid 1px #000",padding:"8px 12px",backgroundColor:"#fff",textAlign:"center"}})}))(n.connect((function(e,t){return{orderGroupFilterIsVisible:e.application.orderGroupFilterIsVisible,classes:t.classes}}))((function(e){var r=e.classes;return e.orderGroupFilterIsVisible?t.createElement("div",{className:r.root},t.createElement(x,null,"This feature is yet not available.")):null}))),Ia=require("autosuggest-highlight/match"),ba=require("autosuggest-highlight/parse"),Aa=function(e,r){var n=Ia(e.FullName,r.query),a=ba(e.FullName,n),i=Ia(e.Email,r.query),o=ba(e.Email,i);return t.createElement(f.List,null,t.createElement(f.ListItem,{style:{height:"48px"}},t.createElement(f.ListItemText,{primaryText:t.createElement("div",null,a.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)})),t.createElement("div",null,t.createElement(s.Typography,{color:"textSecondary",gutterBottom:!0},t.createElement("div",null,o.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)}))))))})),t.createElement(f.ListDivider,null))},Oa=function(e){var r=e.ref,n=De(e,["ref"]);return t.createElement(s.TextField,{autoFocus:!0,required:!0,fullWidth:!0,label:"Choose customer",placeholder:"Search by name or e-mail...",variant:"outlined",InputProps:Ge({inputRef:r},n)})},Ta=function(e){return e.FullName};var wa=o.withStyles((function(e){e.palette;var t=e.spacing;e.breakpoints;return s.createStyles({container:{position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:t.unit,left:0,right:0,maxHeight:"300px",overflowY:"auto"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"},divider:{height:2*t.unit},email:{display:"block",fontSize:"0.9em"}})}))(n.connect((function(e,t){var r=e.market.markets.find((function(e){return!0===e.IsCurrentMarket}));return{suggestions:e.application.customerSearchFieldSuggestions,classes:t.classes,listedOrderGroups:e.orderGroup.listedOrderGroups,orderPageIndex:e.application.pageIndex,orderRowsPerPage:e.application.rowsPerPage,selectedMarket:e.market.selectedMarket||(r?r.Id:""),selectedContactId:e.application.selectedContactId,onSelectionChanged:t.onSelectionChanged}}))((function(e){var r=this,n=e.classes,a=t.useState(""),i=a[0],o=a[1],c=t.useState(""),l=c[0],u=c[1];t.useEffect((function(){!function(){Pe(this,void 0,void 0,(function(){var t,r;return Ne(this,(function(n){switch(n.label){case 0:if(!e.selectedContactId||i===e.selectedContactId)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),o(e.selectedContactId),[4,Zt.Contact.get(e.selectedContactId)];case 2:return t=n.sent(),e.dispatch(rt.ApplicationActions.setCustomerSearchFieldSuggestions([{Id:t.Id,FullName:t.FullName?t.FullName:"",Email:t.Email?t.Email:""}])),u(t.FullName),e.onSelectionChanged(e.selectedMarket,e.selectedContactId),[3,4];case 3:return r=n.sent(),e.dispatch(rt.ApplicationActions.showNotification(r.message)),[3,4];case 4:return[2]}}))}))}()}),[e.selectedContactId]);var d=t.useCallback(ve.debounce((function(t){var n=t.value;return Pe(r,void 0,void 0,(function(){var t,r,s;return Ne(this,(function(a){switch(a.label){case 0:t=n.trim().toLowerCase(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Zt.Contact.list(t)];case 2:return r=a.sent(),e.dispatch(rt.ApplicationActions.setCustomerSearchFieldSuggestions(r)),[3,4];case 3:return s=a.sent(),e.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,4];case 4:return[2]}}))}))}),1e3,{trailing:!0}),[]),p=function(){e.dispatch(rt.CreateContactFormActions.showCreateContactForm())};return t.createElement(s.Grid,{container:!0,spacing:16,direction:"row"},t.createElement(s.Grid,{item:!0,xs:12},t.createElement(Un,{selectedMarket:e.selectedMarket,updateInputValue:function(t){return function(t){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(r){return e.dispatch(rt.MarketActions.setSelectedMarket(t)),e.onSelectionChanged(t,e.selectedContactId),[2]}))}))}(t)}})),t.createElement(s.Grid,{item:!0,xs:12},t.createElement(Ce,{renderInputComponent:Oa,suggestions:e.suggestions,onSuggestionsFetchRequested:d,onSuggestionsClearRequested:function(){e.dispatch(rt.ApplicationActions.setCustomerSearchFieldSuggestions([]))},renderSuggestionsContainer:function(e){return function(e,r){var n=e.containerProps,a=e.children;return t.createElement("div",{style:{marginTop:"8px"}},!a&&t.createElement(f.TextButton,{onClick:function(e){e.preventDefault(),r(e)},outlined:!0},"New Customer"),t.createElement(s.Paper,Ge({},n,{style:{marginTop:0},square:!0}),a))}(e,p)},getSuggestionValue:Ta,renderSuggestion:Aa,onSuggestionSelected:function(t,n){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(t){return e.dispatch(rt.ApplicationActions.setSelectedContactId(n.suggestion.Id)),e.onSelectionChanged(e.selectedMarket,n.suggestion.Id),o(n.suggestion.Id),[2]}))}))},inputProps:{value:l,onChange:function(t,r){r&&(u(r.newValue),""===r.newValue&&(e.onSelectionChanged(e.selectedMarket,""),e.dispatch(rt.ApplicationActions.setSelectedContactId(""))))},type:"search"},theme:{container:n.container,suggestionsContainerOpen:n.suggestionsContainerOpen,suggestionsList:n.suggestionsList,suggestion:n.suggestion}})))}))),Ga=function(e){function r(t){var r=e.call(this,t)||this;return r.getTitle=function(e){switch(e){case"Cart":return"Open Cart";case"Order":return"Create Order";case"PaymentPlan":return"Create Payment Plan";default:return""}},r.selectionChangedHandler=function(e,t){return Pe(r,void 0,void 0,(function(){var r,n;return Ne(this,(function(s){switch(s.label){case 0:if(!e||!t)return this.setState({cartMode:null,currentCart:null,isFormValid:!1}),[2];if(this.setState({cartMode:null,isFormValid:!0}),"Cart"!==this.props.orderGroupType)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Zt.Cart.getCustomerCart(t,e)];case 2:return r=s.sent(),this.setState({currentCart:r,cartMode:r?"open":"create"}),[3,4];case 3:return n=s.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(n.message)),[3,4];case 4:return[2]}}))}))},r.createOrRefreshCart=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.Cart.createOrRefreshCart(this.props.selectedContactId,this.props.selectedMarket,"Default")];case 1:return(e=r.sent())&&(this.closeView(),zr.push(Ct+"/"+e.OrderGroupId)),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.openCustomerCart=function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){return this.state.currentCart?(this.closeView(),zr.push(Ct+"/"+this.state.currentCart.OrderGroupId)):this.props.dispatch(rt.ApplicationActions.showNotification("Cart is not found.")),[2]}))}))},r.createCustomerOrder=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return[4,Zt.OrderGroup.initPurchaseOrder(this.props.selectedContactId,this.props.selectedMarket)];case 1:return e=t.sent(),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup(e)),this.closeView(),Qr("previous_order_create"),zr.push(""+Tt),[2]}}))}))},r.createPaymentPlan=function(){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(e){return this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroup({})),this.props.dispatch(rt.OrderGroupActions.setCurrentOrderGroupId(null)),this.closeView(),Qr("previous_paymentplan_create"),zr.push(wt+"?marketId="+this.props.selectedMarket+"&customerId="+this.props.selectedContactId),[2]}))}))},r.closeView=function(){r.props.dispatch(rt.ApplicationActions.setSelectedContactId("")),r.props.dispatch(rt.ApplicationActions.closeCustomerSelectionView())},r.state={title:r.getTitle(r.props.orderGroupType),orderGroupType:r.props.orderGroupType,isFormValid:!1,currentCart:null,cartMode:null},r}return Te(r,e),r.prototype.render=function(){return t.createElement(h,{open:!0,maxWidth:"sm",fullWidth:!0,onClose:this.closeView,className:this.props.classes.root,classes:{paper:this.props.classes.paper}},t.createElement(ce,null,this.state.title),t.createElement(g,{className:this.props.classes.dialogContent},t.createElement(wa,{onSelectionChanged:this.selectionChangedHandler})),t.createElement(m,null,t.createElement(f.TextButton,{onClick:this.closeView},"Cancel"),"Cart"===this.props.orderGroupType&&t.createElement(t.Fragment,null,"create"===this.state.cartMode&&t.createElement(f.TextButton,{disabled:!this.state.isFormValid,unelevated:!0,type:"submit",onClick:this.createOrRefreshCart},"Create a cart"),"open"===this.state.cartMode&&t.createElement(f.TextButton,{disabled:!this.state.isFormValid,unelevated:!0,type:"submit",onClick:this.openCustomerCart},"Open cart")),"Order"===this.props.orderGroupType&&t.createElement(f.TextButton,{disabled:!this.state.isFormValid,unelevated:!0,type:"submit",onClick:this.createCustomerOrder},"Create Order"),"PaymentPlan"===this.props.orderGroupType&&t.createElement(f.TextButton,{disabled:!this.state.isFormValid,unelevated:!0,type:"submit",onClick:this.createPaymentPlan},"Create Payment Plan")))},r}(t.Component),Da=o.withStyles((function(e){e.palette,e.spacing,e.breakpoints;return s.createStyles({root:{},paper:{overflowY:"visible"},dialogContent:{overflowY:"visible"}})}))(n.connect((function(e,t){return{selectedMarket:e.market.selectedMarket,selectedContactId:e.application.selectedContactId,listedOrderGroups:e.orderGroup.listedOrderGroups,orderGroupType:t.orderGroupType,classes:t.classes}}))(Ga)),Pa=function(e){function r(t){var r=e.call(this,t)||this;return r.updateInputValue=function(e){return Pe(r,void 0,void 0,(function(){var t;return Ne(this,(function(r){return(t=Object.assign({},this.props.contact))[e.target.name]=String(e.target.value),this.props.dispatch(rt.CreateContactFormActions.setCreateContactFormContact(t)),[2]}))}))},r.saveChanges=function(){return Pe(r,void 0,void 0,(function(){var e,t;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Zt.Contact.createContact(this.props.contact)];case 1:return e=r.sent(),this.props.dispatch(rt.ApplicationActions.setSelectedContactId(e.Id)),this.closeView(),[3,3];case 2:return t=r.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(t.message)),[3,3];case 3:return[2]}}))}))},r.closeView=function(){r.props.dispatch(rt.CreateContactFormActions.hideCreateContactForm())},r}return Te(r,e),r.prototype.componentDidUpdate=function(e){this.currentForm&&e.isCurrentFormValid!==this.currentForm.isFormValid()&&this.props.dispatch(rt.CreateContactFormActions.setCreateContactFormIsValid(this.currentForm.isFormValid()))},r.prototype.render=function(){var e=this;return t.createElement(h,{open:!0,maxWidth:"sm",fullWidth:!0},t.createElement(ce,null,"Create Contact"),t.createElement(g,null,t.createElement(T.ValidatorForm,{ref:function(t){return e.currentForm=t},onSubmit:this.saveChanges},t.createElement(en,{contact:this.props.contact,saveChanges:this.saveChanges,updateInputValue:this.updateInputValue}))),t.createElement(m,null,t.createElement(f.TextButton,{onClick:this.closeView},"Cancel"),t.createElement(f.TextButton,{unelevated:!0,type:"submit",disabled:!this.props.isCurrentFormValid,onClick:this.saveChanges},"Save Customer")))},r}(t.Component),Na=n.connect((function(e){return{contact:e.createContactForm.contact,selectedMarket:e.market.selectedMarket,isCurrentFormValid:e.createContactForm.isValid,listedOrderGroups:e.orderGroup.listedOrderGroups}}))(Pa),Ra=require("autosuggest-highlight/match"),xa=require("autosuggest-highlight/parse"),La=function(e,r){var n=Ra(e.FullName,r.query),a=xa(e.FullName,n),i=Ra(e.Email,r.query),o=xa(e.Email,i);return t.createElement(f.List,null,t.createElement(f.ListItem,{style:{height:"48px"}},t.createElement(f.ListItemText,{primaryText:t.createElement("div",null,a.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)})),t.createElement("div",null,t.createElement(s.Typography,{color:"textSecondary",gutterBottom:!0},t.createElement("div",null,o.map((function(e,r){return e.highlight?t.createElement("span",{key:String(r),style:{fontWeight:500}},e.text):t.createElement("strong",{key:String(r),style:{fontWeight:300}},e.text)}))))))})),t.createElement(f.ListDivider,null))},Ma=function(e){var r=e.ref,n=De(e,["ref"]);return t.createElement(s.TextField,{autoFocus:!0,required:!0,fullWidth:!0,label:"Choose customer",placeholder:"Search by name or e-mail...",variant:"outlined",InputProps:Ge({inputRef:r},n)})},Fa=function(e){return e.FullName};var ka=o.withStyles((function(){return s.createStyles({container:{position:"relative"},suggestionsContainerOpen:{zIndex:1,position:"fixed",marginTop:"0px",maxHeight:"300px",overflowY:"auto",width:"512px"},suggestion:{display:"block"},suggestionsList:{margin:0,padding:0,listStyleType:"none"}})}))(n.connect((function(e,t){return{classes:t.classes,onContactSelected:t.onContactSelected,onClose:t.onClose}}))((function(e){var r=this,n=e.classes,a=t.useState(""),i=a[0],o=a[1],c=t.useState([]),l=c[0],u=c[1],d=t.useCallback(ve.debounce((function(t){var n=t.value;return Pe(r,void 0,void 0,(function(){var t,r,s;return Ne(this,(function(a){switch(a.label){case 0:t=n.trim().toLowerCase(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Zt.Contact.list(t)];case 2:return r=a.sent(),u(r),[3,4];case 3:return s=a.sent(),e.dispatch(rt.ApplicationActions.showNotification(s.message)),[3,4];case 4:return[2]}}))}))}),1e3,{trailing:!0}),[]);return t.createElement(ar,{title:"Open Customer",open:!0,onClose:e.onClose},t.createElement(s.Grid,{container:!0,spacing:16},t.createElement(s.Grid,{item:!0,xs:12},t.createElement(Ce,{renderInputComponent:Ma,suggestions:l,onSuggestionsFetchRequested:d,onSuggestionsClearRequested:function(){u([])},renderSuggestionsContainer:function(e){return function(e){var r=e.containerProps,n=e.children;return t.createElement(s.Paper,Ge({},r),n)}(e)},getSuggestionValue:Fa,renderSuggestion:La,onSuggestionSelected:function(t,n){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(t){return e.onContactSelected&&e.onContactSelected(n.suggestion.Id),[2]}))}))},inputProps:{value:i,onChange:function(e,t){t&&o(t.newValue)},type:"search"},theme:{container:n.container,suggestionsContainerOpen:n.suggestionsContainerOpen,suggestionsList:n.suggestionsList,suggestion:n.suggestion}}))))}))),_a=function(e){function r(t){var r=e.call(this,t)||this;return r.state={orderGroupType:r.props.orderGroupType,searchText:r.props.searchText,searchInputValue:r.props.searchText,isLoadingResource:!0,searchOptions:r.getSearchTypeOptions(r.props.orderGroupType),searchType:r.props.searchType,openCustomerDialogVisible:!1},r.handleScroll=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){switch(t.label){case 0:return window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&this.props.listedOrderGroups.length<this.props.totalOrderGroups?(e=this.props.pageIndex+1,this.props.dispatch(rt.ApplicationActions.setOrderGroupListPageIndex(e)),[4,this.loadOrderGroups(this.state.orderGroupType,e*this.props.rowsPerPage,this.props.rowsPerPage,this.state.searchText,this.state.searchType)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},r.handleCreateOrder=function(){Qr(It),r.openCustomerSelectionView()},r.handleCreatePaymentPlan=function(){Qr(It),r.openCustomerSelectionView()},r.handleSearchTextChange=function(e){r.setState({searchInputValue:e.target.value})},r.clearSearchText=function(){r.setState({searchInputValue:"",searchText:""}),r.loadSearchResults({orderGroupType:r.state.orderGroupType,startingIndex:0,numberOfRecords:r.props.rowsPerPage,searchText:"",searchType:r.state.searchType})},r.loadSearchResults=function(e){return Pe(r,void 0,void 0,(function(){return Ne(this,(function(t){return 0===e.searchText.length?zr.push("/?type="+e.orderGroupType+"&searchBy="+e.searchType):zr.push("/?type="+e.orderGroupType+"&search="+encodeURIComponent(e.searchText)+"&searchBy="+e.searchType),this.setState({isLoadingResource:!0}),this.loadOrderGroups(e.orderGroupType,e.startingIndex,e.numberOfRecords,e.searchText,e.searchType),[2]}))}))},r.handleEnterKeypress=function(){return Pe(r,void 0,void 0,(function(){var e;return Ne(this,(function(t){return e=this.state.searchInputValue.trim(),this.setState({searchText:e}),this.loadSearchResults({orderGroupType:this.state.orderGroupType,startingIndex:0,numberOfRecords:this.props.rowsPerPage,searchText:e,searchType:this.state.searchType}),[2]}))}))},r.handleSearchTypeChange=function(e){r.setState({searchInputValue:"",searchText:"",searchType:e}),r.loadSearchResults({orderGroupType:r.state.orderGroupType,startingIndex:0,numberOfRecords:r.props.rowsPerPage,searchText:"",searchType:e})},r.handleOpenCustomerSearchDialog=function(){r.setState({openCustomerDialogVisible:!0})},r.handleCloseCustomerSearchDialog=function(){r.setState({openCustomerDialogVisible:!1})},r.handleContactSelected=function(e){Qr(mt),zr.push(ht+"/"+e+"/info"),r.setState({openCustomerDialogVisible:!1})},r.listOrderGroups=function(e){r.props.dispatch(rt.OrderGroupActions.listOrderGroups(e)),r.props.dispatch(rt.ContactActions.setCurrentContact(null))},r.openCustomerSelectionView=function(){r.props.dispatch(rt.ApplicationActions.setCustomerSearchFieldValue("")),r.props.dispatch(rt.ApplicationActions.openCustomerSelectionView())},r.handleEnterThrottle=ve.throttle(r.handleEnterKeypress,500),r}return Te(r,e),r.prototype.componentWillReceiveProps=function(e){var t=e.searchText===this.props.searchText||e.searchText===this.state.searchText,r=e.searchType===this.props.searchType||e.searchType===this.state.searchType;t&&r||(this.setState({searchInputValue:e.searchText,searchText:e.searchText,searchType:e.searchType}),this.loadOrderGroups(e.orderGroupType,0,this.props.rowsPerPage,e.searchText,e.searchType))},r.prototype.componentWillUnmount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){return window.removeEventListener("scroll",this.handleScroll),[2]}))}))},r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){return window.addEventListener("scroll",this.handleScroll),[2]}))}))},r.prototype.componentWillMount=function(){return Pe(this,void 0,void 0,(function(){var e=this;return Ne(this,(function(t){switch(t.label){case 0:return[4,this.loadOrderGroups(this.state.orderGroupType,0,this.props.rowsPerPage,this.state.searchText,this.state.searchType).then((function(){e.setState({isLoadingResource:!1})}))];case 1:return t.sent(),[2]}}))}))},r.prototype.switchOrderGroupType=function(e){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(t){switch(t.label){case 0:return zr.replace("/?type="+e),this.setState({orderGroupType:e,searchOptions:this.getSearchTypeOptions(e),searchType:Yn.CustomerName,searchInputValue:"",searchText:""}),[4,this.loadOrderGroups(e,0,this.props.rowsPerPage,"",Yn.CustomerName)];case 1:return t.sent(),[2]}}))}))},r.prototype.loadOrderGroups=function(e,t,r,n,s){return Pe(this,void 0,void 0,(function(){var a,i,o;return Ne(this,(function(c){switch(c.label){case 0:this.setState({isLoadingResource:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Zt.OrderGroup.getOrders({orderGroupType:e,startingIndex:t,numberOfRecords:r,searchText:n,searchType:s})];case 2:return a=c.sent(),i=a.Results,0===t?this.listOrderGroups(Re(i)):this.listOrderGroups(Re(this.props.listedOrderGroups,i)),this.props.dispatch(rt.ApplicationActions.setTotalOrderGroups(a.TotalOrderGroups)),[3,4];case 3:return o=c.sent(),this.props.dispatch(rt.ApplicationActions.showNotification(o.message)),[3,4];case 4:return this.setState({isLoadingResource:!1}),[2]}}))}))},r.prototype.goToDetail=function(e,t){switch(t){case"Order":Qr(It),zr.push(vt+"/"+e);break;case"PaymentPlan":Qr(At),zr.push(St+"/"+e);break;default:Qr(bt),zr.push(Ct+"/"+e)}},r.prototype.getSearchTypeOptions=function(e){switch(e){case"Order":return[{label:"Search by Customer Name",value:Yn.CustomerName},{label:"Search by Order Number",value:Yn.OrderNumber},{label:"Search by Email",value:Yn.Email}];default:return[{label:"Search by Customer Name",value:Yn.CustomerName},{label:"Search by Email",value:Yn.Email}]}},r.prototype.renderGridBody=function(){var e=this;return this.state.searchText.length>0&&0===this.props.listedOrderGroups.length?t.createElement(x,null,"Sorry, we couldn't find any results matching \""+this.state.searchText+'"'):this.props.listedOrderGroups.map((function(r,n){var s=t.createElement(x,{variant:"body1",className:e.props.classes.orderStatusText},Mn(r.OrderStatus)),a=[];return r.HasAwaitingReturnCompletable&&a.push("Awaiting Return Completion"),r.HasAwaitingStockReturns&&a.push("Awaiting Stock Return"),t.createElement(d,{item:!0,key:n,onClick:function(){return e.goToDetail(r.OrderGroupId,r.Type)},className:e.props.classes.orderRow},t.createElement(d,{container:!0,direction:"row",spacing:16,alignItems:"flex-start",justify:"space-between"},t.createElement(d,{item:!0,xs:12,md:1,className:e.props.classes.orderGroupId},t.createElement(x,{variant:"body1"},"Order"===r.Type?r.OrderNumber:"# "+r.OrderGroupId)),t.createElement(d,{item:!0,xs:12,md:2,className:e.props.classes.orderDate},t.createElement(x,{variant:"body1",className:e.props.classes.orderDateText},r.Created&&X(r.Created).format("LLL"))),t.createElement(d,{item:!0,xs:12,md:1,className:e.props.classes.cartName},t.createElement(x,{variant:"body1"},r.Name)),t.createElement(d,{item:!0,xs:12,md:1,className:e.props.classes.marketName},t.createElement(x,{variant:"body1"},r.MarketName)),t.createElement(d,{item:!0,xs:12,md:1,className:e.props.classes.customerName},t.createElement(x,{variant:"body1"},r.CustomerName)),t.createElement(d,{item:!0,xs:12,sm:12,md:2,className:e.props.classes.email},t.createElement(x,{variant:"body1"},r.Customer.Email)),t.createElement(d,{item:!0,xs:12,sm:6,md:2,className:e.props.classes.orderAmount},t.createElement(En,{amount:r.Total,className:e.props.classes.orderAmountText,align:"right"})),t.createElement(d,{item:!0,xs:12,sm:6,md:2,className:e.props.classes.orderStatus},s,a.length>0&&t.createElement(x,{variant:"subtitle2"},"(",a.join(", "),")"))))}))},r.prototype.render=function(){var e=this;return t.createElement(s.Card,{className:this.props.classes.root},t.createElement(s.CardContent,null,t.createElement(d,{container:!0,spacing:16,direction:"column"},t.createElement(d,{item:!0},t.createElement(d,{container:!0,justify:"space-between"},t.createElement(d,{item:!0},t.createElement(d,{container:!0,spacing:8},t.createElement(d,{item:!0},t.createElement(f.TextButton,{unelevated:"Cart"===this.state.orderGroupType,outlined:!0,onClick:function(){return e.switchOrderGroupType("Cart")}},"Carts")),t.createElement(d,{item:!0},t.createElement(f.TextButton,{unelevated:"Order"===this.state.orderGroupType,outlined:!0,onClick:function(){return e.switchOrderGroupType("Order")}},"Orders")),t.createElement(d,{item:!0},t.createElement(f.TextButton,{unelevated:"PaymentPlan"===this.state.orderGroupType,outlined:!0,onClick:function(){return e.switchOrderGroupType("PaymentPlan")}},"Payment plan")),t.createElement(d,{item:!0},t.createElement(_t,{dense:!0,value:this.state.searchType,options:this.state.searchOptions,onChange:this.handleSearchTypeChange})),t.createElement(d,{item:!0},t.createElement(s.TextField,{value:this.state.searchInputValue,variant:"outlined",placeholder:"Search",onChange:this.handleSearchTextChange,onKeyPress:function(t){"Enter"===t.key&&e.handleEnterThrottle()},InputProps:{classes:{root:this.props.classes.searchInput},startAdornment:t.createElement(s.InputAdornment,{position:"start"},t.createElement(Ae.Search,null)),endAdornment:0===this.state.searchInputValue.length?void 0:t.createElement(s.InputAdornment,{position:"end"},t.createElement(Ae.Clear,{onClick:this.clearSearchText}))}})))),t.createElement(d,{item:!0},t.createElement(d,{container:!0,spacing:8},t.createElement(d,{item:!0},"Cart"===this.state.orderGroupType&&t.createElement(f.TextButton,{onClick:this.openCustomerSelectionView,outlined:!0},"Open Cart"),"Order"===this.state.orderGroupType&&t.createElement(f.TextButton,{outlined:!0,onClick:this.handleCreateOrder},"Create Order"),"PaymentPlan"===this.state.orderGroupType&&t.createElement(f.TextButton,{outlined:!0,onClick:this.handleCreatePaymentPlan},"Create Payment Plan")),t.createElement(d,{item:!0},t.createElement(f.TextButton,{outlined:!0,onClick:this.handleOpenCustomerSearchDialog},"Open Customer"),this.state.openCustomerDialogVisible&&t.createElement(ka,{onContactSelected:this.handleContactSelected,onClose:this.handleCloseCustomerSearchDialog})))))),t.createElement(d,{item:!0},t.createElement(d,{container:!0,direction:"column"},t.createElement(d,{item:!0},t.createElement(V,{smDown:!0},t.createElement(d,{item:!0,className:this.props.classes.orderHeaderRow},t.createElement(d,{container:!0,direction:"row",spacing:16,alignItems:"flex-start",justify:"space-between"},t.createElement(d,{item:!0,xs:6,md:1},t.createElement(x,{variant:"caption"},"No.")),t.createElement(d,{item:!0,xs:6,md:2},t.createElement(x,{variant:"caption"},"Created Date")),t.createElement(d,{item:!0,xs:6,md:1},t.createElement(x,{variant:"caption"},"Name")),t.createElement(d,{item:!0,xs:6,md:1},t.createElement(x,{variant:"caption"},"Market")),t.createElement(d,{item:!0,xs:12,sm:6,md:1},t.createElement(x,{variant:"caption"},"Customer Name")),t.createElement(d,{item:!0,xs:12,sm:6,md:2},t.createElement(x,{variant:"caption"},"Customer Email")),t.createElement(d,{item:!0,xs:6,sm:6,md:2},t.createElement(x,{variant:"caption",align:"right"},"Amount")),t.createElement(d,{item:!0,xs:6,sm:6,md:2},t.createElement(x,{variant:"caption"},"Status"))))),this.renderGridBody()),this.state.isLoadingResource&&t.createElement(d,{item:!0},t.createElement(v,{className:this.props.classes.progressIndicator})))))))},r}(t.Component),Va={cursor:"pointer",borderBottom:"1px solid #eee",paddingTop:er.paddingDefault,paddingBottom:er.paddingDefault},Ua=o.withStyles((function(e){var t,r,n,a,i,o,c,l,u,d,p,h=e.palette,m=(e.spacing,e.breakpoints);return s.createStyles({root:{margin:15,width:"calc(100% - 30px)"},orderRow:Ge(Ge({},Va),{paddingLeft:5,paddingRight:5,cursor:"pointer","&:hover":{backgroundColor:tr.hoveredList,color:h.getContrastText(tr.hoveredList)}}),orderHeaderRow:Ge({},Va),emptyListStatement:{margin:er.marginDefault,padding:er.paddingDefault,textAlign:"center"},progressContainer:{marginTop:8,textAlign:"center"},progressIndicator:{margin:8,color:h.secondary.light},customerName:(t={fontWeight:"bold",order:4},t[m.down("sm")]={order:0},t),email:(r={fontWeight:"bold",order:5},r[m.down("sm")]={order:1},r),customerNameText:{fontWeight:"bold"},orderDate:(n={order:2},n[m.down("sm")]={order:3},n),orderDateText:(a={},a[m.down("sm")]={color:h.secondary.light},a),orderGroupId:(i={order:1},i[m.down("sm")]={display:"none"},i),marketName:(o={order:4},o[m.down("sm")]={order:2},o),cartName:(c={order:3},c[m.down("sm")]={display:"none"},c),orderAmount:(l={order:6},l[m.down("sm")]={order:4},l),orderAmountText:(u={},u[m.down("sm")]={textAlign:"left"},u),orderStatus:(d={order:7},d[m.down("sm")]={order:5},d),orderStatusText:(p={},p[m.down("sm")]={color:h.secondary.light},p),searchInput:{height:"36px"}})}))(n.connect((function(e,t){return{listedOrderGroups:e.orderGroup.listedOrderGroups,pageIndex:e.application.pageIndex,rowsPerPage:e.application.rowsPerPage,totalOrderGroups:e.application.totalOrderGroups,orderGroupType:t.orderGroupType,classes:t.classes,searchText:t.searchText,searchType:t.searchType}}))(_a)),Ba=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){var e,r,n=null===(e=this.props.extendUI)||void 0===e?void 0:e.topPlaceHolder,s=null===(r=this.props.extendUI)||void 0===r?void 0:r.bottomPlaceHolder;return t.createElement("div",null,n&&t.createElement(n,{className:"top-placeholder"}),t.createElement(Sa,null),this.props.customerSelectionViewIsVisible&&t.createElement(Da,{orderGroupType:this.props.orderGroupType}),this.props.createContactFormIsVisible&&t.createElement(Na,null),t.createElement(Ua,{orderGroupType:this.props.orderGroupType,searchText:this.props.searchText,searchType:this.props.searchType}),s&&t.createElement(s,{className:"bottom-placeholder"}))},r}(t.Component),Ha=function(e,t){var r,n,s,a;switch(e){case"Order":a=null===(r=t.setting.pageConfig.orderList)||void 0===r?void 0:r.extendUI;break;case"Cart":a=null===(n=t.setting.pageConfig.cartList)||void 0===n?void 0:n.extendUI;break;case"PaymentPlan":a=null===(s=t.setting.pageConfig.paymentPlanList)||void 0===s?void 0:s.extendUI}return a};var qa,Wa=(qa=o.withStyles((function(e){return e.palette,e.spacing,e.breakpoints,s.createStyles({})}))(n.connect((function(e,t){return{customerSelectionViewIsVisible:e.application.customerSelectionViewIsVisible,orderGroupType:t.orderGroupType,searchText:t.searchText,searchType:t.searchType,orderGroupViewIsVisible:e.application.orderGroupViewIsVisible,createContactFormIsVisible:e.createContactForm.isVisible,classes:t.classes,extendUI:Ha(t.orderGroupType,e)}}))(Ba)),function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return Te(r,e),r.prototype.render=function(){return t.createElement("div",null,this.props.topPlaceHolder?this.props.topPlaceHolder:"",t.createElement(qa,Ge({},this.props)),this.props.bottomPlaceHolder?this.props.bottomPlaceHolder:"")},r}(t.Component)),ja=n.connect((function(e,t){var r;return{extraPages:null===(r=e.setting.pageConfig)||void 0===r?void 0:r.extraPages}}))((function(e){return t.createElement(D.HashRouter,null,t.createElement("div",null,t.createElement(D.Route,{path:mt,render:function(e){return t.createElement(yn,Ge({customerId:e.match.params.id},e))}}),t.createElement(D.Route,{path:It,exact:!0,render:function(e){var r=e.match.params;return t.createElement(oa,{orderGroupId:r.id,orderGroupType:"Order"})}}),t.createElement(D.Route,{path:bt,exact:!0,render:function(e){var r=e.match.params;return t.createElement(oa,{orderGroupId:r.id,orderGroupType:"Cart"})}}),t.createElement(D.Route,{path:At,exact:!0,render:function(e){var r=e.match.params;return t.createElement(oa,{orderGroupId:r.id,orderGroupType:"PaymentPlan"})}}),t.createElement(D.Route,{path:Ot,exact:!0,render:function(e){var r=e.match.params;return t.createElement(fa,{orderGroupId:r.id,returnFormId:r.formId})}}),t.createElement(D.Route,{path:Tt,render:function(e){return t.createElement(Ea,Ge({},e))}}),t.createElement(D.Route,{path:wt,render:function(e){var r=new URLSearchParams(e.location.search),n=r.get("customerId")||"",s=r.get("marketId")||"";return t.createElement(Ca,{customerId:n,marketId:s})}}),t.createElement(D.Route,{path:pt,exact:!0,render:function(e){var r,n,s,a=new URLSearchParams(e.location.search),i=a.get("type");switch(i){case"Order":i="Order";break;case"PaymentPlan":i="PaymentPlan";break;default:i="Cart"}var o=null!=(r=a.get("search"))?r:"",c=null!=(s=Yn[(n=a.get("searchBy"),null!=n?n:"CustomerName")])?s:Yn.CustomerName;return c===Yn.OrderNumber&&"Order"!==i&&(c=Yn.CustomerName),t.createElement(Wa,{orderGroupType:i,searchText:o,searchType:c})}}),e.extraPages&&e.extraPages.map((function(e){return t.createElement(D.Route,{key:e.path,path:e.path,exact:e.exact,render:function(t){return e.render(t)}})}))))})),Ya=o.createMuiTheme({typography:{fontFamily:"Barlow, sans-serif",useNextVariants:!0},palette:{primary:{main:"#1456F1",light:"#8EBAFF",contrastText:"#fff"},secondary:{main:"#FF9283",contrastText:"#000"},error:{main:"#f01c10"}},overrides:{MuiCard:{root:{overflow:"unset"}},MuiModal:{root:{zIndex:1e4}},MuiSnackbar:{root:{zIndex:10001}}}});(new dt).initialize(nt);var za=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={ready:!1},t}return Te(r,e),r.prototype.componentDidMount=function(){return Pe(this,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Pe(void 0,void 0,void 0,(function(){var e,t,r,n,s,a;return Ne(this,(function(i){switch(i.label){case 0:return[4,Pe(void 0,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Zt.Geographics.getCountries()];case 1:return[2,e.sent()]}}))}))];case 1:return e=i.sent(),nt.dispatch(rt.GeographicsActions.setCountries(e)),[4,Pe(void 0,void 0,void 0,(function(){return Ne(this,(function(e){switch(e.label){case 0:return[4,Zt.Market.getMarkets()];case 1:return[2,e.sent()]}}))}))];case 2:return t=i.sent(),nt.dispatch(rt.MarketActions.setMarkets(t)),r=t.find((function(e){return!0===e.IsCurrentMarket})),nt.dispatch(rt.MarketActions.setSelectedMarket(r?r.Id:"")),[4,Zt.Shipment.getShippingMethods()];case 3:return n=i.sent(),nt.dispatch(rt.ShipmentActions.setShippingMethods(n)),[4,Zt.OrderGroup.getOrderStatuses()];case 4:return s=i.sent(),nt.dispatch(rt.OrderGroupActions.setOrderStatuses(s)),[4,Zt.Shipment.getShipmentStatuses()];case 5:return a=i.sent(),nt.dispatch(rt.ShipmentActions.setShipmentStatuses(a)),[2]}}))}))];case 1:return e.sent(),this.setState({ready:!0}),null!=this.props.setting&&nt.dispatch(rt.AppSettingActions.updateSetting(this.props.setting)),[2]}}))}))},r.prototype.render=function(){return this.state.ready&&t.createElement(n.Provider,{store:nt},t.createElement(s.MuiThemeProvider,{theme:Ya},t.createElement(a.MuiPickersUtilsProvider,{utils:c},t.createElement(st,null),t.createElement(ut,null),t.createElement(at,null),t.createElement(it,null),t.createElement(ja,null))))},r}(t.Component),Qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Te(t,e),t}((function(){}));exports.AppSettingState=Qa,exports.CSRApp=za;
